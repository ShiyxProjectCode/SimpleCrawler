function CreatePostNavigator() { var navigatorTitleDiv = '<div id="navigatorTitleDiv"></div>'; var navigatorDivContent = '<div id="navigatorDiv"><img onclick="CancelNavBox()" style="width:25px; float:right;height:25px;cursor:pointer;" src="http://images.cnblogs.com/cnblogs_com/toutou/682006/o_guanbi.png" /><ul class="nav">'; if ($("#cnblogs_post_body :header").length == 0) { return } $.each($("#cnblogs_post_body :header"), function (i, val) { var headerTagName = $(val)[0].tagName.toLowerCase(); var navigatorItem = '<li class="li_' + headerTagName + '"><a href="#_nav_' + i + '">' + $(val).text() + "</a></li>"; navigatorDivContent += navigatorItem; $(val).attr({ "id": "_nav_" + i }) }); navigatorDivContent += "</ul></div>"; $("#cnblogs_post_body").append(navigatorDivContent); $("#cnblogs_post_body").append(navigatorTitleDiv); $("#navigatorTitleDiv").click(function () { $("#navigatorDiv").toggle(200) }); var headerList = ["h1", "h2", "h3", "h4"]; var headerListLen = headerList.length; for (var i = 0; i < headerListLen; i++) { if (i < (headerListLen - 1) && $(".li_" + headerList[i]).length > 0) { for (var j = headerListLen - 1; j > i; j--) { $(".li_" + headerList[j]).css({ "margin-left": (i + 1) * 10 + "px", "background-image": "url(http://files.cnblogs.com/files/toutou/cnblog_toutou_bullet.ico)", "background-position": "left center", "background-repeat": "no-repeat", "padding-left": "0px;" }) } } } } function CancelNavBox() { $("#navigatorDiv").hide() } CreatePostNavigator(); $(document).ready(function () { $("body").scrollspy({ target: "#navigatorDiv", }) }); function GenerateContentList() { var jquery_h3_list = $("#cnblogs_post_body .blogCustomTitleStyle"); if (jquery_h3_list.length > 0) { var content = '<a name="_labelTop"></a>'; content += '<div id="navCategory">'; content += '<div ><span style="font-weight:bold;font-family:Wingdings; margin-left:3px; margin-right:3px;">v</span>阅读目录</div>'; content += '<ul style="list-style-type:none;">'; for (var i = 0; i < jquery_h3_list.length; i++) { var go_to_top = '<div style="text-align: right"><a href="#_labelTop">回到顶部</a><a name="_label' + i + '"></a></div>'; $(jquery_h3_list[i]).before(go_to_top); var li_content = '<li><a href="#_label' + i + '">' + $(jquery_h3_list[i]).html() + "</a></li>"; content += li_content } content += "</ul>"; content += "</div>"; content += '<div class="blogCustomTitleStyle"><span class="blogCustomTitleIco">v</span>博客前言</div>'; if ($("#cnblogs_post_body").length != 0) { $($("#cnblogs_post_body")[0]).prepend(content) } } $("#tbCommentBody").attr("placeholder", "口者，心之门户，智谋皆从之出。——鬼谷子") } GenerateContentList();