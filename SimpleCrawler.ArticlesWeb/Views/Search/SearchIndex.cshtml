@using Webdiyer.WebControls.Mvc;
@model PagedList<SimpleCrawler.Data.Entity.SearchResult>
    @{
    ViewBag.Title = "全文搜索";
    Layout = "~/Views/Shared/_Layout.cshtml";
    }

    <script src="~/Scripts/jquery-1.8.2.js"></script>
    <script src="~/Scripts/jquery-ui-1.8.2.custom.min.js"></script>
    <script type="text/javascript">
        $(function () {
            //自动匹配搜索建议
            $("#txtKeyword").autocomplete({
                source: "/Search/SearchSuggestion",
                select: function (event, ui) {
                    $("#txtKeyword").val(ui.item.value);
                }
            });
            $("#txtKeyword").focus();
        });
        function CheckInput() {
            var keyword = document.getElementById('txtKeyword').value;
            //输入框有值，且不为空格
            if (keyword != null || keyword != '') {
                if ($.trim(keyword) != null && $.trim(keyword) != '') {
                    return true;
                }
            }
            return false;
        }
    </script>
    <style type="text/css">
        .pager {
            TEXT-ALIGN: center;
            PADDING-BOTTOM: 3px;
            PADDING-LEFT: 0px;
            PADDING-RIGHT: 0px;
            FLOAT: right;
            PADDING-TOP: 3px;
        }

            .pager A {
                BORDER-BOTTOM: #ccc 1px solid;
                TEXT-ALIGN: left;
                BORDER-LEFT: #ccc 1px solid;
                PADDING-BOTTOM: 3px;
                LINE-HEIGHT: 26px;
                MARGIN: 0px 2px;
                OUTLINE-STYLE: none;
                PADDING-LEFT: 5px;
                PADDING-RIGHT: 5px;
                BACKGROUND: #fff;
                COLOR: #000;
                FONT-SIZE: 12px;
                BORDER-TOP: #ccc 1px solid;
                BORDER-RIGHT: #ccc 1px solid;
                TEXT-DECORATION: none;
                PADDING-TOP: 4px;
            }

                .pager A:hover {
                    BORDER-BOTTOM: #f80 1px solid;
                    BORDER-LEFT: #f80 1px solid;
                    COLOR: #f80;
                    BORDER-TOP: #f80 1px solid;
                    BORDER-RIGHT: #f80 1px solid;
                    TEXT-DECORATION: underline;
                }

                .pager A:focus {
                    -moz-outline-style: none;
                }

            .pager SPAN {
                BORDER-BOTTOM-STYLE: none;
                TEXT-ALIGN: left;
                PADDING-BOTTOM: 4px;
                LINE-HEIGHT: 26px;
                BORDER-RIGHT-STYLE: none;
                MARGIN: 1px 2px;
                PADDING-LEFT: 6px;
                PADDING-RIGHT: 6px;
                BORDER-TOP-STYLE: none;
                BACKGROUND: #f80;
                COLOR: #fff;
                FONT-SIZE: 12px;
                BORDER-LEFT-STYLE: none;
                PADDING-TOP: 5px;
            }
    </style>
    <style type="text/css">
        #hotwordsUL li {
            float: left;
            margin-left: 150px;
            list-style-type: none;
        }

        #txtKeyword {
            width: 354px;
            margin-left: 0px;
        }
    </style>

    <body>
        <div align="center">
            <img src="~/Content/themes/base/images/lucene-medium.png" />
        </div>
        <br />
        <form class="form-search" align="center" action="/Search/SearchIndex" onsubmit="return CheckInput();">
            <input class="input-medium search-query" id="txtKeyword" name="keyWord" value="@ViewBag.kw" type="text" />
            <button id="searchButton" type="submit" class="btn">查找</button>
            <br />
            <input type="checkbox" @(ViewBag._boolisLike ? "checked=checked":"" ) name="isLike" id="isLike" value="1" /><label for="isLike">是否开启模糊查询</label>
        </form>
        <div id="ajaxData" style="width: 80%">
            @{
                if (Model != null)
                {
                    <div style="margin-top: 20px;">
                        <p>获得约 @ViewBag.count 条结果，用时 @ViewBag.time 秒</p>
                    </div>
                    foreach (var item in Model)
                    {
                        <div style="margin-top: 20px;">
                            <h4><a class="btn" href="/Blogs/Index/@item.Id" target="_blank"> @Html.Raw(item.Title)</a></h4>
                            <p>@Html.Raw(item.Content)</p>
                            <p><a class="btn" href="/Blogs/Index/@item.Id" target="_blank">查看更多 »</a>
                            </p>
                        </div>
                    }
                }
                else
                {
                    <div style="margin-top: 20px;"><h4>没有找到你想要的数据</h4>
                        <p>可以更改关键字试试</p>
                    </div>
                }
            }

        </div>
        @Html.Pager(Model, new PagerOptions
        {
        PageIndexParameterName = "id",
        ShowPageIndexBox = true,
        FirstPageText = "首页",
        PrevPageText = "上一页",
        NextPageText = "下一页",
        LastPageText = "末页",
        PageIndexBoxType = PageIndexBoxType.TextBox,
        PageIndexBoxWrapperFormatString = "请输入页数{0}",
        GoButtonText = "转到"
        })
    </body>
