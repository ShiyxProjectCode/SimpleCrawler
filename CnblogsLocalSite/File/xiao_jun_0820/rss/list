<?xml version="1.0" encoding="utf-8" ?>
<?xml-stylesheet type="text/xsl" title="XSL Formatting" href="/rss.xsl" media="all" ?>
<rss version="2.0">
<channel>
    <title>xiao_jun_0820的专栏</title>
    <image>
    <link>http://blog.csdn.net</link>
    <url>http://static.blog.csdn.net/images/logo.gif</url>
    </image>
    <description></description>
	<link>http://blog.csdn.net/xiao_jun_0820</link>
	<language>zh-cn</language>
	<generator>http://blog.csdn.net</generator>
	<ttl>5</ttl>
	<copyright><![CDATA[Copyright &copy; xiao_jun_0820]]></copyright> 
	<pubDate>2015/9/17 14:30:37</pubDate>
    <item>
        <title><![CDATA[[转]七牛是如何搞定每天500亿条日志的]]></title>
        <link>http://blog.csdn.net/xiao_jun_0820/article/details/47275575</link>
        <guid>http://blog.csdn.net/xiao_jun_0820/article/details/47275575</guid>
        <author>xiao_jun_0820</author>
        <pubDate>2015/8/4 13:39:32</pubDate>
        <description><![CDATA[
            
<h2 class="rich_media_title" id="activity-name" style="margin:0px 0px 14px; padding:0px 0px 10px; font-weight:400; font-size:24px; line-height:1.4; border-bottom-width:1px; border-bottom-style:solid; border-bottom-color:rgb(231,231,235); font-family:'Helvetica Neue',Helvetica,'Hiragino Sans GB','Microsoft YaHei',Arial,sans-serif">
七牛是如何搞定每天500亿条日志的</h2>
<div class="rich_media_meta_list" style="margin:0px 0px 18px; padding:0px; line-height:20px; font-size:0px; position:relative; z-index:1; font-family:'Helvetica Neue',Helvetica,'Hiragino Sans GB','Microsoft YaHei',Arial,sans-serif">
<span id="post-date" class="rich_media_meta rich_media_meta_text" style="margin:0px 8px 10px 0px; padding:0px; display:inline-block; vertical-align:middle; font-size:16px; color:rgb(140,140,140); max-width:none">2015-07-31</span>&nbsp;<span class="rich_media_meta rich_media_meta_text" style="margin:0px 8px 10px 0px; padding:0px; display:inline-block; vertical-align:middle; font-size:16px; color:rgb(140,140,140); max-width:none">CSDN</span>&nbsp;<a target="_blank" class="rich_media_meta rich_media_meta_link rich_media_meta_nickname" id="post-user" style="margin:0px 8px 10px 0px; padding:0px; color:rgb(96,127,166); vertical-align:middle; font-size:16px; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; max-width:none">七牛云存储</a></div>
<div class="rich_media_thumb_wrp" id="media" style="margin:0px; padding:0px; font-family:'Helvetica Neue',Helvetica,'Hiragino Sans GB','Microsoft YaHei',Arial,sans-serif; font-size:16px; line-height:25.6000003814697px">
<img class="rich_media_thumb" id="js_cover" src="http://mmbiz.qpic.cn/mmbiz/v6uP0lGcBZ7Fw60AUuj5JytulbViaxN6U0UyeT7Grwa0jwK2S4ZUNtmPDZza9tj9xtqxfIGiaJmoAK6t0L9qrBXQ/640?wx_fmt=jpeg&amp;tp=webp&amp;wxfrom=5" alt="" style="margin:0px 0px 6px; padding:0px; width:670px; height:auto!important"></div>
<div class="rich_media_content" id="js_content" style="margin:0px; padding:0px; overflow:hidden; color:rgb(62,62,62); position:relative; min-height:350px; font-family:'Helvetica Neue',Helvetica,'Hiragino Sans GB','Microsoft YaHei',Arial,sans-serif; font-size:16px; line-height:25.6000003814697px">
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; max-width:100%; clear:both; min-height:1em; white-space:pre-wrap; line-height:1.5em; word-wrap:break-word!important">
<span style="margin:0px; padding:0px; max-width:100%; font-size:14px; color:rgb(0,176,240); word-wrap:break-word!important">7月30日，七牛数据平台工程师王团结在CSDN Spark微信用户群，与近千名Spark技术开发人员，结合七牛内部使用的数据平台，深入分享了团队是如何利用Flume、Kafka、Spark Streaming等技术搞定每天500亿条日志的，并详细讲解了各个工具使用的注意点。</span><span style="margin:0px; padding:0px; max-width:100%; color:rgb(0,176,240); font-size:14px; line-height:1.5em; word-wrap:break-word!important">王团结，主要负责七牛数据平台的设计研发工作，关注大数据处理和高性能系统服务，对Hadoop、Flume、Kafka、Spark等离线、分布式计算技术十分感兴趣。以下为演讲实录。</span></p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; max-width:100%; clear:both; min-height:1em; white-space:pre-wrap; word-wrap:break-word!important">
<br style="margin:0px; padding:0px; max-width:100%; word-wrap:break-word!important">
</p>
<blockquote style="margin:0px; padding:15px 25px; max-width:100%; word-wrap:break-word; border-left-width:10px; border-left-style:solid; border-left-color:rgb(0,187,236); color:rgb(51,51,51); font-family:微软雅黑; top:0px; line-height:24px; font-size:14px; vertical-align:baseline; background-color:rgb(239,239,239)">
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; max-width:100%; clear:both; min-height:1em; white-space:pre-wrap; word-wrap:break-word!important">
<span style="margin:0px; padding:0px; max-width:100%; font-size:16px; color:rgb(0,176,240); word-wrap:break-word!important"><span style="margin:0px; padding:0px; max-width:100%; word-wrap:break-word!important">概述</span></span></p>
</blockquote>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; max-width:100%; clear:both; min-height:1em; white-space:pre-wrap; word-wrap:break-word!important">
<br style="margin:0px; padding:0px; max-width:100%; word-wrap:break-word!important">
</p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; max-width:100%; clear:both; min-height:1em; white-space:pre-wrap; line-height:1.5em; word-wrap:break-word!important">
<span style="margin:0px; padding:0px; max-width:100%; font-size:14px; color:rgb(0,0,0); word-wrap:break-word!important">数据平台在大部分公司都属于支撑性平台，做的不好立刻会被吐槽，这点和运维部门很像。所以在技术选型上优先考虑现成的工具，快速出成果，没必要去担心有技术负担。早期，我们走过弯路，认为没多少工作量，收集存储和计算都自己研发，发现是吃力不讨好。去年上半年开始，我们全面拥抱开源工具，搭建自己的数据平台。</span></p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; max-width:100%; clear:both; min-height:1em; white-space:pre-wrap; word-wrap:break-word!important">
<br style="margin:0px; padding:0px; max-width:100%; word-wrap:break-word!important">
</p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; max-width:100%; clear:both; min-height:1em; white-space:pre-wrap; line-height:1.5em; word-wrap:break-word!important">
<span style="margin:0px; padding:0px; max-width:100%; font-size:14px; color:rgb(0,0,0); word-wrap:break-word!important">公司的主要数据来源是散落在各个业务服务器上的半结构化日志，比如系统日志、程序日志、访问日志、审计日志等。日志是最原始的数据记录，如果不是日志，肯定会有信息上的丢失。说个简单的例子，需求是统计Nginx上每个域名的的流量，这个完全可以通过一个简单的Nginx模块去完成，但是如果需要统计不同来源的流量就无法做了，所以需要原始的完整的日志。</span></p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; max-width:100%; clear:both; min-height:1em; white-space:pre-wrap; word-wrap:break-word!important">
<br style="margin:0px; padding:0px; max-width:100%; word-wrap:break-word!important">
</p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; max-width:100%; clear:both; min-height:1em; white-space:pre-wrap; line-height:1.5em; word-wrap:break-word!important">
<span style="margin:0px; padding:0px; max-width:100%; font-size:14px; color:rgb(0,0,0); word-wrap:break-word!important">有种手法是业务程序把日志通过网络直接发送出去，但是这并不可取，因为网络和接收端并不完全可靠，当出问题时会对业务造成影响或者日志丢失。因此，对业务侵入最小最自然的方式是把日志落到本地硬盘上。</span></p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; max-width:100%; clear:both; min-height:1em; white-space:pre-wrap; word-wrap:break-word!important">
<br style="margin:0px; padding:0px; max-width:100%; word-wrap:break-word!important">
</p>
<blockquote style="margin:0px; padding:15px 25px; max-width:100%; word-wrap:break-word; border-left-width:10px; border-left-style:solid; border-left-color:rgb(0,187,236); color:rgb(51,51,51); font-family:微软雅黑; top:0px; line-height:24px; font-size:14px; vertical-align:baseline; background-color:rgb(239,239,239)">
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; max-width:100%; clear:both; min-height:1em; white-space:pre-wrap; word-wrap:break-word!important">
<span style="margin:0px; padding:0px; max-width:100%; font-size:16px; color:rgb(0,176,240); word-wrap:break-word!important"><span style="margin:0px; padding:0px; max-width:100%; word-wrap:break-word!important">数据平台设计架构</span></span></p>
</blockquote>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; max-width:100%; clear:both; min-height:1em; white-space:pre-wrap; word-wrap:break-word!important">
<br style="margin:0px; padding:0px; max-width:100%; word-wrap:break-word!important">
</p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; max-width:100%; clear:both; min-height:1em; white-space:pre-wrap; line-height:1.5em; word-wrap:break-word!important">
<span style="margin:0px; padding:0px; max-width:100%; color:rgb(0,176,240); word-wrap:break-word!important"><span style="margin:0px; padding:0px; max-width:100%; word-wrap:break-word!important"><span style="margin:0px; padding:0px; max-width:100%; font-size:14px; word-wrap:break-word!important">Agent设计需求</span></span></span></p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; max-width:100%; clear:both; min-height:1em; white-space:pre-wrap; word-wrap:break-word!important">
<br style="margin:0px; padding:0px; max-width:100%; word-wrap:break-word!important">
</p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; max-width:100%; clear:both; min-height:1em; white-space:pre-wrap; line-height:1.5em; word-wrap:break-word!important">
<span style="margin:0px; padding:0px; max-width:100%; font-size:14px; color:rgb(0,0,0); word-wrap:break-word!important">每台机器上会有一个Agent去同步这些日志，这是个典型的队列模型，业务进程在不断的push，Agent在不停地pop。Agent需要有记忆功能，用来保存同步的位置（offset），这样才尽可能保证数据准确性，但不可能做到完全准确。由于发送数据和保存offset是两个动作，不具有事务性，不可避免的会出现数据不一致性情况，通常是发送成功后保存offset，那么在Agent异常退出或机器断电时可能会造成多余的数据。
 Agent需要足够轻，这主要体现在运维和逻辑两个方面。Agent在每台机器上都会部署，运维成本、接入成本是需要考虑的。Agent不应该有解析日志、过滤、统计等动作，这些逻辑应该给数据消费者。倘若Agent有较多的逻辑，那它是不可完成的，不可避免的经常会有升级变更动作。</span></p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; max-width:100%; clear:both; min-height:1em; white-space:pre-wrap; word-wrap:break-word!important">
<br style="margin:0px; padding:0px; max-width:100%; word-wrap:break-word!important">
</p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; max-width:100%; clear:both; min-height:1em; white-space:pre-wrap; line-height:1.5em; word-wrap:break-word!important">
<span style="margin:0px; padding:0px; max-width:100%; word-wrap:break-word!important"><span style="margin:0px; padding:0px; max-width:100%; font-size:14px; color:rgb(0,176,240); word-wrap:break-word!important">数据收集流程</span></span></p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; max-width:100%; clear:both; min-height:1em; white-space:pre-wrap; word-wrap:break-word!important">
<br style="margin:0px; padding:0px; max-width:100%; word-wrap:break-word!important">
</p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; max-width:100%; clear:both; min-height:1em; white-space:pre-wrap; line-height:1.5em; word-wrap:break-word!important">
<span style="margin:0px; padding:0px; max-width:100%; font-size:14px; color:rgb(0,0,0); word-wrap:break-word!important">数据收集这块的技术选择，Agent是用Go自己研发的，消息中间件Kafka，数据传输工具Flume。说到数据收集经常有人拿Flume和Kafka做比较，我看来这两者定位是不同的，Flume更倾向于数据传输本身，Kakfa是典型的消息中间件用于解耦生产者消费者。</span></p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; max-width:100%; clear:both; min-height:1em; white-space:pre-wrap; word-wrap:break-word!important">
<br style="margin:0px; padding:0px; max-width:100%; word-wrap:break-word!important">
</p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; max-width:100%; clear:both; min-height:1em; white-space:pre-wrap; line-height:1.5em; word-wrap:break-word!important">
<span style="margin:0px; padding:0px; max-width:100%; font-size:14px; color:rgb(0,0,0); word-wrap:break-word!important">具体架构上，Agent并没把数据直接发送到Kafka，在Kafka前面有层由Flume构成的forward。这样做有两个原因：</span></p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; max-width:100%; clear:both; min-height:1em; white-space:pre-wrap; word-wrap:break-word!important">
<br style="margin:0px; padding:0px; max-width:100%; word-wrap:break-word!important">
</p>
<ul class=" list-paddingleft-2" style="margin:0px; padding:0px 0px 0px 30px; max-width:100%; word-wrap:break-word!important">
<li style="margin:0px; padding:0px; max-width:100%; word-wrap:break-word!important">
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; max-width:100%; clear:both; min-height:1em; white-space:pre-wrap; line-height:1.5em; word-wrap:break-word!important">
<span style="margin:0px; padding:0px; max-width:100%; font-size:14px; color:rgb(0,0,0); word-wrap:break-word!important">Kafka的API对非JVM系的语言支持很不友好，forward对外提供更加通用的HTTP接口。</span></p>
</li><li style="margin:0px; padding:0px; max-width:100%; word-wrap:break-word!important">
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; max-width:100%; clear:both; min-height:1em; white-space:pre-wrap; line-height:1.5em; word-wrap:break-word!important">
<span style="margin:0px; padding:0px; max-width:100%; font-size:14px; color:rgb(0,0,0); word-wrap:break-word!important">forward层可以做路由、Kafka topic和Kafka partition key等逻辑，进一步减少Agent端的逻辑。</span></p>
</li></ul>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; max-width:100%; clear:both; min-height:1em; white-space:pre-wrap; word-wrap:break-word!important">
<br style="margin:0px; padding:0px; max-width:100%; word-wrap:break-word!important">
</p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; max-width:100%; clear:both; min-height:1em; white-space:pre-wrap; line-height:1.5em; word-wrap:break-word!important">
<span style="margin:0px; padding:0px; max-width:100%; font-size:14px; color:rgb(0,0,0); word-wrap:break-word!important">forward层不含状态，完全可以做到水平扩展，不用担心成为瓶颈。出于高可用考虑，forward通常不止一个实例，这会带来日志顺序问题，Agent按一定规则（round-robin、failover等）来选择forward实例，即使Kafka partition key一样，由于forward层的存在，最终落入Kafka的数据顺序和Agent发送的顺序可能会不一样。我们对乱序是容忍的，因为产生日志的业务基本是分布式的，保证单台机器的日志顺序意义不大。如果业务对顺序性有要求，那得把数据直接发到Kafka，并选择好partition
 key，Kafka只能保证partition级的顺序性。</span></p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; max-width:100%; clear:both; min-height:1em; white-space:pre-wrap; word-wrap:break-word!important">
<br style="margin:0px; padding:0px; max-width:100%; word-wrap:break-word!important">
</p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; max-width:100%; clear:both; min-height:1em; white-space:pre-wrap; line-height:1.5em; word-wrap:break-word!important">
<span style="margin:0px; padding:0px; max-width:100%; font-size:14px; color:rgb(0,0,0); word-wrap:break-word!important">多机房的情形，通过上述流程，先把数据汇到本地机房Kafka集群，然后汇聚到核心机房的Kafka，最终供消费者使用。由于Kafka的mirror对网络不友好，这里我们选择更加的简单的Flume去完成跨机房的数据传送。</span></p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; max-width:100%; clear:both; min-height:1em; white-space:pre-wrap; word-wrap:break-word!important">
<br style="margin:0px; padding:0px; max-width:100%; word-wrap:break-word!important">
</p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; max-width:100%; clear:both; min-height:1em; white-space:pre-wrap; line-height:1.5em; word-wrap:break-word!important">
<span style="margin:0px; padding:0px; max-width:100%; color:rgb(0,176,240); word-wrap:break-word!important"><span style="margin:0px; padding:0px; max-width:100%; word-wrap:break-word!important"><span style="margin:0px; padding:0px; max-width:100%; font-size:14px; word-wrap:break-word!important">Flume使用要点</span></span></span></p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; max-width:100%; clear:both; min-height:1em; white-space:pre-wrap; word-wrap:break-word!important">
<br style="margin:0px; padding:0px; max-width:100%; word-wrap:break-word!important">
</p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; max-width:100%; clear:both; min-height:1em; white-space:pre-wrap; line-height:1.5em; word-wrap:break-word!important">
<span style="margin:0px; padding:0px; max-width:100%; font-size:14px; color:rgb(0,0,0); word-wrap:break-word!important">Flume在不同的数据源传输数据还是比较灵活的，但有以下几个点需要注意。</span></p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; max-width:100%; clear:both; min-height:1em; white-space:pre-wrap; word-wrap:break-word!important">
<br style="margin:0px; padding:0px; max-width:100%; word-wrap:break-word!important">
</p>
<ul class=" list-paddingleft-2" style="margin:0px; padding:0px 0px 0px 30px; max-width:100%; word-wrap:break-word!important">
<li style="margin:0px; padding:0px; max-width:100%; word-wrap:break-word!important">
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; max-width:100%; clear:both; min-height:1em; white-space:pre-wrap; line-height:1.5em; word-wrap:break-word!important">
<span style="margin:0px; padding:0px; max-width:100%; font-size:14px; color:rgb(0,0,0); word-wrap:break-word!important">memory-channel效率高但可能有丢数据的风险，file-channel安全性高但性能不高。我们是用memory-channel，但把capacity设置的足够小，使内存中的数据尽可能少，在意外重启和断电时丢的数据很少。个人比较排斥file-channel，效率是一方面，另一个是对Flume的期望是数据传输，引入file-channel时，它的角色会向存储转变，这在整个流程中是不合适的。通常Flume的sink端是Kafka和HDFS这种可用性和扩张性比较好的系统，不用担心数据拥堵问题。</span></p>
</li><li style="margin:0px; padding:0px; max-width:100%; word-wrap:break-word!important">
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; max-width:100%; clear:both; min-height:1em; white-space:pre-wrap; line-height:1.5em; word-wrap:break-word!important">
<span style="margin:0px; padding:0px; max-width:100%; font-size:14px; color:rgb(0,0,0); word-wrap:break-word!important">默认的HTTP source没有设置线程池，有性能问题，如果有用到，需要修改代码。</span></p>
</li><li style="margin:0px; padding:0px; max-width:100%; word-wrap:break-word!important">
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; max-width:100%; clear:both; min-height:1em; white-space:pre-wrap; line-height:1.5em; word-wrap:break-word!important">
<span style="margin:0px; padding:0px; max-width:100%; font-size:14px; color:rgb(0,0,0); word-wrap:break-word!important">单sink速度跟不上时，需要多个sink。像跨机房数据传输网络延迟高单rpc sink吞吐上不去和HDFS sink效率不高情形，我们在一个channel后会配十多个sink。</span></p>
</li></ul>
<h4 style="margin:0px; padding:0px; font-weight:400; max-width:100%; word-wrap:break-word!important">
<span style="margin:0px; padding:0px; max-width:100%; font-size:14px; line-height:1.5em; word-wrap:break-word!important"></span></h4>
<h4 style="margin:0px; padding:0px; font-weight:400; max-width:100%; word-wrap:break-word!important">
<br style="margin:0px; padding:0px; max-width:100%; word-wrap:break-word!important">
</h4>
<h4 style="margin:0px; padding:0px; font-weight:400; max-width:100%; word-wrap:break-word!important">
<span style="margin:0px; padding:0px; max-width:100%; color:rgb(0,176,240); word-wrap:break-word!important"><span style="margin:0px; padding:0px; max-width:100%; word-wrap:break-word!important"><span style="margin:0px; padding:0px; max-width:100%; font-size:14px; line-height:1.5em; word-wrap:break-word!important">Kafka使用要点</span></span></span></h4>
<h4 style="margin:0px; padding:0px; font-weight:400; max-width:100%; word-wrap:break-word!important">
<span style="margin:0px; padding:0px; max-width:100%; font-size:14px; line-height:1.5em; word-wrap:break-word!important"></span></h4>
<h4 style="margin:0px; padding:0px; font-weight:400; max-width:100%; word-wrap:break-word!important">
<br style="margin:0px; padding:0px; max-width:100%; word-wrap:break-word!important">
</h4>
<h4 style="margin:0px; padding:0px; font-weight:400; max-width:100%; word-wrap:break-word!important">
<span style="margin:0px; padding:0px; max-width:100%; font-size:14px; color:rgb(0,0,0); word-wrap:break-word!important">Kafka在性能和扩展性很不错，以下几个点需要注意下。</span></h4>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; max-width:100%; clear:both; min-height:1em; white-space:pre-wrap; word-wrap:break-word!important">
<br style="margin:0px; padding:0px; max-width:100%; word-wrap:break-word!important">
</p>
<ul class=" list-paddingleft-2" style="margin:0px; padding:0px 0px 0px 30px; max-width:100%; word-wrap:break-word!important">
<li style="margin:0px; padding:0px; max-width:100%; word-wrap:break-word!important">
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; max-width:100%; clear:both; min-height:1em; white-space:pre-wrap; line-height:1.5em; word-wrap:break-word!important">
<span style="margin:0px; padding:0px; max-width:100%; font-size:14px; color:rgb(0,0,0); word-wrap:break-word!important">topic的划分，大topic对生产者有利且维护成本低，小topic对消费者比较友好。如果是完全不相关的相关数据源且topic数不是发散的，优先考虑分topic。</span></p>
</li><li style="margin:0px; padding:0px; max-width:100%; word-wrap:break-word!important">
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; max-width:100%; clear:both; min-height:1em; white-space:pre-wrap; line-height:1.5em; word-wrap:break-word!important">
<span style="margin:0px; padding:0px; max-width:100%; font-size:14px; color:rgb(0,0,0); word-wrap:break-word!important">Kafka的并行单位是partition，partition数目直接关系整体的吞吐量，但parition数并不是越大越高，3个partition就能吃满一块普通硬盘IO了。所以partition数是由数据规模决定，最终还是需要硬盘来抗。</span></p>
</li><li style="margin:0px; padding:0px; max-width:100%; word-wrap:break-word!important">
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; max-width:100%; clear:both; min-height:1em; white-space:pre-wrap; line-height:1.5em; word-wrap:break-word!important">
<span style="margin:0px; padding:0px; max-width:100%; font-size:14px; color:rgb(0,0,0); word-wrap:break-word!important">partition key选择不当，可能会造成数据倾斜。在对数据有顺序性要求才需使用partition key。Kafka的producer sdk在没指定partition key时，在一定时间内只会往一个partition写数据，这种情况下当producer数少于partition数也会造成数据倾斜，可以提高producer数目来解决这个问题。</span></p>
</li></ul>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; max-width:100%; clear:both; min-height:1em; white-space:pre-wrap; word-wrap:break-word!important">
<br style="margin:0px; padding:0px; max-width:100%; word-wrap:break-word!important">
</p>
<h4 style="margin:0px; padding:0px; font-weight:400; max-width:100%; word-wrap:break-word!important">
<span style="margin:0px; padding:0px; max-width:100%; font-size:14px; color:rgb(0,176,240); word-wrap:break-word!important"><span style="margin:0px; padding:0px; max-width:100%; word-wrap:break-word!important">数据离线和实时计算</span></span></h4>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; max-width:100%; clear:both; min-height:1em; white-space:pre-wrap; word-wrap:break-word!important">
<br style="margin:0px; padding:0px; max-width:100%; word-wrap:break-word!important">
</p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; max-width:100%; clear:both; min-height:1em; white-space:pre-wrap; line-height:1.5em; word-wrap:break-word!important">
<span style="margin:0px; padding:0px; max-width:100%; font-size:14px; color:rgb(0,0,0); word-wrap:break-word!important">数据到Kafka后，一路数据同步到HDFS，用于离线统计，另一路用于实时计算。由于今天时间有限，接下来只能和大家分享下实时计算的一些经验。</span></p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; max-width:100%; clear:both; min-height:1em; white-space:pre-wrap; word-wrap:break-word!important">
<br style="margin:0px; padding:0px; max-width:100%; word-wrap:break-word!important">
</p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; max-width:100%; clear:both; min-height:1em; white-space:pre-wrap; line-height:1.5em; word-wrap:break-word!important">
<span style="margin:0px; padding:0px; max-width:100%; font-size:14px; color:rgb(0,0,0); word-wrap:break-word!important">实时计算选择的是Spark Streaming。目前只有统计需求，没迭代计算的需求，Spark Streaming使用比较保守。从Kakfa读数据统计完存入MongoDB中，中间状态数据很少，好处是系统吞吐量很大，但没遇到内存相关问题。</span></p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; max-width:100%; clear:both; min-height:1em; white-space:pre-wrap; word-wrap:break-word!important">
<br style="margin:0px; padding:0px; max-width:100%; word-wrap:break-word!important">
</p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; max-width:100%; clear:both; min-height:1em; white-space:pre-wrap; line-height:1.5em; word-wrap:break-word!important">
<span style="margin:0px; padding:0px; max-width:100%; font-size:14px; color:rgb(0,0,0); word-wrap:break-word!important">Spark Streaming对保存计算结果的数据库TPS要求较高。假如有10w个域名需要统计流量，batch interval为10s，每个域名有4个相关统计项，算下来平均是4w TPS，这只是平均&#20540;，实际峰&#20540;更高，固态硬盘上的MongoDB也只能抗1w TPS，后续我们会考虑用Redis来抗这么高的TPS。</span></p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; max-width:100%; clear:both; min-height:1em; white-space:pre-wrap; word-wrap:break-word!important">
<br style="margin:0px; padding:0px; max-width:100%; word-wrap:break-word!important">
</p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; max-width:100%; clear:both; min-height:1em; white-space:pre-wrap; line-height:1.5em; word-wrap:break-word!important">
<span style="margin:0px; padding:0px; max-width:100%; font-size:14px; color:rgb(0,0,0); word-wrap:break-word!important">当开启speculation参数或代码层面没处理好异常时，task可能会被重放。但是有外部状态的task是不可重入的，否则会造成计算结果的不准确。说个简单的例子，如下：</span></p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; max-width:100%; clear:both; min-height:1em; white-space:pre-wrap; word-wrap:break-word!important">
<br style="margin:0px; padding:0px; max-width:100%; word-wrap:break-word!important">
</p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; max-width:100%; clear:both; min-height:1em; white-space:pre-wrap; line-height:1.5em; word-wrap:break-word!important">
<img src="http://mmbiz.qpic.cn/mmbiz/v6uP0lGcBZ7Fw60AUuj5JytulbViaxN6UdHfdcScjv8dP0fatECf4xXwbh0Zic9thySH2ibYsCgVDjJ4icuqBZY5Fw/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1" alt="" style="margin:0px; padding:0px; max-width:100%; height:auto!important; word-wrap:break-word!important; width:auto!important; visibility:visible!important"><br style="margin:0px; padding:0px; max-width:100%; word-wrap:break-word!important">
</p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; max-width:100%; clear:both; min-height:1em; white-space:pre-wrap; word-wrap:break-word!important">
<br style="margin:0px; padding:0px; max-width:100%; word-wrap:break-word!important">
</p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; max-width:100%; clear:both; min-height:1em; white-space:pre-wrap; line-height:1.5em; word-wrap:break-word!important">
<span style="margin:0px; padding:0px; max-width:100%; color:rgb(0,0,0); word-wrap:break-word!important"><span style="margin:0px; padding:0px; max-width:100%; font-size:14px; word-wrap:break-word!important">这个任务，如果被重放了，会造成落入MongoD</span><span style="margin:0px; padding:0px; max-width:100%; font-size:14px; line-height:1.5em; word-wrap:break-word!important">B的结果比实际多。</span></span></p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; max-width:100%; clear:both; min-height:1em; white-space:pre-wrap; word-wrap:break-word!important">
<br style="margin:0px; padding:0px; max-width:100%; word-wrap:break-word!important">
</p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; max-width:100%; clear:both; min-height:1em; white-space:pre-wrap; line-height:1.5em; word-wrap:break-word!important">
<span style="margin:0px; padding:0px; max-width:100%; font-size:14px; color:rgb(0,0,0); word-wrap:break-word!important">有些对象会包含状态，这些状态的生成需要较大的代价，不能做到在每次使用时都去new一个。我们对这种对象的处理策略是JVM内一个对象，同时在代码层面做好并发控制。类&#20284;下面：</span></p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; max-width:100%; clear:both; min-height:1em; white-space:pre-wrap; line-height:1.5em; word-wrap:break-word!important">
<span style="margin:0px; padding:0px; max-width:100%; font-size:14px; color:rgb(0,0,0); word-wrap:break-word!important"></span></p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; max-width:100%; clear:both; min-height:1em; white-space:pre-wrap; line-height:1.5em; word-wrap:break-word!important">
<img src="http://mmbiz.qpic.cn/mmbiz/v6uP0lGcBZ7Fw60AUuj5JytulbViaxN6UhBrib331jonUuNZqPGDDT8SpU7xScKSyVoibB1yAOWqKkzPoSU8Iu5Ag/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1" alt="" style="margin:0px; padding:0px; max-width:100%; height:auto!important; word-wrap:break-word!important; width:auto!important; visibility:visible!important"><br style="margin:0px; padding:0px; max-width:100%; word-wrap:break-word!important">
</p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; max-width:100%; clear:both; min-height:1em; white-space:pre-wrap; word-wrap:break-word!important">
<br style="margin:0px; padding:0px; max-width:100%; word-wrap:break-word!important">
</p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; max-width:100%; clear:both; min-height:1em; white-space:pre-wrap; line-height:1.5em; word-wrap:break-word!important">
<span style="margin:0px; padding:0px; max-width:100%; font-size:14px; color:rgb(0,0,0); word-wrap:break-word!important">如果这种使用形式有性能问题，可以考虑实现一个pool来管理。</span></p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; max-width:100%; clear:both; min-height:1em; white-space:pre-wrap; word-wrap:break-word!important">
<br style="margin:0px; padding:0px; max-width:100%; word-wrap:break-word!important">
</p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; max-width:100%; clear:both; min-height:1em; white-space:pre-wrap; line-height:1.5em; word-wrap:break-word!important">
<span style="margin:0px; padding:0px; max-width:100%; font-size:14px; color:rgb(0,0,0); word-wrap:break-word!important">在Spark1.3的后版本，streaming为Kafka引入了新的Direct API试图解决数据准确性问题。Direct API把Kafka consumer offset的管理暴露出来（旧版本是异步存入Zookeeper），让使用者透明的管理consumer offset，这在一定程度上能缓解准确性问题，但不可避免还会有一致性问题。为什么这样说呢？只有计算结果和offset两者的保存具有事务性，才能完全准确。这个事务有两种手段做到，一种是用Mysql这种支持事务的数据库，把计算结果和offset的保存放在一个事务里，另一种是自己实现两阶段提交。Direct
 API 还会有性能问题，因为它到计算的时候才实际从Kafka读数据，这对整体吞吐有很大影响。</span></p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; max-width:100%; clear:both; min-height:1em; white-space:pre-wrap; word-wrap:break-word!important">
<br style="margin:0px; padding:0px; max-width:100%; word-wrap:break-word!important">
</p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; max-width:100%; clear:both; min-height:1em; white-space:pre-wrap; line-height:1.5em; word-wrap:break-word!important">
<span style="margin:0px; padding:0px; max-width:100%; word-wrap:break-word!important"><span style="margin:0px; padding:0px; max-width:100%; color:rgb(0,176,240); font-size:14px; line-height:1.5em; word-wrap:break-word!important">七牛数据平台规模</span></span></p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; max-width:100%; clear:both; min-height:1em; white-space:pre-wrap; word-wrap:break-word!important">
<br style="margin:0px; padding:0px; max-width:100%; word-wrap:break-word!important">
</p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; max-width:100%; clear:both; min-height:1em; white-space:pre-wrap; line-height:1.5em; word-wrap:break-word!important">
<span style="margin:0px; padding:0px; max-width:100%; font-size:14px; line-height:1.5em; color:rgb(0,0,0); word-wrap:break-word!important">要分享的就这些了，最后秀下实时计算这边规模：Flume＋Kafka＋Spark 混部在8台高配机器，日均500亿条数据，峰&#20540;80w TPS。</span></p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; max-width:100%; clear:both; min-height:1em; white-space:pre-wrap; word-wrap:break-word!important">
<br style="margin:0px; padding:0px; max-width:100%; word-wrap:break-word!important">
</p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; max-width:100%; clear:both; min-height:1em; white-space:pre-wrap; line-height:1.5em; word-wrap:break-word!important">
<img src="http://mmbiz.qpic.cn/mmbiz/v6uP0lGcBZ7Fw60AUuj5JytulbViaxN6Uy1XRgGmaZfB0U2UZ9Tia8FAjnH2sh4GdHPWH29GEDkxHJUfACGVG0bQ/640?wx_fmt=jpeg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1" alt="" style="margin:0px; padding:0px; max-width:100%; height:auto!important; word-wrap:break-word!important; width:auto!important; visibility:visible!important"><br style="margin:0px; padding:0px; max-width:100%; word-wrap:break-word!important">
</p>
</div>
<div class="rich_media_tool" id="js_toobar2" style="margin:0px; padding:15px 0px 0px; overflow:hidden; line-height:32px; font-family:'Helvetica Neue',Helvetica,'Hiragino Sans GB','Microsoft YaHei',Arial,sans-serif; font-size:16px">
</div>

            <div>
                作者：xiao_jun_0820 发表于2015/8/4 13:39:32 <a href="http://blog.csdn.net/xiao_jun_0820/article/details/47275575">原文链接</a>
            </div>
            <div>
            阅读：163 评论：0 <a href="http://blog.csdn.net/xiao_jun_0820/article/details/47275575#comments" target="_blank">查看评论</a>
            </div>
        ]]>
        </description>
        <category></category>
    </item>
    <item>
        <title><![CDATA[[转]Akka角色---容错]]></title>
        <link>http://blog.csdn.net/xiao_jun_0820/article/details/47254753</link>
        <guid>http://blog.csdn.net/xiao_jun_0820/article/details/47254753</guid>
        <author>xiao_jun_0820</author>
        <pubDate>2015/8/3 13:15:43</pubDate>
        <description><![CDATA[
            
<p>转：http://blog.csdn.net/zjw10wei321/article/details/46911825</p>
<p><br>
</p>
<p></p>
<p style="margin-top:0px; margin-bottom:1.1em; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:'microsoft yahei'; font-size:14px; line-height:35px">
版本：2.3.12，<span style="">原文地址:</span>&nbsp;<a target="_blank" href="http://blog.csdn.net/zjw10wei321/article/details/%5bhttp://doc.akka.io/docs/akka/2.3.12/java/fault-tolerance.html%5d" style="text-decoration:none; color:rgb(12,137,207)">这是原文地址链接</a></p>
<hr style="margin:2em 0px; border-right-width:0px; border-bottom-width:0px; border-left-width:0px; border-top-style:solid; color:rgb(85,85,85); font-family:'microsoft yahei'; font-size:14px; line-height:35px">
<p style="margin-top:0px; margin-bottom:1.1em; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:'microsoft yahei'; font-size:14px; line-height:35px">
</p>
<div class="toc" style="color:rgb(85,85,85); font-family:'microsoft yahei'; font-size:14px; line-height:35px">
<div class="toc" style="">
<ul style="">
<li style="">
<ul style="">
<li style=""><a target="_blank" href="http://blog.csdn.net/zjw10wei321/article/details/46911825#容错" style="text-decoration:none; color:rgb(12,137,207)">容错</a></li><li style=""><a target="_blank" href="http://blog.csdn.net/zjw10wei321/article/details/46911825#实际中的故障处理" style="text-decoration:none; color:rgb(12,137,207)">实际中的故障处理</a>
<ul style="">
<li style=""><a target="_blank" href="http://blog.csdn.net/zjw10wei321/article/details/46911825#容错案例图解" style="text-decoration:none; color:rgb(12,137,207)">容错案例图解</a></li><li style=""><a target="_blank" href="http://blog.csdn.net/zjw10wei321/article/details/46911825#容错案例所有源码" style="text-decoration:none; color:rgb(12,137,207)">容错案例所有源码</a></li></ul>
</li><li style=""><a target="_blank" href="http://blog.csdn.net/zjw10wei321/article/details/46911825#创建新的监管策略" style="text-decoration:none; color:rgb(12,137,207)">创建新的监管策略</a>
<ul style="">
<li style=""><a target="_blank" href="http://blog.csdn.net/zjw10wei321/article/details/46911825#默认监管策略" style="text-decoration:none; color:rgb(12,137,207)">默认监管策略</a></li><li style=""><a target="_blank" href="http://blog.csdn.net/zjw10wei321/article/details/46911825#停止监管策略" style="text-decoration:none; color:rgb(12,137,207)">停止监管策略</a></li><li style=""><a target="_blank" href="http://blog.csdn.net/zjw10wei321/article/details/46911825#记录actor失败的消息" style="text-decoration:none; color:rgb(12,137,207)">记录actor失败的消息</a></li></ul>
</li><li style=""><a target="_blank" href="http://blog.csdn.net/zjw10wei321/article/details/46911825#顶层角色的监管" style="text-decoration:none; color:rgb(12,137,207)">顶层角色的监管</a></li><li style=""><a target="_blank" href="http://blog.csdn.net/zjw10wei321/article/details/46911825#应用测试" style="text-decoration:none; color:rgb(12,137,207)">应用测试</a></li></ul>
</li></ul>
</div>
</div>
<p style="margin-top:0px; margin-bottom:1.1em; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:'microsoft yahei'; font-size:14px; line-height:35px">
</p>
<h2 id="容错" style="margin:0.8em 0px; padding:0px; font-weight:100; color:rgb(85,85,85); font-family:'microsoft yahei'; line-height:35px">
<a target="_blank" name="t0" style="color:rgb(12,137,207)"></a>容错</h2>
<p style="margin-top:0px; margin-bottom:1.1em; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:'microsoft yahei'; font-size:14px; line-height:35px">
正如角色系统所描述的，每个actor都是其子actor的监管者，并且每个actor都定义了故障处理监管策略。这个策略作为角色系统结构的一部分，一经创建后就不能再修改。</p>
<h2 id="实际中的故障处理" style="margin:0.8em 0px; padding:0px; font-weight:100; color:rgb(85,85,85); font-family:'microsoft yahei'; line-height:35px">
<a target="_blank" name="t1" style="color:rgb(12,137,207)"></a>实际中的故障处理</h2>
<p style="margin-top:0px; margin-bottom:1.1em; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:'microsoft yahei'; font-size:14px; line-height:35px">
首先我们看一个在实际应用中典型故障的案例，演示处理数据存储错误的一种方法。当然这取决于实际的应用中，当存储数据失败时可以做些什么，但在本例中我们使用尽量重新连接的方法。&nbsp;<br style="">
阅读下面的源代码。代码内部的注释解释了各个片段的故障处理以及为什么添加它们。强烈推荐运行这个示例，因为很容易就顺着日志的输出，理解在运行时发生了什么。</p>
<h3 id="容错案例图解" style="margin:0.8em 0px; padding:0px; font-weight:100; color:rgb(85,85,85); font-family:'microsoft yahei'; line-height:35px">
<a target="_blank" name="t2" style="color:rgb(12,137,207)"></a>容错案例图解</h3>
<p style="margin-top:0px; margin-bottom:1.1em; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:'microsoft yahei'; font-size:14px; line-height:35px">
<img src="http://img.blog.csdn.net/20150716152511763" alt="这里写图片描述" title="" style="border:none; max-width:602px; height:auto">&nbsp;<br style="">
上图阐述了正常消息流。&nbsp;<br style="">
常规流程：</p>
<table style="width:948px; border-collapse:collapse; border-spacing:0px; border:1px solid rgb(238,238,238); color:rgb(85,85,85); font-family:'microsoft yahei'; font-size:14px; line-height:35px">
<thead style="">
<tr style="">
<th align="left" style="padding:8px; line-height:20px; vertical-align:top; border:1px solid rgb(238,238,238)">
步骤</th>
<th align="left" style="padding:8px; line-height:20px; vertical-align:top; border:1px solid rgb(238,238,238)">
描述</th>
</tr>
</thead>
<tbody style="">
<tr style="">
<td align="left" style="padding:8px; line-height:20px; vertical-align:top; border:1px solid rgb(238,238,238)">
1</td>
<td align="left" style="padding:8px; line-height:20px; vertical-align:top; border:1px solid rgb(238,238,238)">
Listener开始干活。</td>
</tr>
<tr style="">
<td align="left" style="padding:8px; line-height:20px; vertical-align:top; border:1px solid rgb(238,238,238)">
2</td>
<td align="left" style="padding:8px; line-height:20px; vertical-align:top; border:1px solid rgb(238,238,238)">
Worker定期的向自己发送Do信息来安排工作。</td>
</tr>
<tr style="">
<td align="left" style="padding:8px; line-height:20px; vertical-align:top; border:1px solid rgb(238,238,238)">
3,4,5</td>
<td align="left" style="padding:8px; line-height:20px; vertical-align:top; border:1px solid rgb(238,238,238)">
当Worker收到Do信息后，向CounterService发送3条Increment信息去增加计数器。CounterService将Increment信息转发给Counter，由Counter更新计数器变量，并将计数器当前&#20540;发送给Storage。</td>
</tr>
<tr style="">
<td align="left" style="padding:8px; line-height:20px; vertical-align:top; border:1px solid rgb(238,238,238)">
6,7</td>
<td align="left" style="padding:8px; line-height:20px; vertical-align:top; border:1px solid rgb(238,238,238)">
Worker 请求CounterService获取当前计数器的&#20540;，并将结果返回给Listener。</td>
</tr>
</tbody>
</table>
<p style="margin-top:0px; margin-bottom:1.1em; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:'microsoft yahei'; font-size:14px; line-height:35px">
<img src="http://img.blog.csdn.net/20150716154711410" alt="这里写图片描述" title="" style="border:none; max-width:602px; height:auto"></p>
<p style="margin-top:0px; margin-bottom:1.1em; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:'microsoft yahei'; font-size:14px; line-height:35px">
上图阐述了在存储失败时发生了什么&nbsp;<br style="">
失败流程：</p>
<table style="width:948px; border-collapse:collapse; border-spacing:0px; border:1px solid rgb(238,238,238); color:rgb(85,85,85); font-family:'microsoft yahei'; font-size:14px; line-height:35px">
<thead style="">
<tr style="">
<th align="left" style="padding:8px; line-height:20px; vertical-align:top; border:1px solid rgb(238,238,238)">
步骤</th>
<th align="left" style="padding:8px; line-height:20px; vertical-align:top; border:1px solid rgb(238,238,238)">
描述</th>
</tr>
</thead>
<tbody style="">
<tr style="">
<td align="left" style="padding:8px; line-height:20px; vertical-align:top; border:1px solid rgb(238,238,238)">
1</td>
<td align="left" style="padding:8px; line-height:20px; vertical-align:top; border:1px solid rgb(238,238,238)">
Storage抛出StorageException。</td>
</tr>
<tr style="">
<td align="left" style="padding:8px; line-height:20px; vertical-align:top; border:1px solid rgb(238,238,238)">
2</td>
<td align="left" style="padding:8px; line-height:20px; vertical-align:top; border:1px solid rgb(238,238,238)">
CounterService是Storage的监管者，当StorageException被抛出时并重启Storage。</td>
</tr>
<tr style="">
<td align="left" style="padding:8px; line-height:20px; vertical-align:top; border:1px solid rgb(238,238,238)">
3,4,5,6</td>
<td align="left" style="padding:8px; line-height:20px; vertical-align:top; border:1px solid rgb(238,238,238)">
Storage继续失败，继续被重启。</td>
</tr>
<tr style="">
<td align="left" style="padding:8px; line-height:20px; vertical-align:top; border:1px solid rgb(238,238,238)">
7</td>
<td align="left" style="padding:8px; line-height:20px; vertical-align:top; border:1px solid rgb(238,238,238)">
Storage在5秒内经历3次失败和重启后，会被其监管者(CounterService)停止。</td>
</tr>
<tr style="">
<td align="left" style="padding:8px; line-height:20px; vertical-align:top; border:1px solid rgb(238,238,238)">
8</td>
<td align="left" style="padding:8px; line-height:20px; vertical-align:top; border:1px solid rgb(238,238,238)">
CounterService同样在监视Storage为其终止，在当Storage终止时，接收到Terminated消息。</td>
</tr>
<tr style="">
<td align="left" style="padding:8px; line-height:20px; vertical-align:top; border:1px solid rgb(238,238,238)">
9,10,11</td>
<td align="left" style="padding:8px; line-height:20px; vertical-align:top; border:1px solid rgb(238,238,238)">
CounterService这时告诉Counter没有Storage。</td>
</tr>
<tr style="">
<td align="left" style="padding:8px; line-height:20px; vertical-align:top; border:1px solid rgb(238,238,238)">
12</td>
<td align="left" style="padding:8px; line-height:20px; vertical-align:top; border:1px solid rgb(238,238,238)">
CounterService计划发送一个Reconnect消息给自己。</td>
</tr>
<tr style="">
<td align="left" style="padding:8px; line-height:20px; vertical-align:top; border:1px solid rgb(238,238,238)">
13,14</td>
<td align="left" style="padding:8px; line-height:20px; vertical-align:top; border:1px solid rgb(238,238,238)">
当CounterService接受到Reconnect消息后创建一个新的Storage。</td>
</tr>
<tr style="">
<td align="left" style="padding:8px; line-height:20px; vertical-align:top; border:1px solid rgb(238,238,238)">
15,16</td>
<td align="left" style="padding:8px; line-height:20px; vertical-align:top; border:1px solid rgb(238,238,238)">
CounterService告诉Counter用这个新的Storage。</td>
</tr>
</tbody>
</table>
<h3 id="容错案例所有源码" style="margin:0.8em 0px; padding:0px; font-weight:100; color:rgb(85,85,85); font-family:'microsoft yahei'; line-height:35px">
<a target="_blank" name="t3" style="color:rgb(12,137,207)"></a>容错案例所有源码</h3>
<p style="margin-top:0px; margin-bottom:1.1em; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:'microsoft yahei'; font-size:14px; line-height:35px">
这里就不列出了，详细请看<a target="_blank" href="https://github.com/DamonChow/AkkaDemo/blob/master/src/main/java/com/damon/actor/faultToleranceTest/FaultHandlingDocSample.java" style="text-decoration:none; color:rgb(12,137,207)">我的github</a></p>
<h2 id="创建新的监管策略" style="margin:0.8em 0px; padding:0px; font-weight:100; color:rgb(85,85,85); font-family:'microsoft yahei'; line-height:35px">
<a target="_blank" name="t4" style="color:rgb(12,137,207)"></a>创建新的监管策略</h2>
<p style="margin-top:0px; margin-bottom:1.1em; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:'microsoft yahei'; font-size:14px; line-height:35px">
下面的章节将说明故障处理的原理以及更深层的替代。&nbsp;<br style="">
为了达到示范的效果，我们假使有如下的策略：</p>
<pre class="prettyprint" name="code" style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; margin-top: 0px; margin-bottom: 1.1em; font-family: 'Source Code Pro', monospace; padding: 5px 5px 5px 60px; font-size: 14px; line-height: 1.45; word-break: break-all; color: rgb(51, 51, 51); border: 1px solid rgba(128, 128, 128, 0.0745098); border-radius: 0px; position: relative; overflow-y: hidden; overflow-x: auto; background-color: rgba(128, 128, 128, 0.0470588);">&lt;code class=&quot;hljs java has-numbering&quot; style=&quot;display: block; padding: 0px; color: inherit; box-sizing: border-box; font-family: &#39;Source Code Pro&#39;, monospace;font-size:undefined; white-space: pre; border-radius: 0px; word-wrap: normal; background: transparent;&quot;&gt;&lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;static&lt;/span&gt; SupervisorStrategy strategy =
  &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;new&lt;/span&gt; OneForOneStrategy(&lt;span class=&quot;hljs-number&quot; style=&quot;color: rgb(0, 102, 102); box-sizing: border-box;&quot;&gt;10&lt;/span&gt;, Duration.create(&lt;span class=&quot;hljs-string&quot; style=&quot;color: rgb(0, 136, 0); box-sizing: border-box;&quot;&gt;&quot;1 minute&quot;&lt;/span&gt;),
    &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;new&lt;/span&gt; Function&lt;Throwable, Directive&gt;() {
      &lt;span class=&quot;hljs-annotation&quot; style=&quot;color: rgb(155, 133, 157); box-sizing: border-box;&quot;&gt;@Override&lt;/span&gt;
      &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;public&lt;/span&gt; Directive &lt;span class=&quot;hljs-title&quot; style=&quot;box-sizing: border-box;&quot;&gt;apply&lt;/span&gt;(Throwable t) {
        &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;if&lt;/span&gt; (t &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;instanceof&lt;/span&gt; ArithmeticException) {
          &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;return&lt;/span&gt; resume();
        } &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;if&lt;/span&gt; (t &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;instanceof&lt;/span&gt; NullPointerException) {
          &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;return&lt;/span&gt; restart();
        } &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;if&lt;/span&gt; (t &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;instanceof&lt;/span&gt; IllegalArgumentException) {
          &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;return&lt;/span&gt; stop();
        } &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;else&lt;/span&gt; {
          &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;return&lt;/span&gt; escalate();
        }
      }
    });

&lt;span class=&quot;hljs-annotation&quot; style=&quot;color: rgb(155, 133, 157); box-sizing: border-box;&quot;&gt;@Override&lt;/span&gt;
&lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;public&lt;/span&gt; SupervisorStrategy &lt;span class=&quot;hljs-title&quot; style=&quot;box-sizing: border-box;&quot;&gt;supervisorStrategy&lt;/span&gt;() {
  &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;return&lt;/span&gt; strategy;
}&lt;/code&gt;&lt;ul class=&quot;pre-numbering&quot; style=&quot;box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); list-style: none; text-align: right; background-color: rgb(238, 238, 238);&quot;&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;1&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;2&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;3&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;4&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;5&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;6&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;7&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;8&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;9&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;10&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;11&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;12&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;13&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;14&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;15&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;16&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;17&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;18&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;19&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;20&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;21&lt;/li&gt;&lt;/ul&gt;</pre>
<p style="margin-top:0px; margin-bottom:1.1em; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:'microsoft yahei'; font-size:14px; line-height:35px">
我选择了几个著名的异常类型演示应用程序中被描述成故障处理指令在监管和监测中的使用。首先，一对一的策略，意味着每一个子actor会被单独的治愈（多对一策略与之相&#20284;，唯一不同的是这个策略是针对监管者所有的子actor而不仅仅是出故障的那一个）。这里限制重启的频率，最大程度上每分钟重启10次。-1 和Duration.Inf()的限制并不适用，可以指定一个重启绝对上限或者让重启无限。超过了期限后子actor会被停止。</p>
<blockquote style="margin:0px 0px 1.1em; padding:15px 20px; border-left-width:10px; border-left-style:solid; color:rgb(85,85,85); font-family:'microsoft yahei'; font-size:14px; line-height:35px">
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; line-height:1.25">
注意：&nbsp;<br style="">
如果这个策略是在监管者角色内部声明的（而不是一个单独的类），决策者可以在线程安全样式下访问角色内部的所有状态，包含获取失败子节点的引用（故障信息中getSender有效）。</p>
</blockquote>
<h3 id="默认监管策略" style="margin:0.8em 0px; padding:0px; font-weight:100; color:rgb(85,85,85); font-family:'microsoft yahei'; line-height:35px">
<a target="_blank" name="t5" style="color:rgb(12,137,207)"></a>默认监管策略</h3>
<p style="margin-top:0px; margin-bottom:1.1em; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:'microsoft yahei'; font-size:14px; line-height:35px">
如果定义过的策略没有覆盖到被抛出的异常，Escalate (逐步上升，丢给父监管者)志在必行。&nbsp;<br style="">
当actor中没有定义监管策略，如下的异常将会被默认处理掉：</p>
<ul style="color:rgb(85,85,85); font-family:'microsoft yahei'; font-size:14px; line-height:35px">
<li style="">ActorInitializationException 会停止掉失败了的子actor。</li><li style="">ActorKilledException 会停止掉失败了的子actor。</li><li style="">Exception 会重启失败了的子actor。</li><li style="">其他类型的Throwable 将会上升到父actor。</li></ul>
<p style="margin-top:0px; margin-bottom:1.1em; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:'microsoft yahei'; font-size:14px; line-height:35px">
如果异常被上升一路达到根监护者那，在那也会用上述默认策略方式处理掉。</p>
<h3 id="停止监管策略" style="margin:0.8em 0px; padding:0px; font-weight:100; color:rgb(85,85,85); font-family:'microsoft yahei'; line-height:35px">
<a target="_blank" name="t6" style="color:rgb(12,137,207)"></a>停止监管策略</h3>
<p style="margin-top:0px; margin-bottom:1.1em; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:'microsoft yahei'; font-size:14px; line-height:35px">
跟Erlang方式类&#20284;的策略是当它们失败的时候只停止子actor，以及当DeathWatch通知丢失的子actor的时候会对监管者采取纠正的动作。</p>
<h3 id="记录actor失败的消息" style="margin:0.8em 0px; padding:0px; font-weight:100; color:rgb(85,85,85); font-family:'microsoft yahei'; line-height:35px">
<a target="_blank" name="t7" style="color:rgb(12,137,207)"></a>记录actor失败的消息</h3>
<p style="margin-top:0px; margin-bottom:1.1em; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:'microsoft yahei'; font-size:14px; line-height:35px">
默认SupervisorStrategy会记录失败信息除非它们会被逐级上升。在高层次机构中处理被逐级上升的错误，并潜在的记录下来。&nbsp;<br style="">
在初始化的时候你可以通过设置SupervisorStrategy的loggingEnabled为false用来不激活默认的日志。 在Decider内部可以定制日志。注意获取当前失败的子acotrRef是有效的，当SupervisorStrategy在监管角色中描述，如同getSender一样。&nbsp;<br style="">
你可以自定义化日志通过实现SupervisorStrategy重写logFailure方法。</p>
<h2 id="顶层角色的监管" style="margin:0.8em 0px; padding:0px; font-weight:100; color:rgb(85,85,85); font-family:'microsoft yahei'; line-height:35px">
<a target="_blank" name="t8" style="color:rgb(12,137,207)"></a>顶层角色的监管</h2>
<p style="margin-top:0px; margin-bottom:1.1em; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:'microsoft yahei'; font-size:14px; line-height:35px">
顶层角色意味着是用system.actorOf()创建的，是用户监护人的孩子。&nbsp;<br style="">
在这种情况下没有特殊规则应用，监护只适用于配置的策略。</p>
<h2 id="应用测试" style="margin:0.8em 0px; padding:0px; font-weight:100; color:rgb(85,85,85); font-family:'microsoft yahei'; line-height:35px">
<a target="_blank" name="t9" style="color:rgb(12,137,207)"></a>应用测试</h2>
<p style="margin-top:0px; margin-bottom:1.1em; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:'microsoft yahei'; font-size:14px; line-height:35px">
下面章节展示了在实际中不同指令的效果，因此咱们需要一个测试环境。首先需要一个合适有效的监管者：</p>
<pre class="prettyprint" name="code" style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; margin-top: 0px; margin-bottom: 1.1em; font-family: 'Source Code Pro', monospace; padding: 5px 5px 5px 60px; font-size: 14px; line-height: 1.45; word-break: break-all; color: rgb(51, 51, 51); border: 1px solid rgba(128, 128, 128, 0.0745098); border-radius: 0px; position: relative; overflow-y: hidden; overflow-x: auto; background-color: rgba(128, 128, 128, 0.0470588);">&lt;code class=&quot;hljs java has-numbering&quot; style=&quot;display: block; padding: 0px; color: inherit; box-sizing: border-box; font-family: &#39;Source Code Pro&#39;, monospace;font-size:undefined; white-space: pre; border-radius: 0px; word-wrap: normal; background: transparent;&quot;&gt;&lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-class&quot; style=&quot;box-sizing: border-box;&quot;&gt;&lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title&quot; style=&quot;box-sizing: border-box; color: rgb(102, 0, 102);&quot;&gt;Supervisor&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;hljs-title&quot; style=&quot;box-sizing: border-box; color: rgb(102, 0, 102);&quot;&gt;UntypedActor&lt;/span&gt; {&lt;/span&gt;

  &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;static&lt;/span&gt; SupervisorStrategy strategy =
    &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;new&lt;/span&gt; OneForOneStrategy(&lt;span class=&quot;hljs-number&quot; style=&quot;color: rgb(0, 102, 102); box-sizing: border-box;&quot;&gt;10&lt;/span&gt;, Duration.create(&lt;span class=&quot;hljs-string&quot; style=&quot;color: rgb(0, 136, 0); box-sizing: border-box;&quot;&gt;&quot;1 minute&quot;&lt;/span&gt;),
      &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;new&lt;/span&gt; Function&lt;Throwable, Directive&gt;() {
        &lt;span class=&quot;hljs-annotation&quot; style=&quot;color: rgb(155, 133, 157); box-sizing: border-box;&quot;&gt;@Override&lt;/span&gt;
        &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;public&lt;/span&gt; Directive &lt;span class=&quot;hljs-title&quot; style=&quot;box-sizing: border-box;&quot;&gt;apply&lt;/span&gt;(Throwable t) {
          &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;if&lt;/span&gt; (t &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;instanceof&lt;/span&gt; ArithmeticException) {
            &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;return&lt;/span&gt; resume();
          } &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;if&lt;/span&gt; (t &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;instanceof&lt;/span&gt; NullPointerException) {
            &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;return&lt;/span&gt; restart();
          } &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;if&lt;/span&gt; (t &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;instanceof&lt;/span&gt; IllegalArgumentException) {
            &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;return&lt;/span&gt; stop();
          } &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;else&lt;/span&gt; {
            &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;return&lt;/span&gt; escalate();
          }
        }
      });

  &lt;span class=&quot;hljs-annotation&quot; style=&quot;color: rgb(155, 133, 157); box-sizing: border-box;&quot;&gt;@Override&lt;/span&gt;
  &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;public&lt;/span&gt; SupervisorStrategy &lt;span class=&quot;hljs-title&quot; style=&quot;box-sizing: border-box;&quot;&gt;supervisorStrategy&lt;/span&gt;() {
    &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;return&lt;/span&gt; strategy;
  }


  &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title&quot; style=&quot;box-sizing: border-box;&quot;&gt;onReceive&lt;/span&gt;(Object o) {
    &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;if&lt;/span&gt; (o &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;instanceof&lt;/span&gt; Props) {
      getSender().tell(getContext().actorOf((Props) o), getSelf());
    } &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;else&lt;/span&gt; {
      unhandled(o);
    }
  }
}&lt;/code&gt;&lt;ul class=&quot;pre-numbering&quot; style=&quot;box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); list-style: none; text-align: right; background-color: rgb(238, 238, 238);&quot;&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;1&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;2&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;3&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;4&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;5&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;6&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;7&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;8&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;9&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;10&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;11&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;12&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;13&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;14&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;15&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;16&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;17&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;18&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;19&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;20&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;21&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;22&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;23&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;24&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;25&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;26&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;27&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;28&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;29&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;30&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;31&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;32&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;33&lt;/li&gt;&lt;/ul&gt;</pre>
<p style="margin-top:0px; margin-bottom:1.1em; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:'microsoft yahei'; font-size:14px; line-height:35px">
此监管者将会创建一个子actor，好让我们可以作如下试验:</p>
<pre class="prettyprint" name="code" style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; margin-top: 0px; margin-bottom: 1.1em; font-family: 'Source Code Pro', monospace; padding: 5px 5px 5px 60px; font-size: 14px; line-height: 1.45; word-break: break-all; color: rgb(51, 51, 51); border: 1px solid rgba(128, 128, 128, 0.0745098); border-radius: 0px; position: relative; overflow-y: hidden; overflow-x: auto; background-color: rgba(128, 128, 128, 0.0470588);">&lt;code class=&quot;hljs java has-numbering&quot; style=&quot;display: block; padding: 0px; color: inherit; box-sizing: border-box; font-family: &#39;Source Code Pro&#39;, monospace;font-size:undefined; white-space: pre; border-radius: 0px; word-wrap: normal; background: transparent;&quot;&gt;&lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-class&quot; style=&quot;box-sizing: border-box;&quot;&gt;&lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title&quot; style=&quot;box-sizing: border-box; color: rgb(102, 0, 102);&quot;&gt;Child&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;hljs-title&quot; style=&quot;box-sizing: border-box; color: rgb(102, 0, 102);&quot;&gt;UntypedActor&lt;/span&gt; {&lt;/span&gt;
  &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;int&lt;/span&gt; state = &lt;span class=&quot;hljs-number&quot; style=&quot;color: rgb(0, 102, 102); box-sizing: border-box;&quot;&gt;0&lt;/span&gt;;

  &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title&quot; style=&quot;box-sizing: border-box;&quot;&gt;onReceive&lt;/span&gt;(Object o) &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;throws&lt;/span&gt; Exception {
    &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;if&lt;/span&gt; (o &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;instanceof&lt;/span&gt; Exception) {
      &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;throw&lt;/span&gt; (Exception) o;
    } &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;if&lt;/span&gt; (o &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;instanceof&lt;/span&gt; Integer) {
      state = (Integer) o;
    } &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;if&lt;/span&gt; (o.equals(&lt;span class=&quot;hljs-string&quot; style=&quot;color: rgb(0, 136, 0); box-sizing: border-box;&quot;&gt;&quot;get&quot;&lt;/span&gt;)) {
      getSender().tell(state, getSelf());
    } &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;else&lt;/span&gt; {
      unhandled(o);
    }
  }
}&lt;/code&gt;&lt;ul class=&quot;pre-numbering&quot; style=&quot;box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); list-style: none; text-align: right; background-color: rgb(238, 238, 238);&quot;&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;1&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;2&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;3&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;4&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;5&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;6&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;7&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;8&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;9&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;10&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;11&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;12&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;13&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;14&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;15&lt;/li&gt;&lt;/ul&gt;</pre>
<p style="margin-top:0px; margin-bottom:1.1em; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:'microsoft yahei'; font-size:14px; line-height:35px">
在测试actor系统中测试使用工具更容易简化，TestProbe提供了有用的角色引用，用来接收和检查消息的回复。</p>
<pre class="prettyprint" name="code" style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; margin-top: 0px; margin-bottom: 1.1em; font-family: 'Source Code Pro', monospace; padding: 5px 5px 5px 60px; font-size: 14px; line-height: 1.45; word-break: break-all; color: rgb(51, 51, 51); border: 1px solid rgba(128, 128, 128, 0.0745098); border-radius: 0px; position: relative; overflow-y: hidden; overflow-x: auto; background-color: rgba(128, 128, 128, 0.0470588);">&lt;code class=&quot;hljs actionscript has-numbering&quot; style=&quot;display: block; padding: 0px; color: inherit; box-sizing: border-box; font-family: &#39;Source Code Pro&#39;, monospace;font-size:undefined; white-space: pre; border-radius: 0px; word-wrap: normal; background: transparent;&quot;&gt;&lt;span class=&quot;hljs-preprocessor&quot; style=&quot;color: rgb(68, 68, 68); box-sizing: border-box;&quot;&gt;&lt;span class=&quot;hljs-keyword&quot; style=&quot;box-sizing: border-box;&quot;&gt;import&lt;/span&gt; akka.actor.ActorRef;&lt;/span&gt;
&lt;span class=&quot;hljs-preprocessor&quot; style=&quot;color: rgb(68, 68, 68); box-sizing: border-box;&quot;&gt;&lt;span class=&quot;hljs-keyword&quot; style=&quot;box-sizing: border-box;&quot;&gt;import&lt;/span&gt; akka.actor.ActorSystem;&lt;/span&gt;
&lt;span class=&quot;hljs-preprocessor&quot; style=&quot;color: rgb(68, 68, 68); box-sizing: border-box;&quot;&gt;&lt;span class=&quot;hljs-keyword&quot; style=&quot;box-sizing: border-box;&quot;&gt;import&lt;/span&gt; akka.actor.SupervisorStrategy;&lt;/span&gt;
&lt;span class=&quot;hljs-preprocessor&quot; style=&quot;color: rgb(68, 68, 68); box-sizing: border-box;&quot;&gt;&lt;span class=&quot;hljs-keyword&quot; style=&quot;box-sizing: border-box;&quot;&gt;import&lt;/span&gt; static akka.actor.SupervisorStrategy.resume;&lt;/span&gt;
&lt;span class=&quot;hljs-preprocessor&quot; style=&quot;color: rgb(68, 68, 68); box-sizing: border-box;&quot;&gt;&lt;span class=&quot;hljs-keyword&quot; style=&quot;box-sizing: border-box;&quot;&gt;import&lt;/span&gt; static akka.actor.SupervisorStrategy.restart;&lt;/span&gt;
&lt;span class=&quot;hljs-preprocessor&quot; style=&quot;color: rgb(68, 68, 68); box-sizing: border-box;&quot;&gt;&lt;span class=&quot;hljs-keyword&quot; style=&quot;box-sizing: border-box;&quot;&gt;import&lt;/span&gt; static akka.actor.SupervisorStrategy.stop;&lt;/span&gt;
&lt;span class=&quot;hljs-preprocessor&quot; style=&quot;color: rgb(68, 68, 68); box-sizing: border-box;&quot;&gt;&lt;span class=&quot;hljs-keyword&quot; style=&quot;box-sizing: border-box;&quot;&gt;import&lt;/span&gt; static akka.actor.SupervisorStrategy.escalate;&lt;/span&gt;
&lt;span class=&quot;hljs-preprocessor&quot; style=&quot;color: rgb(68, 68, 68); box-sizing: border-box;&quot;&gt;&lt;span class=&quot;hljs-keyword&quot; style=&quot;box-sizing: border-box;&quot;&gt;import&lt;/span&gt; akka.actor.SupervisorStrategy.Directive;&lt;/span&gt;
&lt;span class=&quot;hljs-preprocessor&quot; style=&quot;color: rgb(68, 68, 68); box-sizing: border-box;&quot;&gt;&lt;span class=&quot;hljs-keyword&quot; style=&quot;box-sizing: border-box;&quot;&gt;import&lt;/span&gt; akka.actor.OneForOneStrategy;&lt;/span&gt;
&lt;span class=&quot;hljs-preprocessor&quot; style=&quot;color: rgb(68, 68, 68); box-sizing: border-box;&quot;&gt;&lt;span class=&quot;hljs-keyword&quot; style=&quot;box-sizing: border-box;&quot;&gt;import&lt;/span&gt; akka.actor.Props;&lt;/span&gt;
&lt;span class=&quot;hljs-preprocessor&quot; style=&quot;color: rgb(68, 68, 68); box-sizing: border-box;&quot;&gt;&lt;span class=&quot;hljs-keyword&quot; style=&quot;box-sizing: border-box;&quot;&gt;import&lt;/span&gt; akka.actor.Terminated;&lt;/span&gt;
&lt;span class=&quot;hljs-preprocessor&quot; style=&quot;color: rgb(68, 68, 68); box-sizing: border-box;&quot;&gt;&lt;span class=&quot;hljs-keyword&quot; style=&quot;box-sizing: border-box;&quot;&gt;import&lt;/span&gt; akka.actor.UntypedActor;&lt;/span&gt;
&lt;span class=&quot;hljs-preprocessor&quot; style=&quot;color: rgb(68, 68, 68); box-sizing: border-box;&quot;&gt;&lt;span class=&quot;hljs-keyword&quot; style=&quot;box-sizing: border-box;&quot;&gt;import&lt;/span&gt; scala.collection.immutable.Seq;&lt;/span&gt;
&lt;span class=&quot;hljs-preprocessor&quot; style=&quot;color: rgb(68, 68, 68); box-sizing: border-box;&quot;&gt;&lt;span class=&quot;hljs-keyword&quot; style=&quot;box-sizing: border-box;&quot;&gt;import&lt;/span&gt; scala.concurrent.Await;&lt;/span&gt;
&lt;span class=&quot;hljs-preprocessor&quot; style=&quot;color: rgb(68, 68, 68); box-sizing: border-box;&quot;&gt;&lt;span class=&quot;hljs-keyword&quot; style=&quot;box-sizing: border-box;&quot;&gt;import&lt;/span&gt; static akka.pattern.Patterns.ask;&lt;/span&gt;
&lt;span class=&quot;hljs-preprocessor&quot; style=&quot;color: rgb(68, 68, 68); box-sizing: border-box;&quot;&gt;&lt;span class=&quot;hljs-keyword&quot; style=&quot;box-sizing: border-box;&quot;&gt;import&lt;/span&gt; scala.concurrent.duration.Duration;&lt;/span&gt;
&lt;span class=&quot;hljs-preprocessor&quot; style=&quot;color: rgb(68, 68, 68); box-sizing: border-box;&quot;&gt;&lt;span class=&quot;hljs-keyword&quot; style=&quot;box-sizing: border-box;&quot;&gt;import&lt;/span&gt; akka.testkit.TestProbe;&lt;/span&gt;

&lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-class&quot; style=&quot;box-sizing: border-box;&quot;&gt;&lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title&quot; style=&quot;box-sizing: border-box; color: rgb(102, 0, 102);&quot;&gt;FaultHandlingTest&lt;/span&gt; {&lt;/span&gt;
  &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;static&lt;/span&gt; ActorSystem system;
  Duration timeout = Duration.create(&lt;span class=&quot;hljs-number&quot; style=&quot;color: rgb(0, 102, 102); box-sizing: border-box;&quot;&gt;5&lt;/span&gt;, SECONDS);

  @BeforeClass
  &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;void&lt;/span&gt; start() {
    system = ActorSystem.create(&lt;span class=&quot;hljs-string&quot; style=&quot;color: rgb(0, 136, 0); box-sizing: border-box;&quot;&gt;&quot;test&quot;&lt;/span&gt;);
  }

  @AfterClass
  &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;void&lt;/span&gt; cleanup() {
    JavaTestKit.shutdownActorSystem(system);
    system = &lt;span class=&quot;hljs-literal&quot; style=&quot;color: rgb(0, 102, 102); box-sizing: border-box;&quot;&gt;null&lt;/span&gt;;
  }

  @Test
  &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;void&lt;/span&gt; mustEmploySupervisorStrategy() throws Exception {
    &lt;span class=&quot;hljs-comment&quot; style=&quot;color: rgb(136, 0, 0); box-sizing: border-box;&quot;&gt;// code here&lt;/span&gt;
  }

}&lt;/code&gt;&lt;ul class=&quot;pre-numbering&quot; style=&quot;box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); list-style: none; text-align: right; background-color: rgb(238, 238, 238);&quot;&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;1&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;2&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;3&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;4&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;5&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;6&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;7&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;8&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;9&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;10&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;11&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;12&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;13&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;14&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;15&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;16&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;17&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;18&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;19&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;20&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;21&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;22&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;23&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;24&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;25&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;26&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;27&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;28&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;29&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;30&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;31&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;32&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;33&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;34&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;35&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;36&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;37&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;38&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;39&lt;/li&gt;&lt;/ul&gt;</pre>
<p style="margin-top:0px; margin-bottom:1.1em; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:'microsoft yahei'; font-size:14px; line-height:35px">
创建角色：</p>
<pre class="prettyprint" name="code" style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; margin-top: 0px; margin-bottom: 1.1em; font-family: 'Source Code Pro', monospace; padding: 5px 5px 5px 60px; font-size: 14px; line-height: 1.45; word-break: break-all; color: rgb(51, 51, 51); border: 1px solid rgba(128, 128, 128, 0.0745098); border-radius: 0px; position: relative; overflow-y: hidden; overflow-x: auto; background-color: rgba(128, 128, 128, 0.0470588);">&lt;code class=&quot;hljs avrasm has-numbering&quot; style=&quot;display: block; padding: 0px; color: inherit; box-sizing: border-box; font-family: &#39;Source Code Pro&#39;, monospace;font-size:undefined; white-space: pre; border-radius: 0px; word-wrap: normal; background: transparent;&quot;&gt;Props superprops = Props&lt;span class=&quot;hljs-preprocessor&quot; style=&quot;color: rgb(68, 68, 68); box-sizing: border-box;&quot;&gt;.create&lt;/span&gt;(Supervisor&lt;span class=&quot;hljs-preprocessor&quot; style=&quot;color: rgb(68, 68, 68); box-sizing: border-box;&quot;&gt;.class&lt;/span&gt;)&lt;span class=&quot;hljs-comment&quot; style=&quot;color: rgb(136, 0, 0); box-sizing: border-box;&quot;&gt;;&lt;/span&gt;
ActorRef supervisor = system&lt;span class=&quot;hljs-preprocessor&quot; style=&quot;color: rgb(68, 68, 68); box-sizing: border-box;&quot;&gt;.actorOf&lt;/span&gt;(superprops, &lt;span class=&quot;hljs-string&quot; style=&quot;color: rgb(0, 136, 0); box-sizing: border-box;&quot;&gt;&quot;supervisor&quot;&lt;/span&gt;)&lt;span class=&quot;hljs-comment&quot; style=&quot;color: rgb(136, 0, 0); box-sizing: border-box;&quot;&gt;;&lt;/span&gt;
ActorRef child = (ActorRef) Await&lt;span class=&quot;hljs-preprocessor&quot; style=&quot;color: rgb(68, 68, 68); box-sizing: border-box;&quot;&gt;.result&lt;/span&gt;(ask(supervisor,
  Props&lt;span class=&quot;hljs-preprocessor&quot; style=&quot;color: rgb(68, 68, 68); box-sizing: border-box;&quot;&gt;.create&lt;/span&gt;(Child&lt;span class=&quot;hljs-preprocessor&quot; style=&quot;color: rgb(68, 68, 68); box-sizing: border-box;&quot;&gt;.class&lt;/span&gt;), &lt;span class=&quot;hljs-number&quot; style=&quot;color: rgb(0, 102, 102); box-sizing: border-box;&quot;&gt;5000&lt;/span&gt;), timeout)&lt;span class=&quot;hljs-comment&quot; style=&quot;color: rgb(136, 0, 0); box-sizing: border-box;&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;ul class=&quot;pre-numbering&quot; style=&quot;box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); list-style: none; text-align: right; background-color: rgb(238, 238, 238);&quot;&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;1&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;2&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;3&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;4&lt;/li&gt;&lt;/ul&gt;</pre>
<p style="margin-top:0px; margin-bottom:1.1em; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:'microsoft yahei'; font-size:14px; line-height:35px">
第一个测试将演示resume指令，因此我们尝试在actor中设置一些非初始化的状态，并且让actor出现故障：</p>
<pre class="prettyprint" name="code" style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; margin-top: 0px; margin-bottom: 1.1em; font-family: 'Source Code Pro', monospace; padding: 5px 5px 5px 60px; font-size: 14px; line-height: 1.45; word-break: break-all; color: rgb(51, 51, 51); border: 1px solid rgba(128, 128, 128, 0.0745098); border-radius: 0px; position: relative; overflow-y: hidden; overflow-x: auto; background-color: rgba(128, 128, 128, 0.0470588);">&lt;code class=&quot;hljs avrasm has-numbering&quot; style=&quot;display: block; padding: 0px; color: inherit; box-sizing: border-box; font-family: &#39;Source Code Pro&#39;, monospace;font-size:undefined; white-space: pre; border-radius: 0px; word-wrap: normal; background: transparent;&quot;&gt;child&lt;span class=&quot;hljs-preprocessor&quot; style=&quot;color: rgb(68, 68, 68); box-sizing: border-box;&quot;&gt;.tell&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot; style=&quot;color: rgb(0, 102, 102); box-sizing: border-box;&quot;&gt;42&lt;/span&gt;, ActorRef&lt;span class=&quot;hljs-preprocessor&quot; style=&quot;color: rgb(68, 68, 68); box-sizing: border-box;&quot;&gt;.noSender&lt;/span&gt;())&lt;span class=&quot;hljs-comment&quot; style=&quot;color: rgb(136, 0, 0); box-sizing: border-box;&quot;&gt;;&lt;/span&gt;
assert Await&lt;span class=&quot;hljs-preprocessor&quot; style=&quot;color: rgb(68, 68, 68); box-sizing: border-box;&quot;&gt;.result&lt;/span&gt;(ask(child, &lt;span class=&quot;hljs-string&quot; style=&quot;color: rgb(0, 136, 0); box-sizing: border-box;&quot;&gt;&quot;get&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot; style=&quot;color: rgb(0, 102, 102); box-sizing: border-box;&quot;&gt;5000&lt;/span&gt;), timeout)&lt;span class=&quot;hljs-preprocessor&quot; style=&quot;color: rgb(68, 68, 68); box-sizing: border-box;&quot;&gt;.equals&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot; style=&quot;color: rgb(0, 102, 102); box-sizing: border-box;&quot;&gt;42&lt;/span&gt;)&lt;span class=&quot;hljs-comment&quot; style=&quot;color: rgb(136, 0, 0); box-sizing: border-box;&quot;&gt;;&lt;/span&gt;
child&lt;span class=&quot;hljs-preprocessor&quot; style=&quot;color: rgb(68, 68, 68); box-sizing: border-box;&quot;&gt;.tell&lt;/span&gt;(new ArithmeticException(), ActorRef&lt;span class=&quot;hljs-preprocessor&quot; style=&quot;color: rgb(68, 68, 68); box-sizing: border-box;&quot;&gt;.noSender&lt;/span&gt;())&lt;span class=&quot;hljs-comment&quot; style=&quot;color: rgb(136, 0, 0); box-sizing: border-box;&quot;&gt;;&lt;/span&gt;
assert Await&lt;span class=&quot;hljs-preprocessor&quot; style=&quot;color: rgb(68, 68, 68); box-sizing: border-box;&quot;&gt;.result&lt;/span&gt;(ask(child, &lt;span class=&quot;hljs-string&quot; style=&quot;color: rgb(0, 136, 0); box-sizing: border-box;&quot;&gt;&quot;get&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot; style=&quot;color: rgb(0, 102, 102); box-sizing: border-box;&quot;&gt;5000&lt;/span&gt;), timeout)&lt;span class=&quot;hljs-preprocessor&quot; style=&quot;color: rgb(68, 68, 68); box-sizing: border-box;&quot;&gt;.equals&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot; style=&quot;color: rgb(0, 102, 102); box-sizing: border-box;&quot;&gt;42&lt;/span&gt;)&lt;span class=&quot;hljs-comment&quot; style=&quot;color: rgb(136, 0, 0); box-sizing: border-box;&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;ul class=&quot;pre-numbering&quot; style=&quot;box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); list-style: none; text-align: right; background-color: rgb(238, 238, 238);&quot;&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;1&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;2&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;3&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;4&lt;/li&gt;&lt;/ul&gt;</pre>
<p style="margin-top:0px; margin-bottom:1.1em; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:'microsoft yahei'; font-size:14px; line-height:35px">
你可以看到在错误处理指令完后仍能得到42。现在我们将故障换成更严重的NullPointerException，那将不再是这样的情况：</p>
<pre class="prettyprint" name="code" style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; margin-top: 0px; margin-bottom: 1.1em; font-family: 'Source Code Pro', monospace; padding: 5px 5px 5px 60px; font-size: 14px; line-height: 1.45; word-break: break-all; color: rgb(51, 51, 51); border: 1px solid rgba(128, 128, 128, 0.0745098); border-radius: 0px; position: relative; overflow-y: hidden; overflow-x: auto; background-color: rgba(128, 128, 128, 0.0470588);">&lt;code class=&quot;hljs avrasm has-numbering&quot; style=&quot;display: block; padding: 0px; color: inherit; box-sizing: border-box; font-family: &#39;Source Code Pro&#39;, monospace;font-size:undefined; white-space: pre; border-radius: 0px; word-wrap: normal; background: transparent;&quot;&gt;child&lt;span class=&quot;hljs-preprocessor&quot; style=&quot;color: rgb(68, 68, 68); box-sizing: border-box;&quot;&gt;.tell&lt;/span&gt;(new NullPointerException(), ActorRef&lt;span class=&quot;hljs-preprocessor&quot; style=&quot;color: rgb(68, 68, 68); box-sizing: border-box;&quot;&gt;.noSender&lt;/span&gt;())&lt;span class=&quot;hljs-comment&quot; style=&quot;color: rgb(136, 0, 0); box-sizing: border-box;&quot;&gt;;&lt;/span&gt;
assert Await&lt;span class=&quot;hljs-preprocessor&quot; style=&quot;color: rgb(68, 68, 68); box-sizing: border-box;&quot;&gt;.result&lt;/span&gt;(ask(child, &lt;span class=&quot;hljs-string&quot; style=&quot;color: rgb(0, 136, 0); box-sizing: border-box;&quot;&gt;&quot;get&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot; style=&quot;color: rgb(0, 102, 102); box-sizing: border-box;&quot;&gt;5000&lt;/span&gt;), timeout)&lt;span class=&quot;hljs-preprocessor&quot; style=&quot;color: rgb(68, 68, 68); box-sizing: border-box;&quot;&gt;.equals&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot; style=&quot;color: rgb(0, 102, 102); box-sizing: border-box;&quot;&gt;0&lt;/span&gt;)&lt;span class=&quot;hljs-comment&quot; style=&quot;color: rgb(136, 0, 0); box-sizing: border-box;&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;ul class=&quot;pre-numbering&quot; style=&quot;box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); list-style: none; text-align: right; background-color: rgb(238, 238, 238);&quot;&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;1&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;2&lt;/li&gt;&lt;/ul&gt;</pre>
<p style="margin-top:0px; margin-bottom:1.1em; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:'microsoft yahei'; font-size:14px; line-height:35px">
最后看看最致命的IllegalArgumentException，监管者会终止其子actor：</p>
<pre class="prettyprint" name="code" style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; margin-top: 0px; margin-bottom: 1.1em; font-family: 'Source Code Pro', monospace; padding: 5px 5px 5px 60px; font-size: 14px; line-height: 1.45; word-break: break-all; color: rgb(51, 51, 51); border: 1px solid rgba(128, 128, 128, 0.0745098); border-radius: 0px; position: relative; overflow-y: hidden; overflow-x: auto; background-color: rgba(128, 128, 128, 0.0470588);">&lt;code class=&quot;hljs avrasm has-numbering&quot; style=&quot;display: block; padding: 0px; color: inherit; box-sizing: border-box; font-family: &#39;Source Code Pro&#39;, monospace;font-size:undefined; white-space: pre; border-radius: 0px; word-wrap: normal; background: transparent;&quot;&gt;final TestProbe probe = new TestProbe(system)&lt;span class=&quot;hljs-comment&quot; style=&quot;color: rgb(136, 0, 0); box-sizing: border-box;&quot;&gt;;&lt;/span&gt;
probe&lt;span class=&quot;hljs-preprocessor&quot; style=&quot;color: rgb(68, 68, 68); box-sizing: border-box;&quot;&gt;.watch&lt;/span&gt;(child)&lt;span class=&quot;hljs-comment&quot; style=&quot;color: rgb(136, 0, 0); box-sizing: border-box;&quot;&gt;;&lt;/span&gt;
child&lt;span class=&quot;hljs-preprocessor&quot; style=&quot;color: rgb(68, 68, 68); box-sizing: border-box;&quot;&gt;.tell&lt;/span&gt;(new IllegalArgumentException(), ActorRef&lt;span class=&quot;hljs-preprocessor&quot; style=&quot;color: rgb(68, 68, 68); box-sizing: border-box;&quot;&gt;.noSender&lt;/span&gt;())&lt;span class=&quot;hljs-comment&quot; style=&quot;color: rgb(136, 0, 0); box-sizing: border-box;&quot;&gt;;&lt;/span&gt;
probe&lt;span class=&quot;hljs-preprocessor&quot; style=&quot;color: rgb(68, 68, 68); box-sizing: border-box;&quot;&gt;.expectMsgClass&lt;/span&gt;(Terminated&lt;span class=&quot;hljs-preprocessor&quot; style=&quot;color: rgb(68, 68, 68); box-sizing: border-box;&quot;&gt;.class&lt;/span&gt;)&lt;span class=&quot;hljs-comment&quot; style=&quot;color: rgb(136, 0, 0); box-sizing: border-box;&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;ul class=&quot;pre-numbering&quot; style=&quot;box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); list-style: none; text-align: right; background-color: rgb(238, 238, 238);&quot;&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;1&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;2&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;3&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;4&lt;/li&gt;&lt;/ul&gt;</pre>
<p style="margin-top:0px; margin-bottom:1.1em; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:'microsoft yahei'; font-size:14px; line-height:35px">
到目前为止，监管者完全不受子actor故障的影响，因为指令集会处理掉。在Exception情况下，就不会是上述情况了，监管者会将失败情况逐级上升传递：</p>
<pre class="prettyprint" name="code" style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; margin-top: 0px; margin-bottom: 1.1em; font-family: 'Source Code Pro', monospace; padding: 5px 5px 5px 60px; font-size: 14px; line-height: 1.45; word-break: break-all; color: rgb(51, 51, 51); border: 1px solid rgba(128, 128, 128, 0.0745098); border-radius: 0px; position: relative; overflow-y: hidden; overflow-x: auto; background-color: rgba(128, 128, 128, 0.0470588);">&lt;code class=&quot;hljs avrasm has-numbering&quot; style=&quot;display: block; padding: 0px; color: inherit; box-sizing: border-box; font-family: &#39;Source Code Pro&#39;, monospace;font-size:undefined; white-space: pre; border-radius: 0px; word-wrap: normal; background: transparent;&quot;&gt;child = (ActorRef) Await&lt;span class=&quot;hljs-preprocessor&quot; style=&quot;color: rgb(68, 68, 68); box-sizing: border-box;&quot;&gt;.result&lt;/span&gt;(ask(supervisor,
  Props&lt;span class=&quot;hljs-preprocessor&quot; style=&quot;color: rgb(68, 68, 68); box-sizing: border-box;&quot;&gt;.create&lt;/span&gt;(Child&lt;span class=&quot;hljs-preprocessor&quot; style=&quot;color: rgb(68, 68, 68); box-sizing: border-box;&quot;&gt;.class&lt;/span&gt;), &lt;span class=&quot;hljs-number&quot; style=&quot;color: rgb(0, 102, 102); box-sizing: border-box;&quot;&gt;5000&lt;/span&gt;), timeout)&lt;span class=&quot;hljs-comment&quot; style=&quot;color: rgb(136, 0, 0); box-sizing: border-box;&quot;&gt;;&lt;/span&gt;
probe&lt;span class=&quot;hljs-preprocessor&quot; style=&quot;color: rgb(68, 68, 68); box-sizing: border-box;&quot;&gt;.watch&lt;/span&gt;(child)&lt;span class=&quot;hljs-comment&quot; style=&quot;color: rgb(136, 0, 0); box-sizing: border-box;&quot;&gt;;&lt;/span&gt;
assert Await&lt;span class=&quot;hljs-preprocessor&quot; style=&quot;color: rgb(68, 68, 68); box-sizing: border-box;&quot;&gt;.result&lt;/span&gt;(ask(child, &lt;span class=&quot;hljs-string&quot; style=&quot;color: rgb(0, 136, 0); box-sizing: border-box;&quot;&gt;&quot;get&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot; style=&quot;color: rgb(0, 102, 102); box-sizing: border-box;&quot;&gt;5000&lt;/span&gt;), timeout)&lt;span class=&quot;hljs-preprocessor&quot; style=&quot;color: rgb(68, 68, 68); box-sizing: border-box;&quot;&gt;.equals&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot; style=&quot;color: rgb(0, 102, 102); box-sizing: border-box;&quot;&gt;0&lt;/span&gt;)&lt;span class=&quot;hljs-comment&quot; style=&quot;color: rgb(136, 0, 0); box-sizing: border-box;&quot;&gt;;&lt;/span&gt;
child&lt;span class=&quot;hljs-preprocessor&quot; style=&quot;color: rgb(68, 68, 68); box-sizing: border-box;&quot;&gt;.tell&lt;/span&gt;(new Exception(), ActorRef&lt;span class=&quot;hljs-preprocessor&quot; style=&quot;color: rgb(68, 68, 68); box-sizing: border-box;&quot;&gt;.noSender&lt;/span&gt;())&lt;span class=&quot;hljs-comment&quot; style=&quot;color: rgb(136, 0, 0); box-sizing: border-box;&quot;&gt;;&lt;/span&gt;
probe&lt;span class=&quot;hljs-preprocessor&quot; style=&quot;color: rgb(68, 68, 68); box-sizing: border-box;&quot;&gt;.expectMsgClass&lt;/span&gt;(Terminated&lt;span class=&quot;hljs-preprocessor&quot; style=&quot;color: rgb(68, 68, 68); box-sizing: border-box;&quot;&gt;.class&lt;/span&gt;)&lt;span class=&quot;hljs-comment&quot; style=&quot;color: rgb(136, 0, 0); box-sizing: border-box;&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;ul class=&quot;pre-numbering&quot; style=&quot;box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); list-style: none; text-align: right; background-color: rgb(238, 238, 238);&quot;&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;1&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;2&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;3&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;4&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;5&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;6&lt;/li&gt;&lt;/ul&gt;</pre>
<p style="margin-top:0px; margin-bottom:1.1em; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:'microsoft yahei'; font-size:14px; line-height:35px">
监管者它自己会被ActorSystem提供的顶层actor监管，顶层actor对所有异常（ActorInitializationException 和ActorKilledException异常是例外）使用默认故障策略去重启。因为默认指令的重启是杀死所有子actor，我们预期到这些脆弱的子actor是不会在故障中幸存。</p>
<p style="margin-top:0px; margin-bottom:1.1em; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:'microsoft yahei'; font-size:14px; line-height:35px">
假如这不是所期望的（依赖于实际用例），我们需要使用一个不同的监管者来覆盖它的方法。</p>
<pre class="prettyprint" name="code" style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; margin-top: 0px; margin-bottom: 1.1em; font-family: 'Source Code Pro', monospace; padding: 5px 5px 5px 60px; font-size: 14px; line-height: 1.45; word-break: break-all; color: rgb(51, 51, 51); border: 1px solid rgba(128, 128, 128, 0.0745098); border-radius: 0px; position: relative; overflow-y: hidden; overflow-x: auto; background-color: rgba(128, 128, 128, 0.0470588);">&lt;code class=&quot;hljs java has-numbering&quot; style=&quot;display: block; padding: 0px; color: inherit; box-sizing: border-box; font-family: &#39;Source Code Pro&#39;, monospace;font-size:undefined; white-space: pre; border-radius: 0px; word-wrap: normal; background: transparent;&quot;&gt;&lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-class&quot; style=&quot;box-sizing: border-box;&quot;&gt;&lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title&quot; style=&quot;box-sizing: border-box; color: rgb(102, 0, 102);&quot;&gt;Supervisor2&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;hljs-title&quot; style=&quot;box-sizing: border-box; color: rgb(102, 0, 102);&quot;&gt;UntypedActor&lt;/span&gt; {&lt;/span&gt;

  &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;static&lt;/span&gt; SupervisorStrategy strategy = &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;new&lt;/span&gt; OneForOneStrategy(&lt;span class=&quot;hljs-number&quot; style=&quot;color: rgb(0, 102, 102); box-sizing: border-box;&quot;&gt;10&lt;/span&gt;,
    Duration.create(&lt;span class=&quot;hljs-string&quot; style=&quot;color: rgb(0, 136, 0); box-sizing: border-box;&quot;&gt;&quot;1 minute&quot;&lt;/span&gt;),
      &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;new&lt;/span&gt; Function&lt;Throwable, Directive&gt;() {
        &lt;span class=&quot;hljs-annotation&quot; style=&quot;color: rgb(155, 133, 157); box-sizing: border-box;&quot;&gt;@Override&lt;/span&gt;
        &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;public&lt;/span&gt; Directive &lt;span class=&quot;hljs-title&quot; style=&quot;box-sizing: border-box;&quot;&gt;apply&lt;/span&gt;(Throwable t) {
          &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;if&lt;/span&gt; (t &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;instanceof&lt;/span&gt; ArithmeticException) {
            &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;return&lt;/span&gt; resume();
          } &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;if&lt;/span&gt; (t &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;instanceof&lt;/span&gt; NullPointerException) {
            &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;return&lt;/span&gt; restart();
          } &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;if&lt;/span&gt; (t &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;instanceof&lt;/span&gt; IllegalArgumentException) {
            &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;return&lt;/span&gt; stop();
          } &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;else&lt;/span&gt; {
            &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;return&lt;/span&gt; escalate();
          }
        }
      });

  &lt;span class=&quot;hljs-annotation&quot; style=&quot;color: rgb(155, 133, 157); box-sizing: border-box;&quot;&gt;@Override&lt;/span&gt;
  &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;public&lt;/span&gt; SupervisorStrategy &lt;span class=&quot;hljs-title&quot; style=&quot;box-sizing: border-box;&quot;&gt;supervisorStrategy&lt;/span&gt;() {
    &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;return&lt;/span&gt; strategy;
  }


  &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title&quot; style=&quot;box-sizing: border-box;&quot;&gt;onReceive&lt;/span&gt;(Object o) {
    &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;if&lt;/span&gt; (o &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;instanceof&lt;/span&gt; Props) {
      getSender().tell(getContext().actorOf((Props) o), getSelf());
    } &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;else&lt;/span&gt; {
      unhandled(o);
    }
  }

  &lt;span class=&quot;hljs-annotation&quot; style=&quot;color: rgb(155, 133, 157); box-sizing: border-box;&quot;&gt;@Override&lt;/span&gt;
  &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot; style=&quot;color: rgb(0, 0, 136); box-sizing: border-box;&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title&quot; style=&quot;box-sizing: border-box;&quot;&gt;preRestart&lt;/span&gt;(Throwable cause, Option&lt;Object&gt; msg) {
    &lt;span class=&quot;hljs-comment&quot; style=&quot;color: rgb(136, 0, 0); box-sizing: border-box;&quot;&gt;// do not kill all children, which is the default here&lt;/span&gt;
  }
}&lt;/code&gt;&lt;ul class=&quot;pre-numbering&quot; style=&quot;box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); list-style: none; text-align: right; background-color: rgb(238, 238, 238);&quot;&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;1&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;2&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;3&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;4&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;5&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;6&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;7&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;8&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;9&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;10&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;11&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;12&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;13&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;14&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;15&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;16&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;17&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;18&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;19&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;20&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;21&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;22&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;23&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;24&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;25&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;26&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;27&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;28&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;29&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;30&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;31&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;32&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;33&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;34&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;35&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;36&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;37&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box; padding: 0px 5px;&quot;&gt;38&lt;/li&gt;&lt;/ul&gt;</pre>
<p style="margin-top:0px; margin-bottom:1.1em; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:'microsoft yahei'; font-size:14px; line-height:35px">
在这个父actor下，子actor会逐步上升中的重启而幸存，如下的最后测试：</p>
<pre class="prettyprint" name="code" style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; margin-top: 0px; margin-bottom: 1.1em; font-family: 'Source Code Pro', monospace; padding: 5px 5px 5px 60px; font-size: 14px; line-height: 1.45; word-break: break-all; color: rgb(51, 51, 51); border: 1px solid rgba(128, 128, 128, 0.0745098); border-radius: 0px; position: relative; overflow-y: hidden; overflow-x: auto; background-color: rgba(128, 128, 128, 0.0470588);">&lt;code class=&quot;hljs avrasm has-numbering&quot; style=&quot;display: block; padding: 0px; color: inherit; box-sizing: border-box; font-family: &#39;Source Code Pro&#39;, monospace;font-size:undefined; white-space: pre; border-radius: 0px; word-wrap: normal; background: transparent;&quot;&gt;superprops = Props&lt;span class=&quot;hljs-preprocessor&quot; style=&quot;color: rgb(68, 68, 68); box-sizing: border-box;&quot;&gt;.create&lt;/span&gt;(Supervisor2&lt;span class=&quot;hljs-preprocessor&quot; style=&quot;color: rgb(68, 68, 68); box-sizing: border-box;&quot;&gt;.class&lt;/span&gt;)&lt;span class=&quot;hljs-comment&quot; style=&quot;color: rgb(136, 0, 0); box-sizing: border-box;&quot;&gt;;&lt;/span&gt;
supervisor = system&lt;span class=&quot;hljs-preprocessor&quot; style=&quot;color: rgb(68, 68, 68); box-sizing: border-box;&quot;&gt;.actorOf&lt;/span&gt;(superprops)&lt;span class=&quot;hljs-comment&quot; style=&quot;color: rgb(136, 0, 0); box-sizing: border-box;&quot;&gt;;&lt;/span&gt;
child = (ActorRef) Await&lt;span class=&quot;hljs-preprocessor&quot; style=&quot;color: rgb(68, 68, 68); box-sizing: border-box;&quot;&gt;.result&lt;/span&gt;(ask(supervisor,
  Props&lt;span class=&quot;hljs-preprocessor&quot; style=&quot;color: rgb(68, 68, 68); box-sizing: border-box;&quot;&gt;.create&lt;/span&gt;(Child&lt;span class=&quot;hljs-preprocessor&quot; style=&quot;color: rgb(68, 68, 68); box-sizing: border-box;&quot;&gt;.class&lt;/span&gt;), &lt;span class=&quot;hljs-number&quot; style=&quot;color: rgb(0, 102, 102); box-sizing: border-box;&quot;&gt;5000&lt;/span&gt;), timeout)&lt;span class=&quot;hljs-comment&quot; style=&quot;color: rgb(136, 0, 0); box-sizing: border-box;&quot;&gt;;&lt;/span&gt;
child&lt;span class=&quot;hljs-preprocessor&quot; style=&quot;color: rgb(68, 68, 68); box-sizing: border-box;&quot;&gt;.tell&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot; style=&quot;color: rgb(0, 102, 102); box-sizing: border-box;&quot;&gt;23&lt;/span&gt;, ActorRef&lt;span class=&quot;hljs-preprocessor&quot; style=&quot;color: rgb(68, 68, 68); box-sizing: border-box;&quot;&gt;.noSender&lt;/span&gt;())&lt;span class=&quot;hljs-comment&quot; style=&quot;color: rgb(136, 0, 0); box-sizing: border-box;&quot;&gt;;&lt;/span&gt;
assert Await&lt;span class=&quot;hljs-preprocessor&quot; style=&quot;color: rgb(68, 68, 68); box-sizing: border-box;&quot;&gt;.result&lt;/span&gt;(ask(child, &lt;span class=&quot;hljs-string&quot; style=&quot;color: rgb(0, 136, 0); box-sizing: border-box;&quot;&gt;&quot;get&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot; style=&quot;color: rgb(0, 102, 102); box-sizing: border-box;&quot;&gt;5000&lt;/span&gt;), timeout)&lt;span class=&quot;hljs-preprocessor&quot; style=&quot;color: rgb(68, 68, 68); box-sizing: border-box;&quot;&gt;.equals&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot; style=&quot;color: rgb(0, 102, 102); box-sizing: border-box;&quot;&gt;23&lt;/span&gt;)&lt;span class=&quot;hljs-comment&quot; style=&quot;color: rgb(136, 0, 0); box-sizing: border-box;&quot;&gt;;&lt;/span&gt;
child&lt;span class=&quot;hljs-preprocessor&quot; style=&quot;color: rgb(68, 68, 68); box-sizing: border-box;&quot;&gt;.tell&lt;/span&gt;(new Exception(), ActorRef&lt;span class=&quot;hljs-preprocessor&quot; style=&quot;color: rgb(68, 68, 68); box-sizing: border-box;&quot;&gt;.noSender&lt;/span&gt;())&lt;span class=&quot;hljs-comment&quot; style=&quot;color: rgb(136, 0, 0); box-sizing: border-box;&quot;&gt;;&lt;/span&gt;
assert Await&lt;span class=&quot;hljs-preprocessor&quot; style=&quot;color: rgb(68, 68, 68); box-sizing: border-box;&quot;&gt;.result&lt;/span&gt;(ask(child, &lt;span class=&quot;hljs-string&quot; style=&quot;color: rgb(0, 136, 0); box-sizing: border-box;&quot;&gt;&quot;get&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot; style=&quot;color: rgb(0, 102, 102); box-sizing: border-box;&quot;&gt;5000&lt;/span&gt;), timeout)&lt;span class=&quot;hljs-preprocessor&quot; style=&quot;color: rgb(68, 68, 68); box-sizing: border-box;&quot;&gt;.equals&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot; style=&quot;color: rgb(0, 102, 102); box-sizing: border-box;&quot;&gt;0&lt;/span&gt;)&lt;span class=&quot;hljs-comment&quot; style=&quot;color: rgb(136, 0, 0); box-sizing: border-box;&quot;&gt;;&lt;/span&gt;&lt;/code&gt;</pre><br>

            <div>
                作者：xiao_jun_0820 发表于2015/8/3 13:15:43 <a href="http://blog.csdn.net/xiao_jun_0820/article/details/47254753">原文链接</a>
            </div>
            <div>
            阅读：9 评论：0 <a href="http://blog.csdn.net/xiao_jun_0820/article/details/47254753#comments" target="_blank">查看评论</a>
            </div>
        ]]>
        </description>
        <category></category>
    </item>
    <item>
        <title><![CDATA[[转]Recommending Firefox add-ons with Spark]]></title>
        <link>http://blog.csdn.net/xiao_jun_0820/article/details/46986367</link>
        <guid>http://blog.csdn.net/xiao_jun_0820/article/details/46986367</guid>
        <author>xiao_jun_0820</author>
        <pubDate>2015/7/21 15:04:14</pubDate>
        <description><![CDATA[
            
<h1 class="page-title">转自http://robertovitillo.com/tag/recommender-system/</h1>
<h1 class="page-title">recommender system</h1>
<span class="tags-links"><a target="_blank" href="http://robertovitillo.com/tag/machine-learning/" rel="tag">machine learning</a><a target="_blank" href="http://robertovitillo.com/tag/map-reduce/" rel="tag">map-reduce</a><a target="_blank" href="http://robertovitillo.com/tag/mozilla-2/" rel="tag">mozilla</a><a target="_blank" href="http://robertovitillo.com/tag/recommender-system/" rel="tag">recommender
 system</a><a target="_blank" href="http://robertovitillo.com/tag/scala/" rel="tag">scala</a><a target="_blank" href="http://robertovitillo.com/tag/spark/" rel="tag">spark</a><a target="_blank" href="http://robertovitillo.com/tag/telemetry/" rel="tag">telemetry</a></span>
<h1 class="entry-title"><a target="_blank" href="http://robertovitillo.com/2014/11/12/using-spark-to-recommend-add-ons-for-firefox/" rel="bookmark">Recommending Firefox add-ons with&nbsp;Spark</a></h1>
<div class="entry-content">
<p style="text-align:justify">We are currently evaluating possible replacements for our Telemetry&nbsp;<a target="_blank" href="https://github.com/mozilla/telemetry-server">map-reduce</a>&nbsp;infrastructure. As our current data munging machinery isn’t distributed, analyzing
 days worth of data can be quite a pain. Also, many algorithms can’t easily be expressed with a simple map/reduce interface.</p>
<p style="text-align:justify">So I decided to give Spark another try. “Another” because I have played with it in the past but I didn’t feel it was mature enough to be run in production. And I wasn’t the only one to&nbsp;<a target="_blank" href="http://blog.explainmydata.com/2014/05/spark-should-be-better-than-mapreduce.html">think
 that apparently</a>. I feel like things have changed though with the latest 1.1 release and I want to share my joy with you.</p>
<p><strong>What is Spark?</strong></p>
<p style="text-align:justify">In a nutshell, “<a target="_blank" href="http://spark.apache.org/docs/latest/index.html">Spark</a>&nbsp;is a fast and general-purpose cluster computing system. It provides high-level APIs in Java, Scala and Python, and an optimized
 engine that supports general execution graphs. It also supports a rich set of higher-level tools including&nbsp;<a target="_blank" href="http://robertovitillo.com/tag/recommender-system/spark.apache.org/docs/latest/sql-programming-guide.html">Spark SQL</a>&nbsp;for
 SQL and structured data processing,&nbsp;<a target="_blank" href="http://spark.apache.org/docs/latest/mllib-guide.html">MLlib</a>&nbsp;for machine learning,&nbsp;<a target="_blank" href="http://robertovitillo.com/tag/recommender-system/spark.apache.org/docs/latest/graphx-programming-guide.html">GraphX</a>&nbsp;for
 graph processing, and&nbsp;<a target="_blank" href="http://robertovitillo.com/tag/recommender-system/spark.apache.org/docs/latest/streaming-programming-guide.html">Spark Streaming</a>.”</p>
<p style="text-align:justify">Spark primary abstraction is the Resilient Distributed Dataset (RDD), which one can imagine as a distributed pandas or R data frame. The RDD&nbsp;<a target="_blank" href="https://spark.apache.org/docs/latest/api/scala/#org.apache.spark.api.java.JavaRDD">API</a>&nbsp;comes
 with all kinds of distributed operations, among which also our dear&nbsp;<em>map</em>&nbsp;and&nbsp;<em>reduce</em>. Many RDD operations accept user-defined Scala or Python functions as input which allow average Joe to write distributed applications like a pro.</p>
<p style="text-align:justify">A RDD can also be converted to a local Scala/Python data structure, assuming the dataset is small enough to fit in memory. The idea is that once you chopped the data you are not interested in, what you are left with fits comfortably
 on a single machine. Oh and did I mention that you can issue Spark queries directly from a Scala REPL? That’s great for performing exploratory data analyses.</p>
<p style="text-align:justify">The greatest strength of Spark though is the ability to cache RDDs in memory. This allows you to run iterative algorithms up to 100x faster than using the typical Hadoop based map-reduce framework! It has to be remarked though
 that this feature is purely optional. Spark works flawlessly without caching, albeit slower. In fact in a&nbsp;<a target="_blank" href="https://databricks.com/blog/2014/10/10/spark-petabyte-sort.html">recent benchmark</a>&nbsp;Spark was able to sort 1PB of data 3X faster
 using 10X fewer machines than Hadoop, without using the in-memory cache.</p>
<p><strong>Setup</strong></p>
<p style="text-align:justify">A Spark cluster can run in standalone mode or on top of&nbsp;<a target="_blank" href="http://hadoop.apache.org/docs/current/hadoop-yarn/hadoop-yarn-site/YARN.html">YARN</a>&nbsp;or&nbsp;<a target="_blank" href="http://mesos.apache.org/">Mesos</a>.
 To the very least for a cluster you will need some sort of distributed filesystem, e.g. HDFS or NFS. But the easiest way to play with it though is to run Spark locally, i.e. on OSX:</p>
<pre class="brush: bash; title: ; notranslate" title="">brew install spark
spark-shell --master &quot;local[*]&quot;

</pre>
<p style="text-align:justify">The above commands start a Scala shell with a local Spark context. If you are more inclined to run a real cluster, the easiest way to get you going is to launch an<a target="_blank" href="https://aws.amazon.com/articles/4926593393724923">EMR
 cluster on AWS</a>:</p>
<pre class="brush: bash; title: ; notranslate" title="">aws emr create-cluster --name SparkCluster --ami-version 3.3 --instance-type m3.xlarge \
  --instance-count 5 --ec2-attributes KeyName=vitillo --applications Name=Hive \
  --bootstrap-actions Path=s3://support.elasticmapreduce/spark/install-spark

</pre>
<p style="text-align:justify">Then, once connected to the master node, launch Spark on YARN:</p>
<pre class="brush: bash; title: ; notranslate" title="">yarn-client /home/hadoop/spark/bin/spark-shell --num-executors 4 --executor-cores 8 \
  --executor-memory 8g —driver-memory 8g

</pre>
<p style="text-align:justify">The parameters of the executors (aka worker nodes) should obviously be tailored to the kind of instances you launched. It’s imperative to spend some time understanding and tuning the&nbsp;<a target="_blank" href="http://spark.apache.org/docs/latest/configuration.html">configuration
 options</a>&nbsp;as Spark doesn’t automagically do it for you.</p>
<p><strong>Now what?</strong></p>
<p style="text-align:justify">Time for some real code. Since Spark makes it so easy to write distributed analyses, the bar for a Hello World application should be consequently be much higher. Let’s write then a simple, albeit functional, Recommender Engine
 for Firefox add-ons.</p>
<p style="text-align:justify">In order to do that, let’s first go over quickly the math involved. It turns out that given a matrix of the rankings of each user for each add-on, the problem of finding a good recommendation can be reduced to matrix factorization
 problem:</p>
<p><a target="_blank" href="https://ravitillo.files.wordpress.com/2014/11/factorization.png"><img class="aligncenter wp-image-712 size-full" src="https://ravitillo.files.wordpress.com/2014/11/factorization.png?w=1120" alt="factorization"></a></p>
<p style="text-align:justify">The model maps both users and add-ons to a joint latent factor space of dimensionality&nbsp;<img src="http://s0.wp.com/latex.php?latex=F&amp;bg=ffffff&amp;fg=444444&amp;s=0" alt="F" title="F" class="latex">. Both users and add-ons are thus seen
 as vectors in that space. The factors express latent characteristics of add-ons, e.g. if a an add-on is related to security or to UI customization. The ratings are then modeled as inner products in that space, which is proportional to the angle of the two
 vectors. The closer the characteristics of an add-on align to the preferences of the user in the latent factor space, the higher the rating.</p>
<p style="text-align:justify">But wait, Firefox users don’t really rate add-ons. In fact the only information we have in Telemetry is binary: either a user has a certain add-on installed or he hasn’t. Let’s assume that if someone has a certain add-on installed,
 he probably likes that add-on. That’s not true in all cases and a more significant metric like “usage time” or similar should be used.</p>
<p style="text-align:justify">I am not going to delve into the details, but having binary ratings changes the underlying model slightly from the conceptual one we have just seen. The interested reader should read this&nbsp;<a target="_blank" href="http://ieeexplore.ieee.org/xpl/articleDetails.jsp?arnumber=4781121">paper</a>.&nbsp;<a target="_blank" href="https://spark.apache.org/docs/latest/mllib-guide.html">Mllib</a>,
 a machine learning library for Spark, comes out of the box with a distributed implementation of&nbsp;<a target="_blank" href="https://spark.apache.org/docs/latest/mllib-collaborative-filtering.html">ALS</a>&nbsp;which implements the factorization.</p>
<p><strong>Implementation</strong></p>
<p style="text-align:justify">Now that we have an idea of the theory, let’s have a look at how the implementation looks like in practice. Let’s start by initializing Spark:</p>
<pre class="brush: scala; title: ; notranslate" title="">val conf = new SparkConf().setAppName(&quot;AddonRecommender&quot;)
val sc = new SparkContext(conf)

</pre>
<p style="text-align:justify">As the ALS algorithm requires tuples of (user, addon, rating), let’s munge the data into place:</p>
<pre class="brush: scala; title: ; notranslate" title="">val ratings = sc.textFile(&quot;s3://mreid-test-src/split/&quot;).map(raw =&gt; {
&nbsp; val parsedPing = parse(raw.substring(37))
&nbsp; (parsedPing \ &quot;clientID&quot;, parsedPing \ &quot;addonDetails&quot; \ &quot;XPI&quot;)
}).filter{
&nbsp; // Remove sessions with missing id or add-on list
&nbsp; case (JNothing, _) =&gt; false
&nbsp; case (_, JNothing) =&gt; false
&nbsp; case (_, JObject(List())) =&gt; false
&nbsp; case _ =&gt; true
}.map{ case (id, xpi) =&gt; {
&nbsp; val addonList = xpi.children.
&nbsp;&nbsp;&nbsp; map(addon =&gt; addon \ &quot;name&quot;).
&nbsp;&nbsp;&nbsp; filter(addon =&gt; addon != JNothing &amp;&amp; addon != JString(&quot;Default&quot;))
&nbsp; (id, addonList)
}}.filter{ case (id, addonList) =&gt; {
&nbsp; // Remove sessions with empty add-on lists
&nbsp; !addonList.isEmpty
}}.flatMap{ case (id, addonList) =&gt; {
&nbsp; // Create add-on ratings for each user
&nbsp; addonList.map(addon =&gt; (id.extract[String], addon.extract[String], 1.0))
}}

</pre>
<p style="text-align:justify">Here we extract the add-on related data from our json Telemetry pings and filter out missing or invalid data. The&nbsp;<em>ratings</em>&nbsp;variable is a RDD and as you can see we used the distributed map, filter and flatMap operations
 on it. In fact it’s hard to tell apart vanilla Scala code from the distributed one.</p>
<p style="text-align:justify">As the current ALS implementation doesn’t accept strings for the user and add-on representations, we will have to convert them to numeric ones. A quick and dirty way of doing that is to hash the strings:</p>
<pre class="brush: scala; title: ; notranslate" title="">// Positive hash function
def hash(x: String) = x.hashCode &amp; 0x7FFFFF

val hashedRatings = ratings.map{ case(u, a, r) =&gt; (hash(u), hash(a), r) }.cache
val addonIDs = ratings.map(_._2).distinct.map(addon =&gt; (hash(addon), addon)).cache

</pre>
<p style="text-align:justify">We are nearly there. To avoid overfitting, ALS uses regularization, the strength of which is determined by a parameter&nbsp;<img src="http://s0.wp.com/latex.php?latex=%5Clambda&#43;&amp;bg=ffffff&amp;fg=444444&amp;s=0" alt="\lambda " title="\lambda " class="latex">.
 As we don’t know beforehand the optimal value of the parameter, we can try to find it by minimizing the mean squared error over a pre-defined grid of&nbsp;<img src="http://s0.wp.com/latex.php?latex=%5Clambda&#43;&amp;bg=ffffff&amp;fg=444444&amp;s=0" alt="\lambda " title="\lambda " class="latex">&nbsp;values
 using k-fold cross-validation.</p>
<pre class="brush: scala; title: ; notranslate" title="">// Use cross validation to find the optimal number of latent factors
val folds = MLUtils.kFold(hashedRatings, 10, 42)
val lambdas = List(0.1, 0.2, 0.3, 0.4, 0.5)
val iterations = 10
val factors = 100 // use as many factors as computationally possible

val factorErrors = lambdas.flatMap(lambda =&gt; {
&nbsp; folds.map{ case(train, test) =&gt;
&nbsp;&nbsp;&nbsp; val model = ALS.trainImplicit(train.map{ case(u, a, r) =&gt; Rating(u, a, r) }, factors, iterations, lambda, 1.0)
&nbsp;&nbsp;&nbsp; val usersAddons = test.map{ case (u, a, r) =&gt; (u, a) }
&nbsp;&nbsp;&nbsp; val predictions = model.predict(usersAddons).map{ case Rating(u, a, r) =&gt; ((u, a), r) }
&nbsp;&nbsp;&nbsp; val ratesAndPreds = test.map{ case (u, a, r) =&gt; ((u, a), r) }.join(predictions)
&nbsp;&nbsp;&nbsp; val rmse = sqrt(ratesAndPreds.map { case ((u, a), (r1, r2)) =&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; val err = (r1 - r2)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; err * err
&nbsp;&nbsp;&nbsp; }.mean)

&nbsp;&nbsp;&nbsp; (model, lambda, rmse)
&nbsp; }
}).groupBy(_._2)
&nbsp; .map{ case(k, v) =&gt; (k, v.map(_._3).reduce(_ &#43; _) / v.length) }

</pre>
<p style="text-align:justify">Finally, it’s just a matter of training ALS on the whole dataset with the optimal&nbsp;<img src="http://s0.wp.com/latex.php?latex=%5Clambda&amp;bg=ffffff&amp;fg=444444&amp;s=0" alt="\lambda" title="\lambda" class="latex">&nbsp;value and we are good
 to go to use the recommender:</p>
<pre class="brush: scala; title: ; notranslate" title="">// Train model with optimal number of factors on all available data
val model = ALS.trainImplicit(hashedRatings.map{case(u, a, r) =&gt; Rating(u, a, r)}, factors, iterations, optimalLambda._1, 1.0)

def recommend(userID: Int) = {
&nbsp; val predictions = model.predict(addonIDs.map(addonID =&gt; (userID, addonID._1)))
&nbsp; val top = predictions.top(10)(Ordering.by[Rating,Double](_.rating))
&nbsp; top.map(r =&gt; (addonIDs.lookup(r.product)(0), r.rating))
}

recommend(hash(&quot;UUID...&quot;))

</pre>
<p style="text-align:justify">I omitted some details but you can find the complete source on my&nbsp;<a target="_blank" href="https://github.com/vitillo/raccomando">github repository</a>.</p>
<p style="text-align:justify">To submit the packaged job to YARN run:</p>
<pre class="brush: bash; title: ; notranslate" title="">spark-submit --class AddonRecommender --master yarn-client --num-executors 4 \
  --executor-cores 8 --executor-memory 8g addon-recommender_2.10-1.0.jar

</pre>
<p><strong>So what?</strong></p>
<p style="text-align:justify">Question is, how well does it perform? The mean squared error isn’t really telling us much so let’s take some fictional user session and see what the recommender spits out.</p>
<p style="text-align:justify">For user A that has only the add-on Ghostery installed, the top recommendations are, in order:</p>
<ul>
<li>NoScript</li><li>Web of Trust</li><li>Symantec Vulnerability Protection</li><li>Better Privacy</li><li>LastPass</li><li>DuckDuckGo Plus</li><li>HTTPS-Everywhere</li><li>Lightbeam</li><li>Google Translator for Firefox</li></ul>
<p style="text-align:justify">One could argue that 1 out of 10 recommendations isn’t appropriate for a&nbsp;security aficionado. Now it’s the turn of user B who has only the Firebug add-on installed:</p>
<ul>
<li>Web Developer</li><li>FiddlerHook</li><li>Greasemonkey</li><li>ColorZilla</li><li>User Agent Switcher</li><li>McAfee</li><li>RealPlayer Browser Record Plugin</li><li>FirePHP</li><li>Session Manager</li></ul>
<p style="text-align:justify">There are just a couple of add-ons that don’t look that great but the rest could fit the profile of a developer. Now, considering that the recommender was trained only on a couple of days of data for Nightly, I feel like the result
 could easily be improved with more data and tuning, like filtering out known Antivirus, malware and bloatware.</p>
</div>

            <div>
                作者：xiao_jun_0820 发表于2015/7/21 15:04:14 <a href="http://blog.csdn.net/xiao_jun_0820/article/details/46986367">原文链接</a>
            </div>
            <div>
            阅读：39 评论：0 <a href="http://blog.csdn.net/xiao_jun_0820/article/details/46986367#comments" target="_blank">查看评论</a>
            </div>
        ]]>
        </description>
        <category></category>
    </item>
    <item>
        <title><![CDATA[[原]这几天折腾spark的kafka的低阶API createDirectStream的一些总结。]]></title>
        <link>http://blog.csdn.net/xiao_jun_0820/article/details/46911775</link>
        <guid>http://blog.csdn.net/xiao_jun_0820/article/details/46911775</guid>
        <author>xiao_jun_0820</author>
        <pubDate>2015/7/16 15:39:33</pubDate>
        <description><![CDATA[
            
<p>大家都知道在spark1.3版本后，kafkautil里面提供了两个创建dstream的方法，一个是老版本中有的<span style="font-family:宋体; font-size:12pt">createStream方法，还有一个是后面新加的</span><span style="font-family:宋体; font-size:12pt; background-color:rgb(228,228,255)">createDirectStream方法。关于这两个方法的优缺点，官方已经说的很详细(http://spark.apache.org/docs/latest/streaming-kafka-integration.html)，总之就是<span style="font-family:宋体; font-size:16px; background-color:rgb(228,228,255)">createDirectStream性能会更好一点，通过新方法创建出来的dstream的rdd
 partition和kafka的topic的partition是一一对应的，通过低阶API直接从kafka的topic消费消息，但是它不再往zookeeper中更新consumer offsets，使得基于zk的consumer offsets的监控工具都会失效。</span></span></p>
<p><span style="font-family:宋体"><span style="font-size:16px; background-color:rgb(228,228,255)">官方只是蜻蜓点水般的说了一下可以在foreachRDD中更新zookeeper上的offsets:</span></span></p>
<p><span style="font-family:宋体"><span style="font-size:16px; background-color:rgb(228,228,255)"></span></span></p>
<pre name="code" class="plain">directKafkaStream.foreachRDD { rdd =&gt; 
     val offsetRanges = rdd.asInstanceOf[HasOffsetRanges]
     // offsetRanges.length = # of Kafka partitions being consumed
     ...
 }</pre><br>
对应<span style="color:rgb(51,51,51); font-family:'Helvetica Neue',Helvetica,Arial,sans-serif; font-size:14px; line-height:20px">Exactly-once semantics要自己去实现了，大致的实现思路就是在driver启动的时候先从zk上获得consumer offsets信息，<span style="font-family:宋体; font-size:16px; background-color:rgb(228,228,255)">createDirectStream有两个重载方法，其中一个可以设置从任意offsets位置开始消费，部分代码如下：</span></span>
<p></p>
<p><span style="font-family:宋体"><span style="font-size:16px; background-color:rgb(228,228,255)"><span style="color:rgb(51,51,51); font-family:'Helvetica Neue',Helvetica,Arial,sans-serif; font-size:14px; line-height:20px"><span style="font-family:宋体; font-size:16px; background-color:rgb(228,228,255)"></span></span></span></span></p>
<pre name="code" class="plain">def createDirectStream(implicit streamingConfig: StreamingConfig, kc: KafkaCluster) = {

      val extractors = streamingConfig.getExtractors()
      //从zookeeper上读取offset开始消费message
      val messages = {
        val kafkaPartitionsE = kc.getPartitions(streamingConfig.topicSet)
        if (kafkaPartitionsE.isLeft) throw new SparkException(&quot;get kafka partition failed:&quot;)
        val kafkaPartitions = kafkaPartitionsE.right.get
        val consumerOffsetsE = kc.getConsumerOffsets(streamingConfig.group, kafkaPartitions)
        if (consumerOffsetsE.isLeft) throw new SparkException(&quot;get kafka consumer offsets failed:&quot;)
        val consumerOffsets = consumerOffsetsE.right.get
        consumerOffsets.foreach {
          case (tp, n) =&gt; println(&quot;===================================&quot; + tp.topic + &quot;,&quot; + tp.partition + &quot;,&quot; + n)
        }
        KafkaUtils.createDirectStream[String, String, StringDecoder, StringDecoder, (String, String)](
          ssc, kafkaParams, consumerOffsets, (mmd: MessageAndMetadata[String, String]) =&gt; (mmd.key, mmd.message))
      }
      messages
    }</pre><br>
这里会有几个问题，就是在一个group是新的consumer group时，即首次消费，zk上海没有相应的group offsets目录,这时要先初始化一下zk上的offsets目录，或者是zk上记录的offsets已经过时，由于kafka有定时清理策略，直接从zk上的offsets开始消费会报ArrayOutofRange异常，即找不到offsets所属的index文件了，针对这两种情况，做了以下处理：
<p></p>
<p><span style="font-family:宋体"><span style="font-size:16px; background-color:rgb(228,228,255)"><span style="color:rgb(51,51,51); font-family:'Helvetica Neue',Helvetica,Arial,sans-serif; font-size:14px; line-height:20px"><span style="font-family:宋体; font-size:16px; background-color:rgb(228,228,255)"></span></span></span></span></p>
<pre name="code" class="plain">def setOrUpdateOffsets(implicit streamingConfig: StreamingConfig, kc: KafkaCluster): Unit = {
    streamingConfig.topicSet.foreach(topic =&gt; {
      println(&quot;current topic:&quot; + topic)
      var hasConsumed = true
      val kafkaPartitionsE = kc.getPartitions(Set(topic))
      if (kafkaPartitionsE.isLeft) throw new SparkException(&quot;get kafka partition failed:&quot;)
      val kafkaPartitions = kafkaPartitionsE.right.get
      val consumerOffsetsE = kc.getConsumerOffsets(streamingConfig.group, kafkaPartitions)
      if (consumerOffsetsE.isLeft) hasConsumed = false
      if (hasConsumed) {
        //如果有消费过，有两种可能，如果streaming程序执行的时候出现kafka.common.OffsetOutOfRangeException，说明zk上保存的offsets已经过时了，即kafka的定时清理策略已经将包含该offsets的文件删除。
        //针对这种情况，只要判断一下zk上的consumerOffsets和leaderEarliestOffsets的大小，如果consumerOffsets比leaderEarliestOffsets还小的话，说明是过时的offsets,这时把leaderEarliestOffsets更新为consumerOffsets
        val leaderEarliestOffsets = kc.getEarliestLeaderOffsets(kafkaPartitions).right.get
        println(leaderEarliestOffsets)
        val consumerOffsets = consumerOffsetsE.right.get
        val flag = consumerOffsets.forall {
          case (tp, n) =&gt; n &lt; leaderEarliestOffsets(tp).offset
        }
        if (flag) {
          println(&quot;consumer group:&quot; + streamingConfig.group + &quot; offsets已经过时，更新为leaderEarliestOffsets&quot;)
          val offsets = leaderEarliestOffsets.map {
            case (tp, offset) =&gt; (tp, offset.offset)
          }
          kc.setConsumerOffsets(streamingConfig.group, offsets)
        }
        else {
          println(&quot;consumer group:&quot; + streamingConfig.group + &quot; offsets正常，无需更新&quot;)
        }
      }
      else {
        //如果没有被消费过，则从最新的offset开始消费。
        val leaderLatestOffsets = kc.getLatestLeaderOffsets(kafkaPartitions).right.get
        println(leaderLatestOffsets)
        println(&quot;consumer group:&quot; + streamingConfig.group + &quot; 还未消费过，更新为leaderLatestOffsets&quot;)
        val offsets = leaderLatestOffsets.map {
          case (tp, offset) =&gt; (tp, offset.offset)
        }
        kc.setConsumerOffsets(streamingConfig.group, offsets)
      }
    })
  }</pre>这里又碰到了一个问题，从consumer offsets到leader latest offsets中间延迟了很多消息，在下一次启动的时候，首个batch要处理大量的消息，会导致spark-submit设置的资源无法满足大量消息的处理而导致崩溃。因此在spark-submit启动的时候多加了一个配置:--conf spark.streaming.kafka.maxRatePerPartition=10000。限制每秒钟从topic的每个partition最多消费的消息条数，这样就把首个batch的大量的消息拆分到多个batch中去了，为了更快的消化掉delay的消息，可以调大计算资源和把这个参数调大。<br>
<br>
<p></p>
<p><span style="font-family:宋体"><span style="font-size:16px; background-color:rgb(228,228,255)"><span style="color:rgb(51,51,51); font-family:'Helvetica Neue',Helvetica,Arial,sans-serif; font-size:14px; line-height:20px"><span style="font-family:宋体; font-size:16px; background-color:rgb(228,228,255)">OK，driver启动的问题解决了，那么接下来处理处理完消息后更新zk
 offsets的工作，这里要注意是在处理完之后再更新，想想如果你消费了消息先更新zk offset在去处理消息将处理好的消息保存到其他地方去，如果后一步由于处理消息的代码有BUG失败了，前一步已经更新了zk了，会导致这部分消息虽然被消费了但是没被处理，等你把处理消息的BUG修复再重新提交后，这部分消息在下次启动的时候不会再被消费了，因为你已经更新了ZK OFFSETS，针对这些因素考虑，部分代码实现如下：</span></span></span></span></p>
<p><span style="font-family:宋体"><span style="font-size:16px; background-color:rgb(228,228,255)"><span style="color:rgb(51,51,51); font-family:'Helvetica Neue',Helvetica,Arial,sans-serif; font-size:14px; line-height:20px"><span style="font-family:宋体; font-size:16px; background-color:rgb(228,228,255)"></span></span></span></span></p>
<pre name="code" class="plain">def updateZKOffsets(rdd: RDD[(String, String)])(implicit streamingConfig: StreamingConfig, kc: KafkaCluster): Unit = {
    println(&quot;rdd not empty,update zk offset&quot;)
    val offsetsList = rdd.asInstanceOf[HasOffsetRanges].offsetRanges


    for (offsets &lt;- offsetsList) {
      val topicAndPartition = TopicAndPartition(offsets.topic, offsets.partition)
      val o = kc.setConsumerOffsets(streamingConfig.group, Map((topicAndPartition, offsets.untilOffset)))
      if (o.isLeft) {
        println(s&quot;Error updating the offset to Kafka cluster: ${o.left.get}&quot;)
      }
    }
  }

  def processData(messages: InputDStream[(String, String)])(implicit streamingConfig: StreamingConfig, kc: KafkaCluster): Unit = {
    messages.foreachRDD(rdd =&gt; {
      if (!rdd.isEmpty()) {

        val datamodelRDD = streamingConfig.relation match {
          case &quot;1&quot; =&gt;
            val (topic, _) = streamingConfig.topic_table_mapping
            val extractor = streamingConfig.getExtractor(topic)
            // Create direct kafka stream with brokers and topics
            val topicsSet = Set(topic)
            val datamodel = rdd.filter(msg =&gt; {
              extractor.filter(msg)
            }).map(msg =&gt; extractor.msgToRow(msg))
            datamodel
          case &quot;2&quot; =&gt;
            val (topics, _) = streamingConfig.topic_table_mapping
            val extractors = streamingConfig.getExtractors(topics)
            val topicsSet = topics.split(&quot;,&quot;).toSet

            //kafka msg为key-value形式,key用来对msg进行分区用的,为了散列存储消息,采集器那边key采用的是:topic|加一个随机数的形式,例如:rd_e_pal|20,split by |取0可以拿到对应的topic名字,这样union在一起的消息可以区分出来自哪一个topic
            val datamodel = rdd.filter(msg =&gt; {
              //kafka msg为key-value形式,key用来对msg进行分区用的,为了散列存储消息,采集器那边key采用的是:topic|加一个随机数的形式,例如:rd_e_pal|20,split by |取0可以拿到对应的topic名字,这样union在一起的消息可以区分出来自哪一个topic
              val keyValid = msg != null &amp;&amp; msg._1 != null &amp;&amp; msg._1.split(&quot;\\|&quot;).length == 2
              if (keyValid) {
                val topic = msg._1.split(&quot;\\|&quot;)(0)
                val (_, extractor) = extractors.find(p =&gt; {
                  p._1.equalsIgnoreCase(topic)
                }).getOrElse(throw new RuntimeException(&quot;配置文件中没有找到topic:&quot; + topic + &quot; 对应的extractor&quot;))
                //trim去掉末尾的换行符,否则取最后一个字段时会有一个\n
                extractor.filter(msg._2.trim)
              }
              else {
                false
              }

            }).map {
              case (key, msgContent) =&gt;
                val topic = key.split(&quot;\\|&quot;)(0)
                val (_, extractor) = extractors.find(p =&gt; {
                  p._1.equalsIgnoreCase(topic)
                }).getOrElse(throw new RuntimeException(&quot;配置文件中没有找到topic:&quot; + topic + &quot; 对应的extractor&quot;))
                extractor.msgToRow((key, msgContent))
            }
            datamodel
        }
        //先处理消息
        processRDD(datamodelRDD)
        //再更新offsets
        updateZKOffsets(rdd)
      }
    })
  }

  def processRDD(rdd: RDD[Row])(implicit streamingConfig: StreamingConfig) = {
    if (streamingConfig.targetType == &quot;mongo&quot;) {
      val target = streamingConfig.getTarget().asInstanceOf[MongoTarget]
      if (!MongoDBClient.db.collectionExists(target.collection)) {
        println(&quot;create collection:&quot; + target.collection)
        MongoDBClient.db.createCollection(target.collection, MongoDBObject(&quot;storageEngine&quot; -&gt; MongoDBObject(&quot;wiredTiger&quot; -&gt; MongoDBObject())))
        val coll = MongoDBClient.db(target.collection)
        //创建ttl index
        if (target.ttlIndex) {
          val indexs = coll.getIndexInfo
          if (indexs.find(p =&gt; p.get(&quot;name&quot;) == &quot;ttlIndex&quot;) == None) {
            coll.createIndex(MongoDBObject(target.ttlColumn -&gt; 1), MongoDBObject(&quot;expireAfterSeconds&quot; -&gt; target.ttlExpire, &quot;name&quot; -&gt; &quot;ttlIndex&quot;))
          }
        }
      }

    }

    val (_, table) = streamingConfig.topic_table_mapping
    val schema = streamingConfig.getTableSchema(table)

    // Get the singleton instance of SQLContext
    val sqlContext = HIVEContextSingleton.getInstance(rdd.sparkContext)

    // Convert RDD[String] to RDD[case class] to DataFrame
    val dataFrame = sqlContext.createDataFrame(rdd, schema)

    // Register as table
    dataFrame.registerTempTable(table)

    // Do word count on table using SQL and print it
    val results = sqlContext.sql(streamingConfig.sql)
    //select dt,hh(vtm) as hr,app_key, collect_set(device_id) as deviceids  from rd_e_app_header where dt=20150401 and hh(vtm)=&#39;01&#39; group by dt,hh(vtm),app_key limit 100 ;
    //          results.show()
    streamingConfig.targetType match {
      case &quot;mongo&quot; =&gt; saveToMongo(results)
      case &quot;show&quot; =&gt; results.show()
    }

  }


  def saveToMongo(df: DataFrame)(implicit streamingConfig: StreamingConfig) = {
    val target = streamingConfig.getTarget().asInstanceOf[MongoTarget]
    val coll = MongoDBClient.db(target.collection)
    val result = df.collect()
    if (result.size &gt; 0) {
      val bulkWrite = coll.initializeUnorderedBulkOperation
      result.foreach(row =&gt; {
        val id = row(target.pkIndex)
        val setFields = target.columns.filter(p =&gt; p.op == &quot;set&quot;).map(f =&gt; (f.name, row(f.index))).toArray
        val incFields = target.columns.filter(p =&gt; p.op == &quot;inc&quot;).map(f =&gt; {
          (f.name, row(f.index).asInstanceOf[Long])
        }).toArray
        //        obj=obj.++($addToSet(MongoDBObject(&quot;test&quot;-&gt;MongoDBObject(&quot;$each&quot;-&gt;Array(3,4)),&quot;test1&quot;-&gt;MongoDBObject(&quot;$each&quot;-&gt;Array(1,2)))))
        var obj = MongoDBObject()
        var addToSetObj = MongoDBObject()
        target.columns.filter(p =&gt; p.op == &quot;addToSet&quot;).foreach(col =&gt; {
          col.mType match {
            case &quot;Int&quot; =&gt;
              addToSetObj = addToSetObj.++(col.name -&gt; MongoDBObject(&quot;$each&quot; -&gt; row(col.index).asInstanceOf[ArrayBuffer[Int]]))
            case &quot;Long&quot; =&gt;
              addToSetObj = addToSetObj.++(col.name -&gt; MongoDBObject(&quot;$each&quot; -&gt; row(col.index).asInstanceOf[ArrayBuffer[Long]]))
            case &quot;String&quot; =&gt;
              addToSetObj = addToSetObj.++(col.name -&gt; MongoDBObject(&quot;$each&quot; -&gt; row(col.index).asInstanceOf[ArrayBuffer[String]]))
          }

        })
        if (addToSetObj.size &gt; 0) obj = obj.++($addToSet(addToSetObj))
        if (incFields.size &gt; 0) obj = obj.++($inc(incFields: _*))
        if (setFields.size &gt; 0) obj = obj.++($set(setFields: _*))
        bulkWrite.find(MongoDBObject(&quot;_id&quot; -&gt; id)).upsert().updateOne(obj)
      })
      bulkWrite.execute()
    }
  }</pre><br>
仔细想一想，还是没有实现精确一次的语义，写入mongo和更新ZK由于不是一个事务的，如果更新mongo成功，然后更新ZK失败，则下次启动的时候这个批次的数据就被重复计算，对于UV由于是addToSet去重操作，没什么影响，但是PV是inc操作就会多算这一个批次的的数据，其实如果batch time比较短的话，其实都还是可以接受的。<br>
<p></p>
<span style="font-family:宋体; font-size:12pt; background-color:rgb(228,228,255)"></span>

            <div>
                作者：xiao_jun_0820 发表于2015/7/16 15:39:33 <a href="http://blog.csdn.net/xiao_jun_0820/article/details/46911775">原文链接</a>
            </div>
            <div>
            阅读：381 评论：1 <a href="http://blog.csdn.net/xiao_jun_0820/article/details/46911775#comments" target="_blank">查看评论</a>
            </div>
        ]]>
        </description>
        <category></category>
    </item>
    <item>
        <title><![CDATA[[原]scala 解析json字符串]]></title>
        <link>http://blog.csdn.net/xiao_jun_0820/article/details/46911579</link>
        <guid>http://blog.csdn.net/xiao_jun_0820/article/details/46911579</guid>
        <author>xiao_jun_0820</author>
        <pubDate>2015/7/16 14:39:45</pubDate>
        <description><![CDATA[
            
scala中自带了一个
<p style="font-family:宋体; font-size:12pt; background-color:rgb(255,255,255)"><span style="background-color:#e4e4ff">scala</span>.util.parsing.json.JSON</p>
<p style="font-family:宋体; font-size:12pt"><span style="background-color:rgb(228,228,255)">然后可以通过JSON.parseFull(jsonString:String)来解析一个json字符串，如果解析成功的话则返回一个Some(map: Map[String, Any])，如果解析失败的话返回None。</span></p>
<p style="font-family:宋体; font-size:12pt"><span style="background-color:rgb(228,228,255)">所以我们可以通过模式匹配来处理解析结果：</span></p>
<p style="font-family:宋体; font-size:12pt"><span style="background-color:rgb(228,228,255)"></span></p>
<pre style="font-family:宋体; font-size:12pt; background-color:rgb(255,255,255)"><pre name="code" class="plain">    val str2 = &quot;{\&quot;et\&quot;:\&quot;kanqiu_client_join\&quot;,\&quot;vtm\&quot;:1435898329434,\&quot;body\&quot;:{\&quot;client\&quot;:\&quot;866963024862254\&quot;,\&quot;client_type\&quot;:\&quot;android\&quot;,\&quot;room\&quot;:\&quot;NBA_HOME\&quot;,\&quot;gid\&quot;:\&quot;\&quot;,\&quot;type\&quot;:\&quot;\&quot;,\&quot;roomid\&quot;:\&quot;\&quot;},\&quot;time\&quot;:1435898329}&quot;

    val b = JSON.parseFull(str2)
    b match {
      // Matches if jsonStr is valid JSON and represents a Map of Strings to Any
      case Some(map: Map[String, Any]) =&gt; println(map)
      case None =&gt; println(&quot;Parsing failed&quot;)
      case other =&gt; println(&quot;Unknown data structure: &quot; + other)
    }</pre><br><br></pre>
<p></p>

            <div>
                作者：xiao_jun_0820 发表于2015/7/16 14:39:45 <a href="http://blog.csdn.net/xiao_jun_0820/article/details/46911579">原文链接</a>
            </div>
            <div>
            阅读：301 评论：0 <a href="http://blog.csdn.net/xiao_jun_0820/article/details/46911579#comments" target="_blank">查看评论</a>
            </div>
        ]]>
        </description>
        <category></category>
    </item>
    <item>
        <title><![CDATA[[原]kafka新的producer api使用]]></title>
        <link>http://blog.csdn.net/xiao_jun_0820/article/details/46831203</link>
        <guid>http://blog.csdn.net/xiao_jun_0820/article/details/46831203</guid>
        <author>xiao_jun_0820</author>
        <pubDate>2015/7/10 15:17:52</pubDate>
        <description><![CDATA[
            
<pre name="code" class="plain">package com.hupu.dace.spark.streaming

import java.util.Properties

import com.hupu.dace.hbaserestful.util.HdfsUtil
import DaceFunctions._
import org.apache.kafka.clients.producer.{KafkaProducer, ProducerConfig, ProducerRecord}

/**
 * Created by xiaojun on 2015/5/20.
 */
object PalPVUVProducer {
  def main(args: Array[String]) {
    if (args.length &lt; 2) {
      System.err.println(&quot;Usage: PVUVProducer &lt;metadataBrokerList&gt; &lt;topic&gt; &quot;)
      System.exit(1)
    }

    val Array(brokers, topicName, _*) = args

    // Zookeper connection properties
    val props = new Properties()
    (2 until args.length).foreach(i =&gt; {
      val pieces = args(i).split(&quot;=&quot;)
      if (pieces.length != 2) throw new IllegalArgumentException(&quot;Invalid property: &quot; + args(i))
      props.put(pieces(0), pieces(1))
    })

    props.put(&quot;metadata.broker.list&quot;, brokers)
    //props.put(&quot;serializer.class&quot;, &quot;kafka.serializer.StringEncoder&quot;)
    props.put(&quot;serializer.class&quot;, &quot;org.apache.kafka.common.serialization.ByteArraySerializer&quot;)
    //props.put(&quot;bootstrap.servers&quot;, brokers)
    props.put(ProducerConfig.KEY_SERIALIZER_CLASS_CONFIG, &quot;org.apache.kafka.common.serialization.ByteArraySerializer&quot;)
    props.put(ProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG, &quot;org.apache.kafka.common.serialization.ByteArraySerializer&quot;)
    val producer: KafkaProducer[Array[Byte], Array[Byte]] = new KafkaProducer[Array[Byte], Array[Byte]](props)
    val lines = HdfsUtil.getString(&quot;/user/hive/warehouse/rd_e_pal/dt=20150312/hr=03/rd_e_pal.20150312.03-230&quot;).split(&quot;\n&quot;).filter(line =&gt; {
      val l = line.split(&quot;\001&quot;)
      l.length &gt;= 31 &amp;&amp; l(4).matches( &quot;&quot;&quot;\d+&quot;&quot;&quot;) &amp;&amp; filter(l(5)) == &quot;i&quot; &amp;&amp; filter(l(11)) != &quot;\\N&quot; &amp;&amp; filter(l(11)) != null
    })
    val lines2 = HdfsUtil.getString(&quot;/user/hive/warehouse/rd_e_pal/dt=20150312/hr=03/rd_e_pal.20150312.03-231&quot;).split(&quot;\n&quot;).filter(line =&gt; {
      val l = line.split(&quot;\001&quot;)
      l.length &gt;= 31 &amp;&amp; l(4).matches( &quot;&quot;&quot;\d+&quot;&quot;&quot;) &amp;&amp; filter(l(5)) == &quot;i&quot; &amp;&amp; filter(l(11)) != &quot;\\N&quot; &amp;&amp; filter(l(11)) != null
    })
    val start = System.currentTimeMillis()
    (1 to 1).foreach(n =&gt; {
      lines.foreach(line =&gt; {
        val record = new ProducerRecord[Array[Byte], Array[Byte]](topicName, line.getBytes())
        producer.send(record)
      })
      lines2.foreach(line =&gt; {
        val record = new ProducerRecord[Array[Byte], Array[Byte]](topicName, line.getBytes())
        producer.send(record)
      })
    })
    println(&quot;---------cost:&quot; + (System.currentTimeMillis() - start))
    producer.close()

  }
}

</pre>kafka 8.2.1新版API是异步写的,效率非常高.

            <div>
                作者：xiao_jun_0820 发表于2015/7/10 15:17:52 <a href="http://blog.csdn.net/xiao_jun_0820/article/details/46831203">原文链接</a>
            </div>
            <div>
            阅读：90 评论：0 <a href="http://blog.csdn.net/xiao_jun_0820/article/details/46831203#comments" target="_blank">查看评论</a>
            </div>
        ]]>
        </description>
        <category></category>
    </item>
    <item>
        <title><![CDATA[[原]zookeeper browser 工具]]></title>
        <link>http://blog.csdn.net/xiao_jun_0820/article/details/46791463</link>
        <guid>http://blog.csdn.net/xiao_jun_0820/article/details/46791463</guid>
        <author>xiao_jun_0820</author>
        <pubDate>2015/7/7 16:50:51</pubDate>
        <description><![CDATA[
            
<p>可以用来浏览zookeeper上的节点和数据</p>
<p><a target="_blank" href="https://issues.apache.org/jira/secure/attachment/12436620/ZooInspector.zip" style="">https://issues.apache.org/jira/secure/attachment/12436620/ZooInspector.zip</a></p>

            <div>
                作者：xiao_jun_0820 发表于2015/7/7 16:50:51 <a href="http://blog.csdn.net/xiao_jun_0820/article/details/46791463">原文链接</a>
            </div>
            <div>
            阅读：40 评论：0 <a href="http://blog.csdn.net/xiao_jun_0820/article/details/46791463#comments" target="_blank">查看评论</a>
            </div>
        ]]>
        </description>
        <category></category>
    </item>
    <item>
        <title><![CDATA[[原]shell同步目录]]></title>
        <link>http://blog.csdn.net/xiao_jun_0820/article/details/46789491</link>
        <guid>http://blog.csdn.net/xiao_jun_0820/article/details/46789491</guid>
        <author>xiao_jun_0820</author>
        <pubDate>2015/7/7 15:04:56</pubDate>
        <description><![CDATA[
            
<p>n1上更新了/opt/spark目录下面的内容，同步到n2,n3,n4上去</p>
<p>同步目录</p>
<p>rsync -varcl --exclude=logs /opt/spark /opt/spark-1.4.0-bin-cdh5.3.0 root@n2:/opt</p>
rsync -varcl --exclude=logs /opt/spark /opt/spark-1.4.0-bin-cdh5.3.0 root@n3:/opt<br>
rsync -varcl --exclude=logs /opt/spark /opt/spark-1.4.0-bin-cdh5.3.0 root@n4:/opt

            <div>
                作者：xiao_jun_0820 发表于2015/7/7 15:04:56 <a href="http://blog.csdn.net/xiao_jun_0820/article/details/46789491">原文链接</a>
            </div>
            <div>
            阅读：38 评论：0 <a href="http://blog.csdn.net/xiao_jun_0820/article/details/46789491#comments" target="_blank">查看评论</a>
            </div>
        ]]>
        </description>
        <category></category>
    </item>
    <item>
        <title><![CDATA[[原]spark1.4.0基于yarn的安装心得体会]]></title>
        <link>http://blog.csdn.net/xiao_jun_0820/article/details/46561097</link>
        <guid>http://blog.csdn.net/xiao_jun_0820/article/details/46561097</guid>
        <author>xiao_jun_0820</author>
        <pubDate>2015/6/19 14:58:26</pubDate>
        <description><![CDATA[
            
<p>目前线上用的是cdh5.3.2中内嵌的spark1.2.0版本，该版本BUG还是蛮多的，尤其是一些spark sql的BUG，简直不能忍。spark1.4.0新出的支持SparkR,其他用R的同时很期待试用该版本看看sparkR好不好用，于是乎打算升级一下spark的版本。</p>
<p>以前都是在cloudera manager中一件安装的spark,感觉好轻松愉快，现在要独立安装一个基于yarn的spark版本，还是有点挑战的。</p>
<p>下面记录了一下安装步骤（基于cdh5.3.2的独立安装spark1.4.0）：</p>
<p><br>
</p>
<p>编译指定hadoop版本的spark,源码目录下面有一个make-distribution.sh: &nbsp; &nbsp;<br>
./make-distribution.sh --name cdh5.3.0 --skip-java-test --tgz -Pyarn -Dhadoop.version=2.5.0-cdh5.3.0 &nbsp;-Dscala-2.10.4 -Phive -Phive-thriftserver<br>
编译完成后，在源码目录下会生成一个spark-1.4.0-bin-cdh5.3.0.tgz<br>
随便选择一个集群的节点（注意，其实只需要部署一台机器就行了，不需要所有都部署，这就是spark on yarn的好处啊。。。不然你装standlong模式的spark集群就辛苦了。）</p>
<p>将安装包解压到/opt下面：<br>
cd /opt &nbsp; &nbsp;<br>
hadoop fs -get /user/hdfs/tmp/spark-1.4.0-bin-cdh5.3.0.tgz<br>
tar zxvf spark-1.4.0-bin-cdh5.3.0.tgz<br>
在conf目录下面创建spark-env.sh和spark-default.conf配置文件:<br>
cp spark-env.sh.template spark-env.sh<br>
cp spark-defaults.conf.template spark-defaults.conf<br>
&nbsp;<br>
&nbsp;<br>
&nbsp;vi spark-env.sh,最下面添加一行：<br>
&nbsp;export HADOOP_CONF_DIR=/opt/cloudera/parcels/CDH/lib/hive/conf<br>
&nbsp;<br>
&nbsp;vi spark-defaults.conf,添加如下内容：<br>
&nbsp;spark.eventLog.dir=hdfs://n1:8020/user/spark/applicationHistory2<br>
spark.eventLog.enabled=true<br>
spark.yarn.jar=hdfs://n1:8020/user/spark/share/lib/spark-assembly-1.4.0-hadoop2.5.0-cdh5.3.0.jar<br>
spark.scheduler.mode=FAIR<br>
spark.scheduler.allocation.file=/etc/spark/fairscheduler.xml<br>
spark.serializer=org.apache.spark.serializer.KryoSerializer<br>
spark.shuffle.consolidateFiles=true<br>
spark.sql.shuffle.partitions=100<br>
spark.driver.userClassPathFirst=true<br>
spark.streaming.blockInterval=100<br>
spark.cleaner.ttl=90000<br>
spark.yarn.historyServer.address=http://n2:18088<br>
spark.driver.extraLibraryPath=/opt/cloudera/parcels/CDH-5.3.0-1.cdh5.3.0.p0.30/lib/hadoop/lib/native<br>
spark.executor.extraLibraryPath=/opt/cloudera/parcels/CDH-5.3.0-1.cdh5.3.0.p0.30/lib/hadoop/lib/native<br>
&nbsp;<br>
&nbsp;自己写了一个wordcount程序，打了个jar包叫sparkdemo.jar<br>
&nbsp;<br>
&nbsp;hadoop fs -get /user/spark/share/lib/sparkdemo.jar<br>
&nbsp;yarn-client模式提交<br>
&nbsp;./bin/spark-submit --driver-class-path lib/spark-assembly-1.4.0-hadoop2.5.0-cdh5.3.0.jar --class com.hupu.dace.spark.WordCount &nbsp; &nbsp; --master yarn-client --proxy-user hdfs --num-executors 3 &nbsp; &nbsp; --driver-memory 4g &nbsp; &nbsp; --executor-memory 2g &nbsp; &nbsp; --executor-cores
 1 &nbsp; &nbsp; lib/sparkdemo.jar /tmp/xiaojun/input /tmp/xiaojun/output<br>
yarn-cluster模式提交<br>
./bin/spark-submit --driver-class-path lib/spark-assembly-1.4.0-hadoop2.5.0-cdh5.3.0.jar --class com.hupu.dace.spark.WordCount &nbsp; &nbsp; --master yarn-cluster --proxy-user hdfs --num-executors 3 &nbsp; &nbsp; --driver-memory 4g &nbsp; &nbsp; --executor-memory 2g &nbsp; &nbsp; --executor-cores
 1 &nbsp; &nbsp; lib/sparkdemo.jar /tmp/xiaojun/input /tmp/xiaojun/output</p>
<p><br>
</p>
<p><br>
</p>
<p>这里还有一个问题没解决，就是yarn的historyServer 18088端口还是没法访问，但是可以访问spark自己的historyServer,是18080端口.</p>
<p>如何启动historyServer?首先在HDFS上创建一个目录:/user/spark/applicationHistory2,授权所有用户和组都能访问，即777.</p>
<p>然后再spark安装目录下面有一个sbin目录，下面有一个start-history-server.sh，启动命令如下：<br>
./start-history-server.sh hdfs://n1:8020/user/spark/applicationHistory2</p>
<p>停止则为./stop-history-server.sh</p>
<p><br>
</p>
<p>sparkR启动脚本，支持hive:<br>
bin/sparkR --jars lib/spark-assembly-1.4.0-hadoop2.5.0-cdh5.3.0.jar --conf spark.sql.hive.metastore.jars=lib/spark-assembly-1.4.0-hadoop2.5.0-cdh5.3.0.jar --master yarn-client<br>
<br>
</p>

            <div>
                作者：xiao_jun_0820 发表于2015/6/19 14:58:26 <a href="http://blog.csdn.net/xiao_jun_0820/article/details/46561097">原文链接</a>
            </div>
            <div>
            阅读：1851 评论：0 <a href="http://blog.csdn.net/xiao_jun_0820/article/details/46561097#comments" target="_blank">查看评论</a>
            </div>
        ]]>
        </description>
        <category></category>
    </item>
    <item>
        <title><![CDATA[[原]不错的一个菜鸟学习sitemap，内容很全。]]></title>
        <link>http://blog.csdn.net/xiao_jun_0820/article/details/46414357</link>
        <guid>http://blog.csdn.net/xiao_jun_0820/article/details/46414357</guid>
        <author>xiao_jun_0820</author>
        <pubDate>2015/6/8 16:22:15</pubDate>
        <description><![CDATA[
            
标记一下： &nbsp; &nbsp;http://www.w3cschool.cc/sitemap

            <div>
                作者：xiao_jun_0820 发表于2015/6/8 16:22:15 <a href="http://blog.csdn.net/xiao_jun_0820/article/details/46414357">原文链接</a>
            </div>
            <div>
            阅读：77 评论：0 <a href="http://blog.csdn.net/xiao_jun_0820/article/details/46414357#comments" target="_blank">查看评论</a>
            </div>
        ]]>
        </description>
        <category></category>
    </item>
    <item>
        <title><![CDATA[[原]spark streaming实现状态可恢复的wordcount计算程序]]></title>
        <link>http://blog.csdn.net/xiao_jun_0820/article/details/45971887</link>
        <guid>http://blog.csdn.net/xiao_jun_0820/article/details/45971887</guid>
        <author>xiao_jun_0820</author>
        <pubDate>2015/5/25 17:40:50</pubDate>
        <description><![CDATA[
            
<p>在spark streaming examples的源代码中有相关的两个示例程序,一个是可恢复的wordcount程序:RecoverableNetworkWordCount.scala,还一个是有状态的wordcount程序:StatefulNetworkWordCount.scala.关于有状态的wordcount程序如何从失败中恢复,却没有相关的example示例代码.于是我将这两个示例代码整合了一下,实现了一个有状态的可恢复的wordcount程序,当你停止程序重新启动后,会接着上次的状态继续对单词计数.</p>
<p>代码如下:</p>
<p><pre name="code" class="plain">package com.hupu.dace.spark.streaming

import org.apache.spark.SparkConf
import org.apache.spark.streaming.StreamingContext._
import org.apache.spark.streaming.{Seconds, StreamingContext}


/**
 * Created by xiaojun on 2015/5/25.
 */
object MyRecoverableNetworkWordCount {
  def createContext(ip: String, port: Int, checkpointDirectory: String) = {

    // If you do not see this printed, that means the StreamingContext has been loaded
    // from the new checkpoint
    println(&quot;Creating new context&quot;)
    val sparkConf = new SparkConf().setAppName(&quot;RecoverableNetworkWordCount&quot;)
    // Create the context with a 1 second batch size
    val ssc = new StreamingContext(sparkConf, Seconds(2))
    ssc.checkpoint(checkpointDirectory)

    val updateFunc = (values: Seq[Int], state: Option[Int]) =&gt; {
      val currentCount = values.sum

      val previousCount = state.getOrElse(0)

      Some(currentCount + previousCount)
    }
    // Create a ReceiverInputDStream on target ip:port and count the
    // words in input stream of \n delimited test (eg. generated by &#39;nc&#39;)
    val lines = ssc.socketTextStream(ip, port)
    val words = lines.flatMap(_.split(&quot; &quot;))
    val wordDstream = words.map(x =&gt; (x, 1))

    // Update the cumulative count using updateStateByKey
    // This will give a Dstream made of state (which is the cumulative count of the words)
    val stateDstream = wordDstream.updateStateByKey[Int](updateFunc)
    stateDstream.print()
    ssc
  }

  def main(args: Array[String]) {
    if (args.length != 3) {
      System.err.println(&quot;You arguments were &quot; + args.mkString(&quot;[&quot;, &quot;, &quot;, &quot;]&quot;))
      System.err.println(
        &quot;&quot;&quot;
          |Usage: RecoverableNetworkWordCount &lt;hostname&gt; &lt;port&gt; &lt;checkpoint-directory&gt;
          |     . &lt;hostname&gt; and &lt;port&gt; describe the TCP server that Spark
          |     Streaming would connect to receive data. &lt;checkpoint-directory&gt; directory to
          |     HDFS-compatible file system which checkpoint data &lt;output-file&gt; file to which the
          |     word counts will be appended
          |
          |In local mode, &lt;master&gt; should be &#39;local[n]&#39; with n &gt; 1
          |Both &lt;checkpoint-directory&gt; and &lt;output-file&gt; must be absolute paths
        &quot;&quot;&quot;.stripMargin
      )
      System.exit(1)
    }

    val Array(ip, IntParam(port), checkpointDirectory) = args
    val ssc = StreamingContext.getOrCreate(checkpointDirectory,
      () =&gt; {
        createContext(ip, port, checkpointDirectory)
      })
    ssc.start()
    ssc.awaitTermination()
  }
}
//extractor
private object IntParam {
  def unapply(str: String): Option[Int] = {
    try {
      Some(str.toInt)
    } catch {
      case e: NumberFormatException =&gt; None
    }
  }
}
</pre>如何测试?</p>
<p>把代码打成一个JAR包,比如我打的叫sparkdemo.jar,上传到集群某个节点上去.</p>
<p>在shell命令行执行:nc -lk 9999开启一个linux自带的简易socket消息程序</p>
<p>然后启动spark streaming程序:</p>
<p>spark-submit&nbsp;--class&nbsp;com.hupu.dace.spark.streaming.MyRecoverableNetworkWordCount&nbsp;--master&nbsp;local[4]&nbsp;sparkdemo.jar&nbsp;n1&nbsp;9999&nbsp;cp3&nbsp;</p>
<p>MyRecoverableNetworkWordCount 有三个参数需要传递: host port checkpointdir, &nbsp; &nbsp;host 和port根据自己的节点来填写,checkpoint名字可以随便填,我这用的是相对路径,会在提交JOB的当前用户的HDFS目录下面创建一个cp3的文件夹.</p>
<p>然后可以在消息程序中随便输入点words,可以看到spark streaming程序输出对应的word counts信息.然后我们把streaming程序停掉来模拟driver挂掉的情况,重新提交一下,会惊喜的发现上次count的结果可以恢复回来.<br>
<br>
</p>

            <div>
                作者：xiao_jun_0820 发表于2015/5/25 17:40:50 <a href="http://blog.csdn.net/xiao_jun_0820/article/details/45971887">原文链接</a>
            </div>
            <div>
            阅读：223 评论：0 <a href="http://blog.csdn.net/xiao_jun_0820/article/details/45971887#comments" target="_blank">查看评论</a>
            </div>
        ]]>
        </description>
        <category></category>
    </item>
    <item>
        <title><![CDATA[[转]Spark自定义分区(Partitioner)]]></title>
        <link>http://blog.csdn.net/xiao_jun_0820/article/details/45913745</link>
        <guid>http://blog.csdn.net/xiao_jun_0820/article/details/45913745</guid>
        <author>xiao_jun_0820</author>
        <pubDate>2015/5/22 10:10:27</pubDate>
        <description><![CDATA[
            
<p style="margin-top:0px; margin-bottom:15px; font-family:'Microsoft Yahei','Helvetica Neue',Helvetica,Arial,sans-serif; font-size:15px; line-height:26px">
转自：http://www.iteblog.com/archives/1368</p>
<p style="margin-top:0px; margin-bottom:15px; font-family:'Microsoft Yahei','Helvetica Neue',Helvetica,Arial,sans-serif; font-size:15px; line-height:26px">
我们都知道<span class="wp_keywordlink_affiliate"><a target="_blank" href="http://www.iteblog.com/archives/tag/spark" title="" target="_blank" style="color:rgb(0,166,124); text-decoration:none">Spark</a></span>内部提供了<code style="padding:2px 4px; color:rgb(221,17,68); font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:1px solid rgb(225,225,232); white-space:nowrap; font-size:14px; background-color:rgb(251,251,251)">HashPartitioner</code>和<code style="padding:2px 4px; color:rgb(221,17,68); font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:1px solid rgb(225,225,232); white-space:nowrap; font-size:14px; background-color:rgb(251,251,251)">RangePartitioner</code>两种分区策略，这两种分区策略在很多情况下都适合我们的场景。但是有些情况下，<span class="wp_keywordlink_affiliate"><a target="_blank" href="http://www.iteblog.com/archives/tag/spark" title="" target="_blank" style="color:rgb(0,166,124); text-decoration:none">Spark</a></span>内部不能符合咱们的需求，这时候我们就可以自定义分区策略。为此，<span class="wp_keywordlink_affiliate"><a target="_blank" href="http://www.iteblog.com/archives/tag/spark" title="" target="_blank" style="color:rgb(0,166,124); text-decoration:none">Spark</a></span>提供了相应的接口，我们只需要扩展<code style="padding:2px 4px; color:rgb(221,17,68); font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:1px solid rgb(225,225,232); white-space:nowrap; font-size:14px; background-color:rgb(251,251,251)">Partitioner</code>抽象类，然后实现里面的三个方法：</p>
<div id="highlighter_667687" class="syntaxhighlighter  " style="width:807.828125px; font-size:15px; margin:1em 0px!important; padding:0px!important; border:1px solid rgb(224,224,224)!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:relative!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; direction:ltr!important">
<div class="lines" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<div class="line alt1" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important">
<table style="border-spacing:0px; font-size:1em!important; border:0px!important; width:auto!important; margin:0px!important; padding:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.2em!important; direction:ltr!important; border-collapse:collapse!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="border:0px!important; padding:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(7,81,154)!important; background:none!important">
<code style="color:rgb(221,17,68); white-space:nowrap; padding:0px 0.3em 0px 0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; direction:ltr!important; display:block!important; background:none!important">01</code></td>
<td class="content" style="margin:0px!important; border-width:0px 0px 0px 3px!important; padding:0px 0px 0px 0.5em!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background:none!important">
<code class="keyword" style="white-space:nowrap; padding:0px!important; color:rgb(0,102,153)!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-weight:bold!important; direction:ltr!important; display:inline!important; background:none!important">package</code>&nbsp;<code class="plain" style="white-space:nowrap; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">org.apache.spark</code></td>
</tr>
</tbody>
</table>
</div>
<div class="line alt2" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none rgb(248,248,248)!important">
<table style="border-spacing:0px; font-size:1em!important; border:0px!important; width:auto!important; margin:0px!important; padding:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.2em!important; direction:ltr!important; border-collapse:collapse!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="border:0px!important; padding:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(7,81,154)!important; background:none!important">
<code style="color:rgb(221,17,68); white-space:nowrap; padding:0px 0.3em 0px 0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; direction:ltr!important; display:block!important; background:none!important">02</code></td>
<td class="content" style="margin:0px!important; border-width:0px 0px 0px 3px!important; padding:0px 0px 0px 0.5em!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background:none!important">
&nbsp;</td>
</tr>
</tbody>
</table>
</div>
<div class="line alt1" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important">
<table style="border-spacing:0px; font-size:1em!important; border:0px!important; width:auto!important; margin:0px!important; padding:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.2em!important; direction:ltr!important; border-collapse:collapse!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="border:0px!important; padding:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(7,81,154)!important; background:none!important">
<code style="color:rgb(221,17,68); white-space:nowrap; padding:0px 0.3em 0px 0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; direction:ltr!important; display:block!important; background:none!important">03</code></td>
<td class="content" style="margin:0px!important; border-width:0px 0px 0px 3px!important; padding:0px 0px 0px 0.5em!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background:none!important">
<code class="comments" style="white-space:nowrap; padding:0px!important; color:rgb(0,130,0)!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">/**</code></td>
</tr>
</tbody>
</table>
</div>
<div class="line alt2" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none rgb(248,248,248)!important">
<table style="border-spacing:0px; font-size:1em!important; border:0px!important; width:auto!important; margin:0px!important; padding:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.2em!important; direction:ltr!important; border-collapse:collapse!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="border:0px!important; padding:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(7,81,154)!important; background:none!important">
<code style="color:rgb(221,17,68); white-space:nowrap; padding:0px 0.3em 0px 0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; direction:ltr!important; display:block!important; background:none!important">04</code></td>
<td class="content" style="margin:0px!important; border-width:0px 0px 0px 3px!important; padding:0px 0px 0px 0.5em!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background:none!important">
<code class="spaces" style="color:rgb(221,17,68); white-space:nowrap; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">&nbsp;</code><code class="comments" style="white-space:nowrap; padding:0px!important; color:rgb(0,130,0)!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">*
 An object that defines how the elements in a key-value pair RDD are partitioned by key.</code></td>
</tr>
</tbody>
</table>
</div>
<div class="line alt1" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important">
<table style="border-spacing:0px; font-size:1em!important; border:0px!important; width:auto!important; margin:0px!important; padding:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.2em!important; direction:ltr!important; border-collapse:collapse!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="border:0px!important; padding:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(7,81,154)!important; background:none!important">
<code style="color:rgb(221,17,68); white-space:nowrap; padding:0px 0.3em 0px 0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; direction:ltr!important; display:block!important; background:none!important">05</code></td>
<td class="content" style="margin:0px!important; border-width:0px 0px 0px 3px!important; padding:0px 0px 0px 0.5em!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background:none!important">
<code class="spaces" style="color:rgb(221,17,68); white-space:nowrap; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">&nbsp;</code><code class="comments" style="white-space:nowrap; padding:0px!important; color:rgb(0,130,0)!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">*
 Maps each key to a partition ID, from 0 to `numPartitions - 1`.</code></td>
</tr>
</tbody>
</table>
</div>
<div class="line alt2" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none rgb(248,248,248)!important">
<table style="border-spacing:0px; font-size:1em!important; border:0px!important; width:auto!important; margin:0px!important; padding:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.2em!important; direction:ltr!important; border-collapse:collapse!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="border:0px!important; padding:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(7,81,154)!important; background:none!important">
<code style="color:rgb(221,17,68); white-space:nowrap; padding:0px 0.3em 0px 0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; direction:ltr!important; display:block!important; background:none!important">06</code></td>
<td class="content" style="margin:0px!important; border-width:0px 0px 0px 3px!important; padding:0px 0px 0px 0.5em!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background:none!important">
<code class="spaces" style="color:rgb(221,17,68); white-space:nowrap; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">&nbsp;</code><code class="comments" style="white-space:nowrap; padding:0px!important; color:rgb(0,130,0)!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">*/</code></td>
</tr>
</tbody>
</table>
</div>
<div class="line alt1" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important">
<table style="border-spacing:0px; font-size:1em!important; border:0px!important; width:auto!important; margin:0px!important; padding:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.2em!important; direction:ltr!important; border-collapse:collapse!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="border:0px!important; padding:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(7,81,154)!important; background:none!important">
<code style="color:rgb(221,17,68); white-space:nowrap; padding:0px 0.3em 0px 0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; direction:ltr!important; display:block!important; background:none!important">07</code></td>
<td class="content" style="margin:0px!important; border-width:0px 0px 0px 3px!important; padding:0px 0px 0px 0.5em!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background:none!important">
<code class="keyword" style="white-space:nowrap; padding:0px!important; color:rgb(0,102,153)!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-weight:bold!important; direction:ltr!important; display:inline!important; background:none!important">abstract</code>&nbsp;<code class="keyword" style="white-space:nowrap; padding:0px!important; color:rgb(0,102,153)!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-weight:bold!important; direction:ltr!important; display:inline!important; background:none!important">class</code>&nbsp;<code class="plain" style="white-space:nowrap; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">Partitioner&nbsp;</code><code class="keyword" style="white-space:nowrap; padding:0px!important; color:rgb(0,102,153)!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-weight:bold!important; direction:ltr!important; display:inline!important; background:none!important">extends</code>&nbsp;<code class="plain" style="white-space:nowrap; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">Serializable
 {</code></td>
</tr>
</tbody>
</table>
</div>
<div class="line alt2" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none rgb(248,248,248)!important">
<table style="border-spacing:0px; font-size:1em!important; border:0px!important; width:auto!important; margin:0px!important; padding:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.2em!important; direction:ltr!important; border-collapse:collapse!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="border:0px!important; padding:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(7,81,154)!important; background:none!important">
<code style="color:rgb(221,17,68); white-space:nowrap; padding:0px 0.3em 0px 0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; direction:ltr!important; display:block!important; background:none!important">08</code></td>
<td class="content" style="margin:0px!important; border-width:0px 0px 0px 3px!important; padding:0px 0px 0px 0.5em!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background:none!important">
<code class="spaces" style="color:rgb(221,17,68); white-space:nowrap; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">&nbsp;&nbsp;</code><code class="keyword" style="white-space:nowrap; padding:0px!important; color:rgb(0,102,153)!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-weight:bold!important; direction:ltr!important; display:inline!important; background:none!important">def</code>&nbsp;<code class="plain" style="white-space:nowrap; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">numPartitions</code><code class="keyword" style="white-space:nowrap; padding:0px!important; color:rgb(0,102,153)!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-weight:bold!important; direction:ltr!important; display:inline!important; background:none!important">:</code>&nbsp;<code class="plain" style="white-space:nowrap; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">Int</code></td>
</tr>
</tbody>
</table>
</div>
<div class="line alt1" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important">
<table style="border-spacing:0px; font-size:1em!important; border:0px!important; width:auto!important; margin:0px!important; padding:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.2em!important; direction:ltr!important; border-collapse:collapse!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="border:0px!important; padding:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(7,81,154)!important; background:none!important">
<code style="color:rgb(221,17,68); white-space:nowrap; padding:0px 0.3em 0px 0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; direction:ltr!important; display:block!important; background:none!important">09</code></td>
<td class="content" style="margin:0px!important; border-width:0px 0px 0px 3px!important; padding:0px 0px 0px 0.5em!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background:none!important">
<code class="spaces" style="color:rgb(221,17,68); white-space:nowrap; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">&nbsp;&nbsp;</code><code class="keyword" style="white-space:nowrap; padding:0px!important; color:rgb(0,102,153)!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-weight:bold!important; direction:ltr!important; display:inline!important; background:none!important">def</code>&nbsp;<code class="plain" style="white-space:nowrap; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">getPartition(key</code><code class="keyword" style="white-space:nowrap; padding:0px!important; color:rgb(0,102,153)!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-weight:bold!important; direction:ltr!important; display:inline!important; background:none!important">:</code>&nbsp;<code class="plain" style="white-space:nowrap; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">Any)</code><code class="keyword" style="white-space:nowrap; padding:0px!important; color:rgb(0,102,153)!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-weight:bold!important; direction:ltr!important; display:inline!important; background:none!important">:</code>&nbsp;<code class="plain" style="white-space:nowrap; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">Int</code></td>
</tr>
</tbody>
</table>
</div>
<div class="line alt2" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none rgb(248,248,248)!important">
<table style="border-spacing:0px; font-size:1em!important; border:0px!important; width:auto!important; margin:0px!important; padding:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.2em!important; direction:ltr!important; border-collapse:collapse!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="border:0px!important; padding:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(7,81,154)!important; background:none!important">
<code style="color:rgb(221,17,68); white-space:nowrap; padding:0px 0.3em 0px 0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; direction:ltr!important; display:block!important; background:none!important">10</code></td>
<td class="content" style="margin:0px!important; border-width:0px 0px 0px 3px!important; padding:0px 0px 0px 0.5em!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background:none!important">
<code class="plain" style="white-space:nowrap; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">}</code></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p style="margin-top:0px; margin-bottom:15px; font-family:'Microsoft Yahei','Helvetica Neue',Helvetica,Arial,sans-serif; font-size:15px; line-height:26px">
　　<code style="padding:2px 4px; color:rgb(221,17,68); font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:1px solid rgb(225,225,232); white-space:nowrap; font-size:14px; background-color:rgb(251,251,251)">def numPartitions:
 Int</code>：这个方法需要返回你想要创建分区的个数；<br>
　　<code style="padding:2px 4px; color:rgb(221,17,68); font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:1px solid rgb(225,225,232); white-space:nowrap; font-size:14px; background-color:rgb(251,251,251)">def getPartition(key:
 Any): Int</code>：这个函数需要对输入的key做计算，然后返回该key的分区ID，范围一定是0到<code style="padding:2px 4px; color:rgb(221,17,68); font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:1px solid rgb(225,225,232); white-space:nowrap; font-size:14px; background-color:rgb(251,251,251)">numPartitions-1</code>；<br>
　　<code style="padding:2px 4px; color:rgb(221,17,68); font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:1px solid rgb(225,225,232); white-space:nowrap; font-size:14px; background-color:rgb(251,251,251)">equals()</code>：这个是Java标准的判断相等的函数，之所以要求用户实现这个函数是因为Spark内部会比较两个RDD的分区是否一样。</p>
<p style="margin-top:0px; margin-bottom:15px; font-family:'Microsoft Yahei','Helvetica Neue',Helvetica,Arial,sans-serif; font-size:15px; line-height:26px">
　　假如我们想把来自同一个域名的URL放到一台节点上，比如:<code style="padding:2px 4px; color:rgb(221,17,68); font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:1px solid rgb(225,225,232); white-space:nowrap; font-size:14px; background-color:rgb(251,251,251)"><a target="_blank" title="" href="http://www.iteblog.com/" target="_blank" style="color:rgb(0,166,124); text-decoration:none">http://www.iteblog.com</a></code>和<code style="padding:2px 4px; color:rgb(221,17,68); font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:1px solid rgb(225,225,232); white-space:nowrap; font-size:14px; background-color:rgb(251,251,251)"><a target="_blank" title="" href="http://www.iteblog.com/archives/1368" target="_blank" style="color:rgb(0,166,124); text-decoration:none">http://www.iteblog.com/archives/1368</a></code>，如果你使用<code style="padding:2px 4px; color:rgb(221,17,68); font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:1px solid rgb(225,225,232); white-space:nowrap; font-size:14px; background-color:rgb(251,251,251)">HashPartitioner</code>，这两个URL的Hash&#20540;可能不一样，这就使得这两个URL被放到不同的节点上。所以这种情况下我们就需要自定义我们的分区策略，可以如下实现：</p>
<div id="highlighter_325454" class="syntaxhighlighter  " style="width:807.828125px; font-size:15px; margin:1em 0px!important; padding:0px!important; border:1px solid rgb(224,224,224)!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:relative!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; direction:ltr!important">
<div class="lines" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<div class="line alt1" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important">
<table style="border-spacing:0px; font-size:1em!important; border:0px!important; width:auto!important; margin:0px!important; padding:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.2em!important; direction:ltr!important; border-collapse:collapse!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="border:0px!important; padding:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(7,81,154)!important; background:none!important">
<code style="color:rgb(221,17,68); white-space:nowrap; padding:0px 0.3em 0px 0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; direction:ltr!important; display:block!important; background:none!important">01</code></td>
<td class="content" style="margin:0px!important; border-width:0px 0px 0px 3px!important; padding:0px 0px 0px 0.5em!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background:none!important">
<code class="keyword" style="white-space:nowrap; padding:0px!important; color:rgb(0,102,153)!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-weight:bold!important; direction:ltr!important; display:inline!important; background:none!important">package</code>&nbsp;<code class="plain" style="white-space:nowrap; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">com.iteblog.utils</code></td>
</tr>
</tbody>
</table>
</div>
<div class="line alt2" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none rgb(248,248,248)!important">
<table style="border-spacing:0px; font-size:1em!important; border:0px!important; width:auto!important; margin:0px!important; padding:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.2em!important; direction:ltr!important; border-collapse:collapse!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="border:0px!important; padding:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(7,81,154)!important; background:none!important">
<code style="color:rgb(221,17,68); white-space:nowrap; padding:0px 0.3em 0px 0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; direction:ltr!important; display:block!important; background:none!important">02</code></td>
<td class="content" style="margin:0px!important; border-width:0px 0px 0px 3px!important; padding:0px 0px 0px 0.5em!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background:none!important">
&nbsp;</td>
</tr>
</tbody>
</table>
</div>
<div class="line alt1" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important">
<table style="border-spacing:0px; font-size:1em!important; border:0px!important; width:auto!important; margin:0px!important; padding:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.2em!important; direction:ltr!important; border-collapse:collapse!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="border:0px!important; padding:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(7,81,154)!important; background:none!important">
<code style="color:rgb(221,17,68); white-space:nowrap; padding:0px 0.3em 0px 0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; direction:ltr!important; display:block!important; background:none!important">03</code></td>
<td class="content" style="margin:0px!important; border-width:0px 0px 0px 3px!important; padding:0px 0px 0px 0.5em!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background:none!important">
<code class="keyword" style="white-space:nowrap; padding:0px!important; color:rgb(0,102,153)!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-weight:bold!important; direction:ltr!important; display:inline!important; background:none!important">import</code>&nbsp;<code class="plain" style="white-space:nowrap; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">org.apache.spark.Partitioner</code></td>
</tr>
</tbody>
</table>
</div>
<div class="line alt2" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none rgb(248,248,248)!important">
<table style="border-spacing:0px; font-size:1em!important; border:0px!important; width:auto!important; margin:0px!important; padding:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.2em!important; direction:ltr!important; border-collapse:collapse!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="border:0px!important; padding:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(7,81,154)!important; background:none!important">
<code style="color:rgb(221,17,68); white-space:nowrap; padding:0px 0.3em 0px 0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; direction:ltr!important; display:block!important; background:none!important">04</code></td>
<td class="content" style="margin:0px!important; border-width:0px 0px 0px 3px!important; padding:0px 0px 0px 0.5em!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background:none!important">
&nbsp;</td>
</tr>
</tbody>
</table>
</div>
<div class="line alt1" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important">
<table style="border-spacing:0px; font-size:1em!important; border:0px!important; width:auto!important; margin:0px!important; padding:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.2em!important; direction:ltr!important; border-collapse:collapse!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="border:0px!important; padding:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(7,81,154)!important; background:none!important">
<code style="color:rgb(221,17,68); white-space:nowrap; padding:0px 0.3em 0px 0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; direction:ltr!important; display:block!important; background:none!important">05</code></td>
<td class="content" style="margin:0px!important; border-width:0px 0px 0px 3px!important; padding:0px 0px 0px 0.5em!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background:none!important">
<code class="comments" style="white-space:nowrap; padding:0px!important; color:rgb(0,130,0)!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">/**</code></td>
</tr>
</tbody>
</table>
</div>
<div class="line alt2" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none rgb(248,248,248)!important">
<table style="border-spacing:0px; font-size:1em!important; border:0px!important; width:auto!important; margin:0px!important; padding:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.2em!important; direction:ltr!important; border-collapse:collapse!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="border:0px!important; padding:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(7,81,154)!important; background:none!important">
<code style="color:rgb(221,17,68); white-space:nowrap; padding:0px 0.3em 0px 0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; direction:ltr!important; display:block!important; background:none!important">06</code></td>
<td class="content" style="margin:0px!important; border-width:0px 0px 0px 3px!important; padding:0px 0px 0px 0.5em!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background:none!important">
<code class="spaces" style="color:rgb(221,17,68); white-space:nowrap; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">&nbsp;</code><code class="comments" style="white-space:nowrap; padding:0px!important; color:rgb(0,130,0)!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">*
 User: 过往记忆</code></td>
</tr>
</tbody>
</table>
</div>
<div class="line alt1" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important">
<table style="border-spacing:0px; font-size:1em!important; border:0px!important; width:auto!important; margin:0px!important; padding:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.2em!important; direction:ltr!important; border-collapse:collapse!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="border:0px!important; padding:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(7,81,154)!important; background:none!important">
<code style="color:rgb(221,17,68); white-space:nowrap; padding:0px 0.3em 0px 0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; direction:ltr!important; display:block!important; background:none!important">07</code></td>
<td class="content" style="margin:0px!important; border-width:0px 0px 0px 3px!important; padding:0px 0px 0px 0.5em!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background:none!important">
<code class="spaces" style="color:rgb(221,17,68); white-space:nowrap; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">&nbsp;</code><code class="comments" style="white-space:nowrap; padding:0px!important; color:rgb(0,130,0)!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">*
 Date: 2015-05-21</code></td>
</tr>
</tbody>
</table>
</div>
<div class="line alt2" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none rgb(248,248,248)!important">
<table style="border-spacing:0px; font-size:1em!important; border:0px!important; width:auto!important; margin:0px!important; padding:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.2em!important; direction:ltr!important; border-collapse:collapse!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="border:0px!important; padding:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(7,81,154)!important; background:none!important">
<code style="color:rgb(221,17,68); white-space:nowrap; padding:0px 0.3em 0px 0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; direction:ltr!important; display:block!important; background:none!important">08</code></td>
<td class="content" style="margin:0px!important; border-width:0px 0px 0px 3px!important; padding:0px 0px 0px 0.5em!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background:none!important">
<code class="spaces" style="color:rgb(221,17,68); white-space:nowrap; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">&nbsp;</code><code class="comments" style="white-space:nowrap; padding:0px!important; color:rgb(0,130,0)!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">*
 Time: 下午23:34</code></td>
</tr>
</tbody>
</table>
</div>
<div class="line alt1" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important">
<table style="border-spacing:0px; font-size:1em!important; border:0px!important; width:auto!important; margin:0px!important; padding:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.2em!important; direction:ltr!important; border-collapse:collapse!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="border:0px!important; padding:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(7,81,154)!important; background:none!important">
<code style="color:rgb(221,17,68); white-space:nowrap; padding:0px 0.3em 0px 0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; direction:ltr!important; display:block!important; background:none!important">09</code></td>
<td class="content" style="margin:0px!important; border-width:0px 0px 0px 3px!important; padding:0px 0px 0px 0.5em!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background:none!important">
<code class="spaces" style="color:rgb(221,17,68); white-space:nowrap; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">&nbsp;</code><code class="comments" style="white-space:nowrap; padding:0px!important; color:rgb(0,130,0)!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">*
 bolg:&nbsp;<a target="_blank" href="http://www.iteblog.com/" style="color:rgb(0,130,0)!important; text-decoration:none">http://www.iteblog.com</a></code></td>
</tr>
</tbody>
</table>
</div>
<div class="line alt2" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none rgb(248,248,248)!important">
<table style="border-spacing:0px; font-size:1em!important; border:0px!important; width:auto!important; margin:0px!important; padding:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.2em!important; direction:ltr!important; border-collapse:collapse!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="border:0px!important; padding:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(7,81,154)!important; background:none!important">
<code style="color:rgb(221,17,68); white-space:nowrap; padding:0px 0.3em 0px 0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; direction:ltr!important; display:block!important; background:none!important">10</code></td>
<td class="content" style="margin:0px!important; border-width:0px 0px 0px 3px!important; padding:0px 0px 0px 0.5em!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background:none!important">
<code class="spaces" style="color:rgb(221,17,68); white-space:nowrap; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">&nbsp;</code><code class="comments" style="white-space:nowrap; padding:0px!important; color:rgb(0,130,0)!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">*
 本文地址：<a target="_blank" href="http://www.iteblog.com/archives/1368" style="color:rgb(0,130,0)!important; text-decoration:none">http://www.iteblog.com/archives/1368</a></code></td>
</tr>
</tbody>
</table>
</div>
<div class="line alt1" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important">
<table style="border-spacing:0px; font-size:1em!important; border:0px!important; width:auto!important; margin:0px!important; padding:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.2em!important; direction:ltr!important; border-collapse:collapse!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="border:0px!important; padding:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(7,81,154)!important; background:none!important">
<code style="color:rgb(221,17,68); white-space:nowrap; padding:0px 0.3em 0px 0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; direction:ltr!important; display:block!important; background:none!important">11</code></td>
<td class="content" style="margin:0px!important; border-width:0px 0px 0px 3px!important; padding:0px 0px 0px 0.5em!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background:none!important">
<code class="spaces" style="color:rgb(221,17,68); white-space:nowrap; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">&nbsp;</code><code class="comments" style="white-space:nowrap; padding:0px!important; color:rgb(0,130,0)!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">*
 过往记忆博客，专注于hadoop、hive、spark、shark、flume的技术博客，大量的干货</code></td>
</tr>
</tbody>
</table>
</div>
<div class="line alt2" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none rgb(248,248,248)!important">
<table style="border-spacing:0px; font-size:1em!important; border:0px!important; width:auto!important; margin:0px!important; padding:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.2em!important; direction:ltr!important; border-collapse:collapse!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="border:0px!important; padding:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(7,81,154)!important; background:none!important">
<code style="color:rgb(221,17,68); white-space:nowrap; padding:0px 0.3em 0px 0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; direction:ltr!important; display:block!important; background:none!important">12</code></td>
<td class="content" style="margin:0px!important; border-width:0px 0px 0px 3px!important; padding:0px 0px 0px 0.5em!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background:none!important">
<code class="spaces" style="color:rgb(221,17,68); white-space:nowrap; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">&nbsp;</code><code class="comments" style="white-space:nowrap; padding:0px!important; color:rgb(0,130,0)!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">*
 过往记忆博客微信公共帐号：iteblog_hadoop</code></td>
</tr>
</tbody>
</table>
</div>
<div class="line alt1" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important">
<table style="border-spacing:0px; font-size:1em!important; border:0px!important; width:auto!important; margin:0px!important; padding:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.2em!important; direction:ltr!important; border-collapse:collapse!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="border:0px!important; padding:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(7,81,154)!important; background:none!important">
<code style="color:rgb(221,17,68); white-space:nowrap; padding:0px 0.3em 0px 0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; direction:ltr!important; display:block!important; background:none!important">13</code></td>
<td class="content" style="margin:0px!important; border-width:0px 0px 0px 3px!important; padding:0px 0px 0px 0.5em!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background:none!important">
<code class="spaces" style="color:rgb(221,17,68); white-space:nowrap; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">&nbsp;</code><code class="comments" style="white-space:nowrap; padding:0px!important; color:rgb(0,130,0)!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">*/</code></td>
</tr>
</tbody>
</table>
</div>
<div class="line alt2" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none rgb(248,248,248)!important">
<table style="border-spacing:0px; font-size:1em!important; border:0px!important; width:auto!important; margin:0px!important; padding:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.2em!important; direction:ltr!important; border-collapse:collapse!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="border:0px!important; padding:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(7,81,154)!important; background:none!important">
<code style="color:rgb(221,17,68); white-space:nowrap; padding:0px 0.3em 0px 0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; direction:ltr!important; display:block!important; background:none!important">14</code></td>
<td class="content" style="margin:0px!important; border-width:0px 0px 0px 3px!important; padding:0px 0px 0px 0.5em!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background:none!important">
&nbsp;</td>
</tr>
</tbody>
</table>
</div>
<div class="line alt1" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important">
<table style="border-spacing:0px; font-size:1em!important; border:0px!important; width:auto!important; margin:0px!important; padding:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.2em!important; direction:ltr!important; border-collapse:collapse!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="border:0px!important; padding:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(7,81,154)!important; background:none!important">
<code style="color:rgb(221,17,68); white-space:nowrap; padding:0px 0.3em 0px 0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; direction:ltr!important; display:block!important; background:none!important">15</code></td>
<td class="content" style="margin:0px!important; border-width:0px 0px 0px 3px!important; padding:0px 0px 0px 0.5em!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background:none!important">
<code class="keyword" style="white-space:nowrap; padding:0px!important; color:rgb(0,102,153)!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-weight:bold!important; direction:ltr!important; display:inline!important; background:none!important">class</code>&nbsp;<code class="plain" style="white-space:nowrap; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">IteblogPartitioner(numParts</code><code class="keyword" style="white-space:nowrap; padding:0px!important; color:rgb(0,102,153)!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-weight:bold!important; direction:ltr!important; display:inline!important; background:none!important">:</code>&nbsp;<code class="plain" style="white-space:nowrap; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">Int)&nbsp;</code><code class="keyword" style="white-space:nowrap; padding:0px!important; color:rgb(0,102,153)!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-weight:bold!important; direction:ltr!important; display:inline!important; background:none!important">extends</code>&nbsp;<code class="plain" style="white-space:nowrap; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">Partitioner
 {</code></td>
</tr>
</tbody>
</table>
</div>
<div class="line alt2" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none rgb(248,248,248)!important">
<table style="border-spacing:0px; font-size:1em!important; border:0px!important; width:auto!important; margin:0px!important; padding:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.2em!important; direction:ltr!important; border-collapse:collapse!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="border:0px!important; padding:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(7,81,154)!important; background:none!important">
<code style="color:rgb(221,17,68); white-space:nowrap; padding:0px 0.3em 0px 0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; direction:ltr!important; display:block!important; background:none!important">16</code></td>
<td class="content" style="margin:0px!important; border-width:0px 0px 0px 3px!important; padding:0px 0px 0px 0.5em!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background:none!important">
<code class="spaces" style="color:rgb(221,17,68); white-space:nowrap; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">&nbsp;&nbsp;</code><code class="keyword" style="white-space:nowrap; padding:0px!important; color:rgb(0,102,153)!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-weight:bold!important; direction:ltr!important; display:inline!important; background:none!important">override</code>&nbsp;<code class="keyword" style="white-space:nowrap; padding:0px!important; color:rgb(0,102,153)!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-weight:bold!important; direction:ltr!important; display:inline!important; background:none!important">def</code>&nbsp;<code class="plain" style="white-space:nowrap; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">numPartitions</code><code class="keyword" style="white-space:nowrap; padding:0px!important; color:rgb(0,102,153)!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-weight:bold!important; direction:ltr!important; display:inline!important; background:none!important">:</code>&nbsp;<code class="plain" style="white-space:nowrap; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">Int&nbsp;</code><code class="keyword" style="white-space:nowrap; padding:0px!important; color:rgb(0,102,153)!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-weight:bold!important; direction:ltr!important; display:inline!important; background:none!important">=</code>&nbsp;<code class="plain" style="white-space:nowrap; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">numParts</code></td>
</tr>
</tbody>
</table>
</div>
<div class="line alt1" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important">
<table style="border-spacing:0px; font-size:1em!important; border:0px!important; width:auto!important; margin:0px!important; padding:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.2em!important; direction:ltr!important; border-collapse:collapse!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="border:0px!important; padding:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(7,81,154)!important; background:none!important">
<code style="color:rgb(221,17,68); white-space:nowrap; padding:0px 0.3em 0px 0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; direction:ltr!important; display:block!important; background:none!important">17</code></td>
<td class="content" style="margin:0px!important; border-width:0px 0px 0px 3px!important; padding:0px 0px 0px 0.5em!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background:none!important">
&nbsp;</td>
</tr>
</tbody>
</table>
</div>
<div class="line alt2" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none rgb(248,248,248)!important">
<table style="border-spacing:0px; font-size:1em!important; border:0px!important; width:auto!important; margin:0px!important; padding:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.2em!important; direction:ltr!important; border-collapse:collapse!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="border:0px!important; padding:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(7,81,154)!important; background:none!important">
<code style="color:rgb(221,17,68); white-space:nowrap; padding:0px 0.3em 0px 0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; direction:ltr!important; display:block!important; background:none!important">18</code></td>
<td class="content" style="margin:0px!important; border-width:0px 0px 0px 3px!important; padding:0px 0px 0px 0.5em!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background:none!important">
<code class="spaces" style="color:rgb(221,17,68); white-space:nowrap; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">&nbsp;&nbsp;</code><code class="keyword" style="white-space:nowrap; padding:0px!important; color:rgb(0,102,153)!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-weight:bold!important; direction:ltr!important; display:inline!important; background:none!important">override</code>&nbsp;<code class="keyword" style="white-space:nowrap; padding:0px!important; color:rgb(0,102,153)!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-weight:bold!important; direction:ltr!important; display:inline!important; background:none!important">def</code>&nbsp;<code class="plain" style="white-space:nowrap; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">getPartition(key</code><code class="keyword" style="white-space:nowrap; padding:0px!important; color:rgb(0,102,153)!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-weight:bold!important; direction:ltr!important; display:inline!important; background:none!important">:</code>&nbsp;<code class="plain" style="white-space:nowrap; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">Any)</code><code class="keyword" style="white-space:nowrap; padding:0px!important; color:rgb(0,102,153)!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-weight:bold!important; direction:ltr!important; display:inline!important; background:none!important">:</code>&nbsp;<code class="plain" style="white-space:nowrap; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">Int&nbsp;</code><code class="keyword" style="white-space:nowrap; padding:0px!important; color:rgb(0,102,153)!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-weight:bold!important; direction:ltr!important; display:inline!important; background:none!important">=</code>&nbsp;<code class="plain" style="white-space:nowrap; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">{</code></td>
</tr>
</tbody>
</table>
</div>
<div class="line alt1" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important">
<table style="border-spacing:0px; font-size:1em!important; border:0px!important; width:auto!important; margin:0px!important; padding:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.2em!important; direction:ltr!important; border-collapse:collapse!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="border:0px!important; padding:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(7,81,154)!important; background:none!important">
<code style="color:rgb(221,17,68); white-space:nowrap; padding:0px 0.3em 0px 0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; direction:ltr!important; display:block!important; background:none!important">19</code></td>
<td class="content" style="margin:0px!important; border-width:0px 0px 0px 3px!important; padding:0px 0px 0px 0.5em!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background:none!important">
<code class="spaces" style="color:rgb(221,17,68); white-space:nowrap; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword" style="white-space:nowrap; padding:0px!important; color:rgb(0,102,153)!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-weight:bold!important; direction:ltr!important; display:inline!important; background:none!important">val</code>&nbsp;<code class="plain" style="white-space:nowrap; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">domain&nbsp;</code><code class="keyword" style="white-space:nowrap; padding:0px!important; color:rgb(0,102,153)!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-weight:bold!important; direction:ltr!important; display:inline!important; background:none!important">=</code>&nbsp;<code class="keyword" style="white-space:nowrap; padding:0px!important; color:rgb(0,102,153)!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-weight:bold!important; direction:ltr!important; display:inline!important; background:none!important">new</code>&nbsp;<code class="plain" style="white-space:nowrap; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">java.net.URL(key.toString).getHost()</code></td>
</tr>
</tbody>
</table>
</div>
<div class="line alt2" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none rgb(248,248,248)!important">
<table style="border-spacing:0px; font-size:1em!important; border:0px!important; width:auto!important; margin:0px!important; padding:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.2em!important; direction:ltr!important; border-collapse:collapse!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="border:0px!important; padding:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(7,81,154)!important; background:none!important">
<code style="color:rgb(221,17,68); white-space:nowrap; padding:0px 0.3em 0px 0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; direction:ltr!important; display:block!important; background:none!important">20</code></td>
<td class="content" style="margin:0px!important; border-width:0px 0px 0px 3px!important; padding:0px 0px 0px 0.5em!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background:none!important">
<code class="spaces" style="color:rgb(221,17,68); white-space:nowrap; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword" style="white-space:nowrap; padding:0px!important; color:rgb(0,102,153)!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-weight:bold!important; direction:ltr!important; display:inline!important; background:none!important">val</code>&nbsp;<code class="plain" style="white-space:nowrap; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">code&nbsp;</code><code class="keyword" style="white-space:nowrap; padding:0px!important; color:rgb(0,102,153)!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-weight:bold!important; direction:ltr!important; display:inline!important; background:none!important">=</code>&nbsp;<code class="plain" style="white-space:nowrap; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">(domain.hashCode&nbsp;</code><code class="keyword" style="white-space:nowrap; padding:0px!important; color:rgb(0,102,153)!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-weight:bold!important; direction:ltr!important; display:inline!important; background:none!important">%</code>&nbsp;<code class="plain" style="white-space:nowrap; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">numPartitions)</code></td>
</tr>
</tbody>
</table>
</div>
<div class="line alt1" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important">
<table style="border-spacing:0px; font-size:1em!important; border:0px!important; width:auto!important; margin:0px!important; padding:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.2em!important; direction:ltr!important; border-collapse:collapse!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="border:0px!important; padding:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(7,81,154)!important; background:none!important">
<code style="color:rgb(221,17,68); white-space:nowrap; padding:0px 0.3em 0px 0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; direction:ltr!important; display:block!important; background:none!important">21</code></td>
<td class="content" style="margin:0px!important; border-width:0px 0px 0px 3px!important; padding:0px 0px 0px 0.5em!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background:none!important">
<code class="spaces" style="color:rgb(221,17,68); white-space:nowrap; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword" style="white-space:nowrap; padding:0px!important; color:rgb(0,102,153)!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-weight:bold!important; direction:ltr!important; display:inline!important; background:none!important">if</code>&nbsp;<code class="plain" style="white-space:nowrap; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">(code
 &lt;&nbsp;</code><code class="value" style="white-space:nowrap; padding:0px!important; color:rgb(0,153,0)!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">0</code><code class="plain" style="white-space:nowrap; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">)
 {</code></td>
</tr>
</tbody>
</table>
</div>
<div class="line alt2" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none rgb(248,248,248)!important">
<table style="border-spacing:0px; font-size:1em!important; border:0px!important; width:auto!important; margin:0px!important; padding:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.2em!important; direction:ltr!important; border-collapse:collapse!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="border:0px!important; padding:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(7,81,154)!important; background:none!important">
<code style="color:rgb(221,17,68); white-space:nowrap; padding:0px 0.3em 0px 0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; direction:ltr!important; display:block!important; background:none!important">22</code></td>
<td class="content" style="margin:0px!important; border-width:0px 0px 0px 3px!important; padding:0px 0px 0px 0.5em!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background:none!important">
<code class="spaces" style="color:rgb(221,17,68); white-space:nowrap; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain" style="white-space:nowrap; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">code
 &#43; numPartitions</code></td>
</tr>
</tbody>
</table>
</div>
<div class="line alt1" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important">
<table style="border-spacing:0px; font-size:1em!important; border:0px!important; width:auto!important; margin:0px!important; padding:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.2em!important; direction:ltr!important; border-collapse:collapse!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="border:0px!important; padding:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(7,81,154)!important; background:none!important">
<code style="color:rgb(221,17,68); white-space:nowrap; padding:0px 0.3em 0px 0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; direction:ltr!important; display:block!important; background:none!important">23</code></td>
<td class="content" style="margin:0px!important; border-width:0px 0px 0px 3px!important; padding:0px 0px 0px 0.5em!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background:none!important">
<code class="spaces" style="color:rgb(221,17,68); white-space:nowrap; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain" style="white-space:nowrap; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">}&nbsp;</code><code class="keyword" style="white-space:nowrap; padding:0px!important; color:rgb(0,102,153)!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-weight:bold!important; direction:ltr!important; display:inline!important; background:none!important">else</code>&nbsp;<code class="plain" style="white-space:nowrap; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">{</code></td>
</tr>
</tbody>
</table>
</div>
<div class="line alt2" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none rgb(248,248,248)!important">
<table style="border-spacing:0px; font-size:1em!important; border:0px!important; width:auto!important; margin:0px!important; padding:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.2em!important; direction:ltr!important; border-collapse:collapse!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="border:0px!important; padding:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(7,81,154)!important; background:none!important">
<code style="color:rgb(221,17,68); white-space:nowrap; padding:0px 0.3em 0px 0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; direction:ltr!important; display:block!important; background:none!important">24</code></td>
<td class="content" style="margin:0px!important; border-width:0px 0px 0px 3px!important; padding:0px 0px 0px 0.5em!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background:none!important">
<code class="spaces" style="color:rgb(221,17,68); white-space:nowrap; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain" style="white-space:nowrap; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">code</code></td>
</tr>
</tbody>
</table>
</div>
<div class="line alt1" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important">
<table style="border-spacing:0px; font-size:1em!important; border:0px!important; width:auto!important; margin:0px!important; padding:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.2em!important; direction:ltr!important; border-collapse:collapse!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="border:0px!important; padding:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(7,81,154)!important; background:none!important">
<code style="color:rgb(221,17,68); white-space:nowrap; padding:0px 0.3em 0px 0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; direction:ltr!important; display:block!important; background:none!important">25</code></td>
<td class="content" style="margin:0px!important; border-width:0px 0px 0px 3px!important; padding:0px 0px 0px 0.5em!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background:none!important">
<code class="spaces" style="color:rgb(221,17,68); white-space:nowrap; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain" style="white-space:nowrap; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">}</code></td>
</tr>
</tbody>
</table>
</div>
<div class="line alt2" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none rgb(248,248,248)!important">
<table style="border-spacing:0px; font-size:1em!important; border:0px!important; width:auto!important; margin:0px!important; padding:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.2em!important; direction:ltr!important; border-collapse:collapse!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="border:0px!important; padding:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(7,81,154)!important; background:none!important">
<code style="color:rgb(221,17,68); white-space:nowrap; padding:0px 0.3em 0px 0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; direction:ltr!important; display:block!important; background:none!important">26</code></td>
<td class="content" style="margin:0px!important; border-width:0px 0px 0px 3px!important; padding:0px 0px 0px 0.5em!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background:none!important">
<code class="spaces" style="color:rgb(221,17,68); white-space:nowrap; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">&nbsp;&nbsp;</code><code class="plain" style="white-space:nowrap; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">}</code></td>
</tr>
</tbody>
</table>
</div>
<div class="line alt1" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important">
<table style="border-spacing:0px; font-size:1em!important; border:0px!important; width:auto!important; margin:0px!important; padding:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.2em!important; direction:ltr!important; border-collapse:collapse!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="border:0px!important; padding:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(7,81,154)!important; background:none!important">
<code style="color:rgb(221,17,68); white-space:nowrap; padding:0px 0.3em 0px 0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; direction:ltr!important; display:block!important; background:none!important">27</code></td>
<td class="content" style="margin:0px!important; border-width:0px 0px 0px 3px!important; padding:0px 0px 0px 0.5em!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background:none!important">
&nbsp;</td>
</tr>
</tbody>
</table>
</div>
<div class="line alt2" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none rgb(248,248,248)!important">
<table style="border-spacing:0px; font-size:1em!important; border:0px!important; width:auto!important; margin:0px!important; padding:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.2em!important; direction:ltr!important; border-collapse:collapse!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="border:0px!important; padding:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(7,81,154)!important; background:none!important">
<code style="color:rgb(221,17,68); white-space:nowrap; padding:0px 0.3em 0px 0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; direction:ltr!important; display:block!important; background:none!important">28</code></td>
<td class="content" style="margin:0px!important; border-width:0px 0px 0px 3px!important; padding:0px 0px 0px 0.5em!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background:none!important">
<code class="spaces" style="color:rgb(221,17,68); white-space:nowrap; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">&nbsp;&nbsp;</code><code class="keyword" style="white-space:nowrap; padding:0px!important; color:rgb(0,102,153)!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-weight:bold!important; direction:ltr!important; display:inline!important; background:none!important">override</code>&nbsp;<code class="keyword" style="white-space:nowrap; padding:0px!important; color:rgb(0,102,153)!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-weight:bold!important; direction:ltr!important; display:inline!important; background:none!important">def</code>&nbsp;<code class="plain" style="white-space:nowrap; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">equals(other</code><code class="keyword" style="white-space:nowrap; padding:0px!important; color:rgb(0,102,153)!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-weight:bold!important; direction:ltr!important; display:inline!important; background:none!important">:</code>&nbsp;<code class="plain" style="white-space:nowrap; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">Any)</code><code class="keyword" style="white-space:nowrap; padding:0px!important; color:rgb(0,102,153)!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-weight:bold!important; direction:ltr!important; display:inline!important; background:none!important">:</code>&nbsp;<code class="plain" style="white-space:nowrap; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">Boolean&nbsp;</code><code class="keyword" style="white-space:nowrap; padding:0px!important; color:rgb(0,102,153)!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-weight:bold!important; direction:ltr!important; display:inline!important; background:none!important">=</code>&nbsp;<code class="plain" style="white-space:nowrap; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">other&nbsp;</code><code class="keyword" style="white-space:nowrap; padding:0px!important; color:rgb(0,102,153)!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-weight:bold!important; direction:ltr!important; display:inline!important; background:none!important">match</code>&nbsp;<code class="plain" style="white-space:nowrap; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">{</code></td>
</tr>
</tbody>
</table>
</div>
<div class="line alt1" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important">
<table style="border-spacing:0px; font-size:1em!important; border:0px!important; width:auto!important; margin:0px!important; padding:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.2em!important; direction:ltr!important; border-collapse:collapse!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="border:0px!important; padding:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(7,81,154)!important; background:none!important">
<code style="color:rgb(221,17,68); white-space:nowrap; padding:0px 0.3em 0px 0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; direction:ltr!important; display:block!important; background:none!important">29</code></td>
<td class="content" style="margin:0px!important; border-width:0px 0px 0px 3px!important; padding:0px 0px 0px 0.5em!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background:none!important">
<code class="spaces" style="color:rgb(221,17,68); white-space:nowrap; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword" style="white-space:nowrap; padding:0px!important; color:rgb(0,102,153)!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-weight:bold!important; direction:ltr!important; display:inline!important; background:none!important">case</code>&nbsp;<code class="plain" style="white-space:nowrap; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">iteblog</code><code class="keyword" style="white-space:nowrap; padding:0px!important; color:rgb(0,102,153)!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-weight:bold!important; direction:ltr!important; display:inline!important; background:none!important">:</code>&nbsp;<code class="plain" style="white-space:nowrap; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">IteblogPartitioner&nbsp;</code><code class="keyword" style="white-space:nowrap; padding:0px!important; color:rgb(0,102,153)!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-weight:bold!important; direction:ltr!important; display:inline!important; background:none!important">=</code><code class="plain" style="white-space:nowrap; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">&gt;</code></td>
</tr>
</tbody>
</table>
</div>
<div class="line alt2" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none rgb(248,248,248)!important">
<table style="border-spacing:0px; font-size:1em!important; border:0px!important; width:auto!important; margin:0px!important; padding:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.2em!important; direction:ltr!important; border-collapse:collapse!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="border:0px!important; padding:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(7,81,154)!important; background:none!important">
<code style="color:rgb(221,17,68); white-space:nowrap; padding:0px 0.3em 0px 0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; direction:ltr!important; display:block!important; background:none!important">30</code></td>
<td class="content" style="margin:0px!important; border-width:0px 0px 0px 3px!important; padding:0px 0px 0px 0.5em!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background:none!important">
<code class="spaces" style="color:rgb(221,17,68); white-space:nowrap; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain" style="white-space:nowrap; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">iteblog.numPartitions&nbsp;</code><code class="keyword" style="white-space:nowrap; padding:0px!important; color:rgb(0,102,153)!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-weight:bold!important; direction:ltr!important; display:inline!important; background:none!important">==</code>&nbsp;<code class="plain" style="white-space:nowrap; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">numPartitions</code></td>
</tr>
</tbody>
</table>
</div>
<div class="line alt1" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important">
<table style="border-spacing:0px; font-size:1em!important; border:0px!important; width:auto!important; margin:0px!important; padding:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.2em!important; direction:ltr!important; border-collapse:collapse!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="border:0px!important; padding:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(7,81,154)!important; background:none!important">
<code style="color:rgb(221,17,68); white-space:nowrap; padding:0px 0.3em 0px 0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; direction:ltr!important; display:block!important; background:none!important">31</code></td>
<td class="content" style="margin:0px!important; border-width:0px 0px 0px 3px!important; padding:0px 0px 0px 0.5em!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background:none!important">
<code class="spaces" style="color:rgb(221,17,68); white-space:nowrap; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword" style="white-space:nowrap; padding:0px!important; color:rgb(0,102,153)!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-weight:bold!important; direction:ltr!important; display:inline!important; background:none!important">case</code>&nbsp;<code class="keyword" style="white-space:nowrap; padding:0px!important; color:rgb(0,102,153)!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-weight:bold!important; direction:ltr!important; display:inline!important; background:none!important">_</code>&nbsp;<code class="keyword" style="white-space:nowrap; padding:0px!important; color:rgb(0,102,153)!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-weight:bold!important; direction:ltr!important; display:inline!important; background:none!important">=</code><code class="plain" style="white-space:nowrap; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">&gt;</code></td>
</tr>
</tbody>
</table>
</div>
<div class="line alt2" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none rgb(248,248,248)!important">
<table style="border-spacing:0px; font-size:1em!important; border:0px!important; width:auto!important; margin:0px!important; padding:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.2em!important; direction:ltr!important; border-collapse:collapse!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="border:0px!important; padding:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(7,81,154)!important; background:none!important">
<code style="color:rgb(221,17,68); white-space:nowrap; padding:0px 0.3em 0px 0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; direction:ltr!important; display:block!important; background:none!important">32</code></td>
<td class="content" style="margin:0px!important; border-width:0px 0px 0px 3px!important; padding:0px 0px 0px 0.5em!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background:none!important">
<code class="spaces" style="color:rgb(221,17,68); white-space:nowrap; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword" style="white-space:nowrap; padding:0px!important; color:rgb(0,102,153)!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-weight:bold!important; direction:ltr!important; display:inline!important; background:none!important">false</code></td>
</tr>
</tbody>
</table>
</div>
<div class="line alt1" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important">
<table style="border-spacing:0px; font-size:1em!important; border:0px!important; width:auto!important; margin:0px!important; padding:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.2em!important; direction:ltr!important; border-collapse:collapse!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="border:0px!important; padding:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(7,81,154)!important; background:none!important">
<code style="color:rgb(221,17,68); white-space:nowrap; padding:0px 0.3em 0px 0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; direction:ltr!important; display:block!important; background:none!important">33</code></td>
<td class="content" style="margin:0px!important; border-width:0px 0px 0px 3px!important; padding:0px 0px 0px 0.5em!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background:none!important">
<code class="spaces" style="color:rgb(221,17,68); white-space:nowrap; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">&nbsp;&nbsp;</code><code class="plain" style="white-space:nowrap; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">}</code></td>
</tr>
</tbody>
</table>
</div>
<div class="line alt2" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none rgb(248,248,248)!important">
<table style="border-spacing:0px; font-size:1em!important; border:0px!important; width:auto!important; margin:0px!important; padding:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.2em!important; direction:ltr!important; border-collapse:collapse!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="border:0px!important; padding:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(7,81,154)!important; background:none!important">
<code style="color:rgb(221,17,68); white-space:nowrap; padding:0px 0.3em 0px 0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; direction:ltr!important; display:block!important; background:none!important">34</code></td>
<td class="content" style="margin:0px!important; border-width:0px 0px 0px 3px!important; padding:0px 0px 0px 0.5em!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background:none!important">
&nbsp;</td>
</tr>
</tbody>
</table>
</div>
<div class="line alt1" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important">
<table style="border-spacing:0px; font-size:1em!important; border:0px!important; width:auto!important; margin:0px!important; padding:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.2em!important; direction:ltr!important; border-collapse:collapse!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="border:0px!important; padding:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(7,81,154)!important; background:none!important">
<code style="color:rgb(221,17,68); white-space:nowrap; padding:0px 0.3em 0px 0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; direction:ltr!important; display:block!important; background:none!important">35</code></td>
<td class="content" style="margin:0px!important; border-width:0px 0px 0px 3px!important; padding:0px 0px 0px 0.5em!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background:none!important">
<code class="spaces" style="color:rgb(221,17,68); white-space:nowrap; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">&nbsp;&nbsp;</code><code class="keyword" style="white-space:nowrap; padding:0px!important; color:rgb(0,102,153)!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-weight:bold!important; direction:ltr!important; display:inline!important; background:none!important">override</code>&nbsp;<code class="keyword" style="white-space:nowrap; padding:0px!important; color:rgb(0,102,153)!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-weight:bold!important; direction:ltr!important; display:inline!important; background:none!important">def</code>&nbsp;<code class="plain" style="white-space:nowrap; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">hashCode</code><code class="keyword" style="white-space:nowrap; padding:0px!important; color:rgb(0,102,153)!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-weight:bold!important; direction:ltr!important; display:inline!important; background:none!important">:</code>&nbsp;<code class="plain" style="white-space:nowrap; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">Int&nbsp;</code><code class="keyword" style="white-space:nowrap; padding:0px!important; color:rgb(0,102,153)!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-weight:bold!important; direction:ltr!important; display:inline!important; background:none!important">=</code>&nbsp;<code class="plain" style="white-space:nowrap; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">numPartitions</code></td>
</tr>
</tbody>
</table>
</div>
<div class="line alt2" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none rgb(248,248,248)!important">
<table style="border-spacing:0px; font-size:1em!important; border:0px!important; width:auto!important; margin:0px!important; padding:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.2em!important; direction:ltr!important; border-collapse:collapse!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="border:0px!important; padding:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(7,81,154)!important; background:none!important">
<code style="color:rgb(221,17,68); white-space:nowrap; padding:0px 0.3em 0px 0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; direction:ltr!important; display:block!important; background:none!important">36</code></td>
<td class="content" style="margin:0px!important; border-width:0px 0px 0px 3px!important; padding:0px 0px 0px 0.5em!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background:none!important">
<code class="plain" style="white-space:nowrap; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">}</code></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p style="margin-top:0px; margin-bottom:15px; font-family:'Microsoft Yahei','Helvetica Neue',Helvetica,Arial,sans-serif; font-size:15px; line-height:26px">
因为<code style="padding:2px 4px; color:rgb(221,17,68); font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:1px solid rgb(225,225,232); white-space:nowrap; font-size:14px; background-color:rgb(251,251,251)">hashCode</code>&#20540;可能为负数，所以我们需要对他进行处理。然后我们就可以在<code style="padding:2px 4px; color:rgb(221,17,68); font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:1px solid rgb(225,225,232); white-space:nowrap; font-size:14px; background-color:rgb(251,251,251)">partitionBy()</code>方法里面使用我们的分区：</p>
<div id="highlighter_857031" class="syntaxhighlighter  " style="width:807.828125px; font-size:15px; margin:1em 0px!important; padding:0px!important; border:1px solid rgb(224,224,224)!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:relative!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; direction:ltr!important">
<div class="lines" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<div class="line alt1" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important">
<table style="border-spacing:0px; font-size:1em!important; border:0px!important; width:auto!important; margin:0px!important; padding:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.2em!important; direction:ltr!important; border-collapse:collapse!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="border:0px!important; padding:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(7,81,154)!important; background:none!important">
<code style="color:rgb(221,17,68); white-space:nowrap; padding:0px 0.3em 0px 0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; direction:ltr!important; display:block!important; background:none!important">1</code></td>
<td class="content" style="margin:0px!important; border-width:0px 0px 0px 3px!important; padding:0px 0px 0px 0.5em!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background:none!important">
<code class="plain" style="white-space:nowrap; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">iteblog.partitionBy(</code><code class="keyword" style="white-space:nowrap; padding:0px!important; color:rgb(0,102,153)!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-weight:bold!important; direction:ltr!important; display:inline!important; background:none!important">new</code>&nbsp;<code class="plain" style="white-space:nowrap; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">IteblogPartitioner(</code><code class="value" style="white-space:nowrap; padding:0px!important; color:rgb(0,153,0)!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">20</code><code class="plain" style="white-space:nowrap; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">))</code></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p style="margin-top:0px; margin-bottom:15px; font-family:'Microsoft Yahei','Helvetica Neue',Helvetica,Arial,sans-serif; font-size:15px; line-height:26px">
　　类&#20284;的，在Java中定义自己的分区策略和Scala类&#20284;，只需要继承<code style="padding:2px 4px; color:rgb(221,17,68); font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:1px solid rgb(225,225,232); white-space:nowrap; font-size:14px; background-color:rgb(251,251,251)">org.apache.spark.Partitioner</code>，并实现其中的方法即可。</p>
<p style="margin-top:0px; margin-bottom:15px; font-family:'Microsoft Yahei','Helvetica Neue',Helvetica,Arial,sans-serif; font-size:15px; line-height:26px">
　　在Python中，你不需要扩展Partitioner类，我们只需要对<code style="padding:2px 4px; color:rgb(221,17,68); font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:1px solid rgb(225,225,232); white-space:nowrap; font-size:14px; background-color:rgb(251,251,251)">iteblog.partitionBy()</code>加上一个额外的hash函数，如下：</p>
<div id="highlighter_252926" class="syntaxhighlighter  " style="width:807.828125px; font-size:15px; margin:1em 0px!important; padding:0px!important; border:1px solid rgb(224,224,224)!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:relative!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; direction:ltr!important">
<div class="bar                     show" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<div class="toolbar" style="margin:0px!important; padding:8px 8px 8px 0px!important; border:1px solid rgb(231,229,220)!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:absolute!important; left:auto!important; top:0px!important; right:0px!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1px!important; direction:ltr!important; background:none rgb(248,248,248)!important">
<a target="_blank" href="http://www.iteblog.com/archives/1368#viewSource" title="查看源代码" class="item viewSource" style="color:rgb(160,160,160)!important; text-decoration:none; display:block!important; float:left!important; margin-left:8px!important; overflow:hidden!important; text-indent:-5000px!important; width:16px; height:16px">查看源代码</a>
<div class="item copyToClipboard" style="margin:0px 0px 0px 8px!important; padding:0px!important; border:0px!important; outline:0px!important; float:left!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; overflow:visible!important; background:none!important">
</div>
<a target="_blank" href="http://www.iteblog.com/archives/1368#printSource" title="打印" class="item printSource" style="color:rgb(160,160,160)!important; text-decoration:none; display:block!important; float:left!important; margin-left:8px!important; overflow:hidden!important; text-indent:-5000px!important; width:16px; height:16px">打印</a><a target="_blank" href="http://www.iteblog.com/archives/1368#about" title="帮助" class="item about" style="color:rgb(160,160,160)!important; text-decoration:none; display:block!important; float:left!important; margin-left:8px!important; overflow:hidden!important; text-indent:-5000px!important; width:16px; height:16px">帮助</a></div>
</div>
<div class="lines" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<div class="line alt1" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important">
<table style="border-spacing:0px; font-size:1em!important; border:0px!important; width:auto!important; margin:0px!important; padding:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.2em!important; direction:ltr!important; border-collapse:collapse!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="border:0px!important; padding:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(7,81,154)!important; background:none!important">
<code style="color:rgb(221,17,68); white-space:nowrap; padding:0px 0.3em 0px 0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; direction:ltr!important; display:block!important; background:none!important">1</code></td>
<td class="content" style="margin:0px!important; border-width:0px 0px 0px 3px!important; padding:0px 0px 0px 0.5em!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background:none!important">
<code class="keyword" style="white-space:nowrap; padding:0px!important; color:rgb(0,102,153)!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-weight:bold!important; direction:ltr!important; display:inline!important; background:none!important">import</code>&nbsp;<code class="plain" style="white-space:nowrap; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">urlparse</code></td>
</tr>
</tbody>
</table>
</div>
<div class="line alt2" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none rgb(248,248,248)!important">
<table style="border-spacing:0px; font-size:1em!important; border:0px!important; width:auto!important; margin:0px!important; padding:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.2em!important; direction:ltr!important; border-collapse:collapse!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="border:0px!important; padding:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(7,81,154)!important; background:none!important">
<code style="color:rgb(221,17,68); white-space:nowrap; padding:0px 0.3em 0px 0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; direction:ltr!important; display:block!important; background:none!important">2</code></td>
<td class="content" style="margin:0px!important; border-width:0px 0px 0px 3px!important; padding:0px 0px 0px 0.5em!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background:none!important">
&nbsp;</td>
</tr>
</tbody>
</table>
</div>
<div class="line alt1" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important">
<table style="border-spacing:0px; font-size:1em!important; border:0px!important; width:auto!important; margin:0px!important; padding:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.2em!important; direction:ltr!important; border-collapse:collapse!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="border:0px!important; padding:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(7,81,154)!important; background:none!important">
<code style="color:rgb(221,17,68); white-space:nowrap; padding:0px 0.3em 0px 0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; direction:ltr!important; display:block!important; background:none!important">3</code></td>
<td class="content" style="margin:0px!important; border-width:0px 0px 0px 3px!important; padding:0px 0px 0px 0.5em!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background:none!important">
<code class="keyword" style="white-space:nowrap; padding:0px!important; color:rgb(0,102,153)!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-weight:bold!important; direction:ltr!important; display:inline!important; background:none!important">def</code>&nbsp;<code class="plain" style="white-space:nowrap; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">iteblog_domain(url):</code></td>
</tr>
</tbody>
</table>
</div>
<div class="line alt2" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none rgb(248,248,248)!important">
<table style="border-spacing:0px; font-size:1em!important; border:0px!important; width:auto!important; margin:0px!important; padding:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.2em!important; direction:ltr!important; border-collapse:collapse!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="border:0px!important; padding:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(7,81,154)!important; background:none!important">
<code style="color:rgb(221,17,68); white-space:nowrap; padding:0px 0.3em 0px 0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; direction:ltr!important; display:block!important; background:none!important">4</code></td>
<td class="content" style="margin:0px!important; border-width:0px 0px 0px 3px!important; padding:0px 0px 0px 0.5em!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background:none!important">
<code class="spaces" style="color:rgb(221,17,68); white-space:nowrap; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">&nbsp;&nbsp;</code><code class="keyword" style="white-space:nowrap; padding:0px!important; color:rgb(0,102,153)!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-weight:bold!important; direction:ltr!important; display:inline!important; background:none!important">return</code>&nbsp;<code class="functions" style="white-space:nowrap; padding:0px!important; color:rgb(255,20,147)!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">hash</code><code class="plain" style="white-space:nowrap; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">(urlparse.urlparse(url).netloc)</code></td>
</tr>
</tbody>
</table>
</div>
<div class="line alt1" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important">
<table style="border-spacing:0px; font-size:1em!important; border:0px!important; width:auto!important; margin:0px!important; padding:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.2em!important; direction:ltr!important; border-collapse:collapse!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="border:0px!important; padding:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(7,81,154)!important; background:none!important">
<code style="color:rgb(221,17,68); white-space:nowrap; padding:0px 0.3em 0px 0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; direction:ltr!important; display:block!important; background:none!important">5</code></td>
<td class="content" style="margin:0px!important; border-width:0px 0px 0px 3px!important; padding:0px 0px 0px 0.5em!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background:none!important">
&nbsp;</td>
</tr>
</tbody>
</table>
</div>
<div class="line alt2" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none rgb(248,248,248)!important">
<table style="border-spacing:0px; font-size:1em!important; border:0px!important; width:auto!important; margin:0px!important; padding:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.2em!important; direction:ltr!important; border-collapse:collapse!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="border:0px!important; padding:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(7,81,154)!important; background:none!important">
<code style="color:rgb(221,17,68); white-space:nowrap; padding:0px 0.3em 0px 0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:1.7em!important; line-height:1.2em!important; direction:ltr!important; display:block!important; background:none!important">6</code></td>
<td class="content" style="margin:0px!important; border-width:0px 0px 0px 3px!important; padding:0px 0px 0px 0.5em!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; vertical-align:top!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background:none!important">
<code class="plain" style="white-space:nowrap; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">iteblog.partitionBy(</code><code class="value" style="white-space:nowrap; padding:0px!important; color:rgb(0,153,0)!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">20</code><code class="plain" style="white-space:nowrap; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; border:0px!important; font-size:1em!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.2em!important; direction:ltr!important; display:inline!important; background:none!important">,
 iteblog_domain)</code></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>

            <div>
                作者：xiao_jun_0820 发表于2015/5/22 10:10:27 <a href="http://blog.csdn.net/xiao_jun_0820/article/details/45913745">原文链接</a>
            </div>
            <div>
            阅读：741 评论：0 <a href="http://blog.csdn.net/xiao_jun_0820/article/details/45913745#comments" target="_blank">查看评论</a>
            </div>
        ]]>
        </description>
        <category></category>
    </item>
    <item>
        <title><![CDATA[[原]雅虎的kafka-manager最新版的包，及一些常用的kafka指令]]></title>
        <link>http://blog.csdn.net/xiao_jun_0820/article/details/45844277</link>
        <guid>http://blog.csdn.net/xiao_jun_0820/article/details/45844277</guid>
        <author>xiao_jun_0820</author>
        <pubDate>2015/5/19 14:20:21</pubDate>
        <description><![CDATA[
            
启动kafka服务：<br>
bin/kafka-server-start.sh config/server.properties &amp;<br>
停止kafka服务：<br>
bin/kafka-server-stop.sh<br>
<br>
<br>
<br>
<br>
创建topic:<br>
bin/kafka-topics.sh --create --zookeeper hadoop002.local:2181,hadoop001.local:2181,hadoop003.local:2181 --replication-factor 2 --partitions 2 --topic test2<br>
<br>
<br>
删除topic(需要server.properties中设置delete.topic.enable=true否则只是标记删除):<br>
bin/kafka-topics.sh --delete --zookeeper hadoop002.local:2181,hadoop001.local:2181,hadoop003.local:2181 --topic test6<br>
<br>
<br>
列出所有topic:<br>
bin/kafka-topics.sh --list --zookeeper hadoop002.local:2181,hadoop001.local:2181,hadoop003.local:2181<br>
<br>
<br>
列出所有topic的详细信息：<br>
bin/kafka-topics.sh --describe --zookeeper hadoop002.local:2181,hadoop001.local:2181,hadoop003.local:2181<br>
<br>
<br>
hadoop003.local:<br>
bin/kafka-console-producer.sh --broker-list hadoop002.local:9092,hadoop001.local:9092,hadoop003.local:9092 --topic test<br>
<br>
<br>
<br>
<br>
hadoop002.local:<br>
bin/kafka-console-consumer.sh --zookeeper hadoop002.local:2181,hadoop001.local:2181,hadoop003.local:2181 --topic test --from-beginning<br>
<br>
<br>
kafka manager启动命令<br>
<p>nohup bin/kafka-manager -Dconfig.file=/opt/kafka-manager-1.2.3/conf/application.conf -Dhttp.port=9090 &amp;</p>
<p>下载地址：http://download.csdn.net/detail/xiao_jun_0820/8716139</p>
<br>
<br>
<br>

            <div>
                作者：xiao_jun_0820 发表于2015/5/19 14:20:21 <a href="http://blog.csdn.net/xiao_jun_0820/article/details/45844277">原文链接</a>
            </div>
            <div>
            阅读：295 评论：0 <a href="http://blog.csdn.net/xiao_jun_0820/article/details/45844277#comments" target="_blank">查看评论</a>
            </div>
        ]]>
        </description>
        <category></category>
    </item>
    <item>
        <title><![CDATA[[转]Spark on Yarn: Where Have All the Memory Gone?]]></title>
        <link>http://blog.csdn.net/xiao_jun_0820/article/details/45666655</link>
        <guid>http://blog.csdn.net/xiao_jun_0820/article/details/45666655</guid>
        <author>xiao_jun_0820</author>
        <pubDate>2015/5/12 10:53:32</pubDate>
        <description><![CDATA[
            
<h2 class="post-title" style="font-family:'Open Sans',sans-serif; line-height:1.2em; margin:0px; font-size:4rem; text-indent:-2px; letter-spacing:-1px">
<a target="_blank" target="_blank" href="http://www.wdong.org/wordpress/blog/2015/01/08/spark-on-yarn-where-have-all-my-memory-gone/" rel="bookmark" style="">Spark on Yarn: Where Have All the Memory Gone?</a></h2>
<p style="margin-top:1.6em; margin-bottom:1.6em">Efficient processing of big data, especially with Spark, is really all about how much memory one can afford, or how efficient use one can make of the limited amount of available memory. Efficient memory utilization,
 however, is not what one can take for granted with default configuration shipped with Spark and Yarn. Rather, it takes very careful provisioning and tuning to get as much as possible from the bare metal. In this post I’ll demonstrate a case when not-so-careful
 configuration of Spark on Yarn leads to poor memory utilization for caching, explain the math that leads to all the observed numbers, and give some tips on parameter tuning to address the problem.<span id="more-671"></span></p>
<p style="margin-top:1.6em; margin-bottom:1.6em">A little bit background first. I’m not working with one of those big names, and do not have thousands of machines at my disposal. My group has less than ten for data crunching. Months of experimental usage of
 Spark in a standalone configuration showed very promising results, and we want to use those few machines for both production and development. That is, we want to be able to run two instances of Spark apps in parallel. Since we already have Hadoop, Spark on
 Yarn seems to be a natural choice. It is not difficult at all to setup Spark on Yarn, but I quickly found that I was not able to fire up the second instance of Spark because I was, as seen by Yarn, out of memory. I’ll use the following simplified one-machine
 setup to demonstrate the problem I’ve seen.</p>
<h2 style="font-family:'Open Sans',sans-serif; line-height:1.2em; margin-top:0px; font-size:4rem; text-indent:-2px; letter-spacing:-1px">
1. Demonstration of the Problem</h2>
<p style="margin-top:1.6em; margin-bottom:1.6em">This demo was run on a desktop with 64g memory. I used the following setting:</p>
<div id="highlighter_121874" class="syntaxhighlighter  " style="width:990px; margin:1em 0px!important; padding:0px!important; border:1px solid rgb(224,224,224)!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:relative!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.1em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important">
<div class="lines" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<div class="line alt1" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important">
<table style="border-spacing:0px; max-width:100%; border-collapse:collapse!important; width:auto!important; margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="line-height:1.1em!important; padding:0px!important; vertical-align:top!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:3em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(175,175,175)!important; background-color:rgb(246,246,246)">
<code style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px 0.3em 0px 0px!important; border:0px!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:2.7em!important; line-height:1.1em!important; direction:ltr!important; display:block!important; background:none!important">1</code></td>
<td class="content" style="line-height:1.1em!important; padding:0px 0px 0px 0.5em!important; vertical-align:top!important; border-width:0px 0px 0px 3px!important; margin:0px!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background-color:rgb(246,246,246)">
<code class="plain" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; direction:ltr!important; display:inline!important; background:none!important">yarn.nodemanager.resource.memory-mb
 = 49152&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="comments" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; direction:ltr!important; display:inline!important; color:rgb(0,130,0)!important; background:none!important">#
 48G</code></td>
</tr>
</tbody>
</table>
</div>
<div class="line alt2" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none rgb(248,248,248)!important">
<table style="border-spacing:0px; max-width:100%; border-collapse:collapse!important; width:auto!important; margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="line-height:1.1em!important; padding:0px!important; vertical-align:top!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:3em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(175,175,175)!important; background-color:rgb(246,246,246)">
<code style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px 0.3em 0px 0px!important; border:0px!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:2.7em!important; line-height:1.1em!important; direction:ltr!important; display:block!important; background:none!important">2</code></td>
<td class="content" style="line-height:1.1em!important; padding:0px 0px 0px 0.5em!important; vertical-align:top!important; border-width:0px 0px 0px 3px!important; margin:0px!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background-color:rgb(246,246,246)">
<code class="plain" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; direction:ltr!important; display:inline!important; background:none!important">yarn.scheduler.maximum-allocation-mb
 = 24576&nbsp;&nbsp;&nbsp; </code><code class="comments" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; direction:ltr!important; display:inline!important; color:rgb(0,130,0)!important; background:none!important">#
 24G</code></td>
</tr>
</tbody>
</table>
</div>
<div class="line alt1" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important">
<table style="border-spacing:0px; max-width:100%; border-collapse:collapse!important; width:auto!important; margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="line-height:1.1em!important; padding:0px!important; vertical-align:top!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:3em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(175,175,175)!important; background-color:rgb(246,246,246)">
<code style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px 0.3em 0px 0px!important; border:0px!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:2.7em!important; line-height:1.1em!important; direction:ltr!important; display:block!important; background:none!important">3</code></td>
<td class="content" style="line-height:1.1em!important; padding:0px 0px 0px 0.5em!important; vertical-align:top!important; border-width:0px 0px 0px 3px!important; margin:0px!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background-color:rgb(246,246,246)">
<code class="plain" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; direction:ltr!important; display:inline!important; background:none!important">SPARK_EXECUTOR_INSTANCES=1</code></td>
</tr>
</tbody>
</table>
</div>
<div class="line alt2" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none rgb(248,248,248)!important">
<table style="border-spacing:0px; max-width:100%; border-collapse:collapse!important; width:auto!important; margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="line-height:1.1em!important; padding:0px!important; vertical-align:top!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:3em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(175,175,175)!important; background-color:rgb(246,246,246)">
<code style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px 0.3em 0px 0px!important; border:0px!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:2.7em!important; line-height:1.1em!important; direction:ltr!important; display:block!important; background:none!important">4</code></td>
<td class="content" style="line-height:1.1em!important; padding:0px 0px 0px 0.5em!important; vertical-align:top!important; border-width:0px 0px 0px 3px!important; margin:0px!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background-color:rgb(246,246,246)">
<code class="plain" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; direction:ltr!important; display:inline!important; background:none!important">SPARK_EXECUTOR_MEMORY=18G</code></td>
</tr>
</tbody>
</table>
</div>
<div class="line alt1" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important">
<table style="border-spacing:0px; max-width:100%; border-collapse:collapse!important; width:auto!important; margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="line-height:1.1em!important; padding:0px!important; vertical-align:top!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:3em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(175,175,175)!important; background-color:rgb(246,246,246)">
<code style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px 0.3em 0px 0px!important; border:0px!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:2.7em!important; line-height:1.1em!important; direction:ltr!important; display:block!important; background:none!important">5</code></td>
<td class="content" style="line-height:1.1em!important; padding:0px 0px 0px 0.5em!important; vertical-align:top!important; border-width:0px 0px 0px 3px!important; margin:0px!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background-color:rgb(246,246,246)">
<code class="plain" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; direction:ltr!important; display:inline!important; background:none!important">SPARK_DRIVER_MEMORY=4G</code></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p style="margin-top:1.6em; margin-bottom:1.6em">The Yarn parameters went into yarn-site.xml, and the Spark ones in spark-env.sh. I didn’t set any other memory-related parameters.</p>
<p style="margin-top:1.6em; margin-bottom:1.6em">So the total memory allocated to Yarn was 48G, with 24G maximum for one app. Spark should use 18&#43;4 = 22G memory, which is below the 24G cap. So I should be able to run two Spark apps in parallel.</p>
<p style="margin-top:1.6em; margin-bottom:1.6em">Following are the numbers I got from all the logs and Web UIs when I actually fired up one Spark app.</p>
<ul style="margin:0px 0px 1.5em 3em">
<li>(Yarn) Memory Total: 48G</li><li>(Yarn) Memory Used: 25G</li><li>(Yarn) Container 1, TotalMemoryNeeded: 5120M</li><li>(Yarn) Container 2, TotalMemoryNeeded: 20480M</li><li>(Spark) Driver memory requirement: 4480 MB memory including 384 MB overhead (From output of Spark-Shell)</li><li>(Spark) Driver available memory to App: 2.1G</li><li>(Spark) Executor available memory to App: 9.3G</li></ul>
<p style="margin-top:1.6em; margin-bottom:1.6em">Below are the relevant screen shots.<br>
<a target="_blank" target="_blank" href="http://www.wdong.org/wordpress/wp-content/uploads/2015/01/memory-yarn.png" style=""><img class="alignnone size-full wp-image-687" alt="memory-yarn" src="http://www.wdong.org/wordpress/wp-content/uploads/2015/01/memory-yarn.png" width="1164" height="658" style="border:0px; max-width:100%; height:auto; display:block; margin:0px auto; padding:1em"></a></p>
<p style="margin-top:1.6em; margin-bottom:1.6em"><a target="_blank" target="_blank" href="http://www.wdong.org/wordpress/wp-content/uploads/2015/01/memory-spark.png" style=""><img class="alignnone size-full wp-image-686" alt="memory-spark" src="http://www.wdong.org/wordpress/wp-content/uploads/2015/01/memory-spark.png" width="1168" height="791" style="border:0px; max-width:100%; height:auto; display:block; margin:0px auto; padding:1em"></a></p>
<p style="margin-top:1.6em; margin-bottom:1.6em">So here are the problems that I see with the driver:</p>
<ol style="margin:0px 0px 1.5em 3em">
<li>I’ve configured Spark driver to use 4G, and Spark asked Yarn for 4G plus an overhead of 384MB.</li><li>What reflected in Yarn is that the driver has used 5G.</li><li>What’s really available in the driver’s block manager is only 2.1G.</li></ol>
<p style="margin-top:1.6em; margin-bottom:1.6em">One has to understand that Spark has to reserve a portion of memory for code execution and cannot give everything to the block manager (the cache), but still,</p>
<h2 style="font-family:'Open Sans',sans-serif; line-height:1.2em; margin-top:0px; font-size:4rem; text-indent:-2px; letter-spacing:-1px">
<span style="color:rgb(255,0,0)">WHERE HAVE ALL THE MEMORY GONE???</span></h2>
<h2 style="font-family:'Open Sans',sans-serif; line-height:1.2em; margin-top:0px; font-size:4rem; text-indent:-2px; letter-spacing:-1px">
2. The Math Behind</h2>
<p style="margin-top:1.6em; margin-bottom:1.6em">Rule 1. Yarn always rounds up memory requirement to multiples of yarn.scheduler.minimum-allocation-mb, which by default is 1024 or 1GB. That’s why the driver’s requirement of 4G&#43;384M showed up as 5G in Yarn.
 The parameter yarn.scheduler.minimum-allocation-mb is really “minimum-allocation-unit-mb”. This can be easily verified by setting the parameter to a prime number, such as 97, and see Yarn allocate by multiples of the number.</p>
<p style="margin-top:1.6em; margin-bottom:1.6em">Rule 2. Spark adds an overhead to SPARK_EXECUTOR_MEMORY/SPARK_DRIVER_MEMORY before asking Yarn for the amount. The rule of overhead is the same for both executor and driver, which is</p>
<div id="highlighter_411310" class="syntaxhighlighter  " style="width:990px; margin:1em 0px!important; padding:0px!important; border:1px solid rgb(224,224,224)!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:relative!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.1em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important">
<div class="lines" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<div class="line alt1" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important">
<table style="border-spacing:0px; max-width:100%; border-collapse:collapse!important; width:auto!important; margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="line-height:1.1em!important; padding:0px!important; vertical-align:top!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:3em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(175,175,175)!important; background-color:rgb(246,246,246)">
<code style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px 0.3em 0px 0px!important; border:0px!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:2.7em!important; line-height:1.1em!important; direction:ltr!important; display:block!important; background:none!important">1</code></td>
<td class="content" style="line-height:1.1em!important; padding:0px 0px 0px 0.5em!important; vertical-align:top!important; border-width:0px 0px 0px 3px!important; margin:0px!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background-color:rgb(246,246,246)">
<code class="comments" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; direction:ltr!important; display:inline!important; color:rgb(0,130,0)!important; background:none!important">//yarn/common/src/main/scala/org/apache/spark/deploy/yarn/YarnSparkHadoopUtil.scala</code></td>
</tr>
</tbody>
</table>
</div>
<div class="line alt2" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none rgb(248,248,248)!important">
<table style="border-spacing:0px; max-width:100%; border-collapse:collapse!important; width:auto!important; margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="line-height:1.1em!important; padding:0px!important; vertical-align:top!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:3em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(175,175,175)!important; background-color:rgb(246,246,246)">
<code style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px 0.3em 0px 0px!important; border:0px!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:2.7em!important; line-height:1.1em!important; direction:ltr!important; display:block!important; background:none!important">2</code></td>
<td class="content" style="line-height:1.1em!important; padding:0px 0px 0px 0.5em!important; vertical-align:top!important; border-width:0px 0px 0px 3px!important; margin:0px!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background-color:rgb(246,246,246)">
<code class="spaces" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; direction:ltr!important; display:inline!important; background:none!important">&nbsp;&nbsp;</code><code class="keyword" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-weight:bold!important; direction:ltr!important; display:inline!important; color:rgb(0,102,153)!important; background:none!important">val</code>&nbsp;<code class="plain" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; direction:ltr!important; display:inline!important; background:none!important">MEMORY</code><code class="keyword" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-weight:bold!important; direction:ltr!important; display:inline!important; color:rgb(0,102,153)!important; background:none!important">_</code><code class="plain" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; direction:ltr!important; display:inline!important; background:none!important">OVERHEAD</code><code class="keyword" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-weight:bold!important; direction:ltr!important; display:inline!important; color:rgb(0,102,153)!important; background:none!important">_</code><code class="plain" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; direction:ltr!important; display:inline!important; background:none!important">FACTOR</code><code class="keyword" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-weight:bold!important; direction:ltr!important; display:inline!important; color:rgb(0,102,153)!important; background:none!important">=</code>&nbsp;<code class="value" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; direction:ltr!important; display:inline!important; color:rgb(0,153,0)!important; background:none!important">0.07</code></td>
</tr>
</tbody>
</table>
</div>
<div class="line alt1" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important">
<table style="border-spacing:0px; max-width:100%; border-collapse:collapse!important; width:auto!important; margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="line-height:1.1em!important; padding:0px!important; vertical-align:top!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:3em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(175,175,175)!important; background-color:rgb(246,246,246)">
<code style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px 0.3em 0px 0px!important; border:0px!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:2.7em!important; line-height:1.1em!important; direction:ltr!important; display:block!important; background:none!important">3</code></td>
<td class="content" style="line-height:1.1em!important; padding:0px 0px 0px 0.5em!important; vertical-align:top!important; border-width:0px 0px 0px 3px!important; margin:0px!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background-color:rgb(246,246,246)">
<code class="spaces" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; direction:ltr!important; display:inline!important; background:none!important">&nbsp;&nbsp;</code><code class="keyword" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-weight:bold!important; direction:ltr!important; display:inline!important; color:rgb(0,102,153)!important; background:none!important">val</code>&nbsp;<code class="plain" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; direction:ltr!important; display:inline!important; background:none!important">MEMORY</code><code class="keyword" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-weight:bold!important; direction:ltr!important; display:inline!important; color:rgb(0,102,153)!important; background:none!important">_</code><code class="plain" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; direction:ltr!important; display:inline!important; background:none!important">OVERHEAD</code><code class="keyword" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-weight:bold!important; direction:ltr!important; display:inline!important; color:rgb(0,102,153)!important; background:none!important">_</code><code class="plain" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; direction:ltr!important; display:inline!important; background:none!important">MIN</code><code class="keyword" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-weight:bold!important; direction:ltr!important; display:inline!important; color:rgb(0,102,153)!important; background:none!important">=</code>&nbsp;<code class="value" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; direction:ltr!important; display:inline!important; color:rgb(0,153,0)!important; background:none!important">384</code></td>
</tr>
</tbody>
</table>
</div>
<div class="line alt2" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none rgb(248,248,248)!important">
<table style="border-spacing:0px; max-width:100%; border-collapse:collapse!important; width:auto!important; margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="line-height:1.1em!important; padding:0px!important; vertical-align:top!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:3em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(175,175,175)!important; background-color:rgb(246,246,246)">
<code style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px 0.3em 0px 0px!important; border:0px!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:2.7em!important; line-height:1.1em!important; direction:ltr!important; display:block!important; background:none!important">4</code></td>
<td class="content" style="line-height:1.1em!important; padding:0px 0px 0px 0.5em!important; vertical-align:top!important; border-width:0px 0px 0px 3px!important; margin:0px!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background-color:rgb(246,246,246)">
&nbsp;</td>
</tr>
</tbody>
</table>
</div>
<div class="line alt1" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important">
<table style="border-spacing:0px; max-width:100%; border-collapse:collapse!important; width:auto!important; margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="line-height:1.1em!important; padding:0px!important; vertical-align:top!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:3em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(175,175,175)!important; background-color:rgb(246,246,246)">
<code style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px 0.3em 0px 0px!important; border:0px!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:2.7em!important; line-height:1.1em!important; direction:ltr!important; display:block!important; background:none!important">5</code></td>
<td class="content" style="line-height:1.1em!important; padding:0px 0px 0px 0.5em!important; vertical-align:top!important; border-width:0px 0px 0px 3px!important; margin:0px!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background-color:rgb(246,246,246)">
<code class="comments" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; direction:ltr!important; display:inline!important; color:rgb(0,130,0)!important; background:none!important">//yarn/common/src/main/scala/org/apache/spark/deploy/yarn/YarnAllocator.scala</code></td>
</tr>
</tbody>
</table>
</div>
<div class="line alt2" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none rgb(248,248,248)!important">
<table style="border-spacing:0px; max-width:100%; border-collapse:collapse!important; width:auto!important; margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="line-height:1.1em!important; padding:0px!important; vertical-align:top!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:3em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(175,175,175)!important; background-color:rgb(246,246,246)">
<code style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px 0.3em 0px 0px!important; border:0px!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:2.7em!important; line-height:1.1em!important; direction:ltr!important; display:block!important; background:none!important">6</code></td>
<td class="content" style="line-height:1.1em!important; padding:0px 0px 0px 0.5em!important; vertical-align:top!important; border-width:0px 0px 0px 3px!important; margin:0px!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background-color:rgb(246,246,246)">
<code class="spaces" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; direction:ltr!important; display:inline!important; background:none!important">&nbsp;&nbsp;</code><code class="keyword" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-weight:bold!important; direction:ltr!important; display:inline!important; color:rgb(0,102,153)!important; background:none!important">protected</code>&nbsp;<code class="keyword" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-weight:bold!important; direction:ltr!important; display:inline!important; color:rgb(0,102,153)!important; background:none!important">val</code>&nbsp;<code class="plain" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; direction:ltr!important; display:inline!important; background:none!important">memoryOverhead</code><code class="keyword" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-weight:bold!important; direction:ltr!important; display:inline!important; color:rgb(0,102,153)!important; background:none!important">:</code>&nbsp;<code class="plain" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; direction:ltr!important; display:inline!important; background:none!important">Int</code><code class="keyword" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-weight:bold!important; direction:ltr!important; display:inline!important; color:rgb(0,102,153)!important; background:none!important">=</code>&nbsp;<code class="plain" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; direction:ltr!important; display:inline!important; background:none!important">sparkConf.getInt(</code><code class="string" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; direction:ltr!important; display:inline!important; color:blue!important; background:none!important">&quot;spark.yarn.executor.memoryOverhead&quot;</code><code class="plain" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; direction:ltr!important; display:inline!important; background:none!important">,</code></td>
</tr>
</tbody>
</table>
</div>
<div class="line alt1" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important">
<table style="border-spacing:0px; max-width:100%; border-collapse:collapse!important; width:auto!important; margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="line-height:1.1em!important; padding:0px!important; vertical-align:top!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:3em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(175,175,175)!important; background-color:rgb(246,246,246)">
<code style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px 0.3em 0px 0px!important; border:0px!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:2.7em!important; line-height:1.1em!important; direction:ltr!important; display:block!important; background:none!important">7</code></td>
<td class="content" style="line-height:1.1em!important; padding:0px 0px 0px 0.5em!important; vertical-align:top!important; border-width:0px 0px 0px 3px!important; margin:0px!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background-color:rgb(246,246,246)">
<code class="spaces" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; direction:ltr!important; display:inline!important; background:none!important">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; direction:ltr!important; display:inline!important; background:none!important">math.max((MEMORY</code><code class="keyword" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-weight:bold!important; direction:ltr!important; display:inline!important; color:rgb(0,102,153)!important; background:none!important">_</code><code class="plain" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; direction:ltr!important; display:inline!important; background:none!important">OVERHEAD</code><code class="keyword" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-weight:bold!important; direction:ltr!important; display:inline!important; color:rgb(0,102,153)!important; background:none!important">_</code><code class="plain" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; direction:ltr!important; display:inline!important; background:none!important">FACTOR
 * executorMemory).toInt, MEMORY</code><code class="keyword" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-weight:bold!important; direction:ltr!important; display:inline!important; color:rgb(0,102,153)!important; background:none!important">_</code><code class="plain" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; direction:ltr!important; display:inline!important; background:none!important">OVERHEAD</code><code class="keyword" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-weight:bold!important; direction:ltr!important; display:inline!important; color:rgb(0,102,153)!important; background:none!important">_</code><code class="plain" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; direction:ltr!important; display:inline!important; background:none!important">MIN))</code></td>
</tr>
</tbody>
</table>
</div>
<div class="line alt2" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none rgb(248,248,248)!important">
<table style="border-spacing:0px; max-width:100%; border-collapse:collapse!important; width:auto!important; margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="line-height:1.1em!important; padding:0px!important; vertical-align:top!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:3em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(175,175,175)!important; background-color:rgb(246,246,246)">
<code style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px 0.3em 0px 0px!important; border:0px!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:2.7em!important; line-height:1.1em!important; direction:ltr!important; display:block!important; background:none!important">8</code></td>
<td class="content" style="line-height:1.1em!important; padding:0px 0px 0px 0.5em!important; vertical-align:top!important; border-width:0px 0px 0px 3px!important; margin:0px!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background-color:rgb(246,246,246)">
<code class="plain" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; direction:ltr!important; display:inline!important; background:none!important">......</code></td>
</tr>
</tbody>
</table>
</div>
<div class="line alt1" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important">
<table style="border-spacing:0px; max-width:100%; border-collapse:collapse!important; width:auto!important; margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="line-height:1.1em!important; padding:0px!important; vertical-align:top!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:3em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(175,175,175)!important; background-color:rgb(246,246,246)">
<code style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px 0.3em 0px 0px!important; border:0px!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:2.7em!important; line-height:1.1em!important; direction:ltr!important; display:block!important; background:none!important">9</code></td>
<td class="content" style="line-height:1.1em!important; padding:0px 0px 0px 0.5em!important; vertical-align:top!important; border-width:0px 0px 0px 3px!important; margin:0px!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background-color:rgb(246,246,246)">
<code class="spaces" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; direction:ltr!important; display:inline!important; background:none!important">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-weight:bold!important; direction:ltr!important; display:inline!important; color:rgb(0,102,153)!important; background:none!important">val</code>&nbsp;<code class="plain" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; direction:ltr!important; display:inline!important; background:none!important">totalExecutorMemory</code><code class="keyword" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-weight:bold!important; direction:ltr!important; display:inline!important; color:rgb(0,102,153)!important; background:none!important">=</code>&nbsp;<code class="plain" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; direction:ltr!important; display:inline!important; background:none!important">executorMemory
 &#43; memoryOverhead</code></td>
</tr>
</tbody>
</table>
</div>
<div class="line alt2" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none rgb(248,248,248)!important">
<table style="border-spacing:0px; max-width:100%; border-collapse:collapse!important; width:auto!important; margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="line-height:1.1em!important; padding:0px!important; vertical-align:top!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:3em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(175,175,175)!important; background-color:rgb(246,246,246)">
<code style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px 0.3em 0px 0px!important; border:0px!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:2.7em!important; line-height:1.1em!important; direction:ltr!important; display:block!important; background:none!important">10</code></td>
<td class="content" style="line-height:1.1em!important; padding:0px 0px 0px 0.5em!important; vertical-align:top!important; border-width:0px 0px 0px 3px!important; margin:0px!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background-color:rgb(246,246,246)">
<code class="spaces" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; direction:ltr!important; display:inline!important; background:none!important">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; direction:ltr!important; display:inline!important; background:none!important">numPendingAllocate.addAndGet(missing)</code></td>
</tr>
</tbody>
</table>
</div>
<div class="line alt1" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important">
<table style="border-spacing:0px; max-width:100%; border-collapse:collapse!important; width:auto!important; margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="line-height:1.1em!important; padding:0px!important; vertical-align:top!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:3em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(175,175,175)!important; background-color:rgb(246,246,246)">
<code style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px 0.3em 0px 0px!important; border:0px!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:2.7em!important; line-height:1.1em!important; direction:ltr!important; display:block!important; background:none!important">11</code></td>
<td class="content" style="line-height:1.1em!important; padding:0px 0px 0px 0.5em!important; vertical-align:top!important; border-width:0px 0px 0px 3px!important; margin:0px!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background-color:rgb(246,246,246)">
<code class="spaces" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; direction:ltr!important; display:inline!important; background:none!important">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; direction:ltr!important; display:inline!important; background:none!important">logInfo(s</code><code class="string" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; direction:ltr!important; display:inline!important; color:blue!important; background:none!important">&quot;Will
 allocate $missing executor containers, each with $totalExecutorMemory MB &quot;</code>&nbsp;<code class="plain" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; direction:ltr!important; display:inline!important; background:none!important">&#43;</code></td>
</tr>
</tbody>
</table>
</div>
<div class="line alt2" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none rgb(248,248,248)!important">
<table style="border-spacing:0px; max-width:100%; border-collapse:collapse!important; width:auto!important; margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="line-height:1.1em!important; padding:0px!important; vertical-align:top!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:3em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(175,175,175)!important; background-color:rgb(246,246,246)">
<code style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px 0.3em 0px 0px!important; border:0px!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:2.7em!important; line-height:1.1em!important; direction:ltr!important; display:block!important; background:none!important">12</code></td>
<td class="content" style="line-height:1.1em!important; padding:0px 0px 0px 0.5em!important; vertical-align:top!important; border-width:0px 0px 0px 3px!important; margin:0px!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background-color:rgb(246,246,246)">
<code class="spaces" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; direction:ltr!important; display:inline!important; background:none!important">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; direction:ltr!important; display:inline!important; background:none!important">s</code><code class="string" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; direction:ltr!important; display:inline!important; color:blue!important; background:none!important">&quot;memory
 including $memoryOverhead MB overhead&quot;</code><code class="plain" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; direction:ltr!important; display:inline!important; background:none!important">)</code></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p style="margin-top:1.6em; margin-bottom:1.6em">This overhead is necessary because when a JVM program is allowed certain amount of memory (by -Xmx), the overall memory usage of JVM could be more than that, and Yarn literally kills programs which uses more
 memory than allowed (with complicated rules).&nbsp; One can only adjust the two magic numbers by modifying the source.</p>
<p style="margin-top:1.6em; margin-bottom:1.6em">The above two rules determine how the configured SPARK_XXX_MEMORY finally show up in Yarn.</p>
<p style="margin-top:1.6em; margin-bottom:1.6em">Rule 3. How much memory does driver/executor see.</p>
<p style="margin-top:1.6em; margin-bottom:1.6em">One limits the maximal heap memory of JVM by the option “-Xmx”. Part of the specified memory get used by the Scala runtime and other system component, and what a Scala program sees is less then the specified
 amount. This can be illustrated with the following example.</p>
<div id="highlighter_784417" class="syntaxhighlighter  " style="width:990px; margin:1em 0px!important; padding:0px!important; border:1px solid rgb(224,224,224)!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:relative!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.1em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important">
<div class="lines" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<div class="line alt1" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important">
<table style="border-spacing:0px; max-width:100%; border-collapse:collapse!important; width:auto!important; margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="line-height:1.1em!important; padding:0px!important; vertical-align:top!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:3em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(175,175,175)!important; background-color:rgb(246,246,246)">
<code style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px 0.3em 0px 0px!important; border:0px!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:2.7em!important; line-height:1.1em!important; direction:ltr!important; display:block!important; background:none!important">1</code></td>
<td class="content" style="line-height:1.1em!important; padding:0px 0px 0px 0.5em!important; vertical-align:top!important; border-width:0px 0px 0px 3px!important; margin:0px!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background-color:rgb(246,246,246)">
<code class="plain" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; direction:ltr!important; display:inline!important; background:none!important">$
 scala -J-Xmx4g</code></td>
</tr>
</tbody>
</table>
</div>
<div class="line alt2" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none rgb(248,248,248)!important">
<table style="border-spacing:0px; max-width:100%; border-collapse:collapse!important; width:auto!important; margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="line-height:1.1em!important; padding:0px!important; vertical-align:top!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:3em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(175,175,175)!important; background-color:rgb(246,246,246)">
<code style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px 0.3em 0px 0px!important; border:0px!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:2.7em!important; line-height:1.1em!important; direction:ltr!important; display:block!important; background:none!important">2</code></td>
<td class="content" style="line-height:1.1em!important; padding:0px 0px 0px 0.5em!important; vertical-align:top!important; border-width:0px 0px 0px 3px!important; margin:0px!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background-color:rgb(246,246,246)">
<code class="plain" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; direction:ltr!important; display:inline!important; background:none!important">Welcome
 to Scala version 2.10.3 (OpenJDK 64-Bit Server VM, Java 1.7.0_51).</code></td>
</tr>
</tbody>
</table>
</div>
<div class="line alt1" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important">
<table style="border-spacing:0px; max-width:100%; border-collapse:collapse!important; width:auto!important; margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="line-height:1.1em!important; padding:0px!important; vertical-align:top!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:3em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(175,175,175)!important; background-color:rgb(246,246,246)">
<code style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px 0.3em 0px 0px!important; border:0px!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:2.7em!important; line-height:1.1em!important; direction:ltr!important; display:block!important; background:none!important">3</code></td>
<td class="content" style="line-height:1.1em!important; padding:0px 0px 0px 0.5em!important; vertical-align:top!important; border-width:0px 0px 0px 3px!important; margin:0px!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background-color:rgb(246,246,246)">
<code class="plain" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; direction:ltr!important; display:inline!important; background:none!important">Type</code><code class="keyword" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-weight:bold!important; direction:ltr!important; display:inline!important; color:rgb(0,102,153)!important; background:none!important">in</code>&nbsp;<code class="plain" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; direction:ltr!important; display:inline!important; background:none!important">expressions
 to have them evaluated.</code></td>
</tr>
</tbody>
</table>
</div>
<div class="line alt2" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none rgb(248,248,248)!important">
<table style="border-spacing:0px; max-width:100%; border-collapse:collapse!important; width:auto!important; margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="line-height:1.1em!important; padding:0px!important; vertical-align:top!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:3em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(175,175,175)!important; background-color:rgb(246,246,246)">
<code style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px 0.3em 0px 0px!important; border:0px!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:2.7em!important; line-height:1.1em!important; direction:ltr!important; display:block!important; background:none!important">4</code></td>
<td class="content" style="line-height:1.1em!important; padding:0px 0px 0px 0.5em!important; vertical-align:top!important; border-width:0px 0px 0px 3px!important; margin:0px!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background-color:rgb(246,246,246)">
<code class="plain" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; direction:ltr!important; display:inline!important; background:none!important">Type
 :help </code><code class="keyword" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-weight:bold!important; direction:ltr!important; display:inline!important; color:rgb(0,102,153)!important; background:none!important">for</code>&nbsp;<code class="functions" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; direction:ltr!important; display:inline!important; color:rgb(255,20,147)!important; background:none!important">more</code>&nbsp;<code class="plain" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; direction:ltr!important; display:inline!important; background:none!important">information.</code></td>
</tr>
</tbody>
</table>
</div>
<div class="line alt1" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important">
<table style="border-spacing:0px; max-width:100%; border-collapse:collapse!important; width:auto!important; margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="line-height:1.1em!important; padding:0px!important; vertical-align:top!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:3em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(175,175,175)!important; background-color:rgb(246,246,246)">
<code style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px 0.3em 0px 0px!important; border:0px!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:2.7em!important; line-height:1.1em!important; direction:ltr!important; display:block!important; background:none!important">5</code></td>
<td class="content" style="line-height:1.1em!important; padding:0px 0px 0px 0.5em!important; vertical-align:top!important; border-width:0px 0px 0px 3px!important; margin:0px!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background-color:rgb(246,246,246)">
&nbsp;</td>
</tr>
</tbody>
</table>
</div>
<div class="line alt2" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none rgb(248,248,248)!important">
<table style="border-spacing:0px; max-width:100%; border-collapse:collapse!important; width:auto!important; margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="line-height:1.1em!important; padding:0px!important; vertical-align:top!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:3em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(175,175,175)!important; background-color:rgb(246,246,246)">
<code style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px 0.3em 0px 0px!important; border:0px!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:2.7em!important; line-height:1.1em!important; direction:ltr!important; display:block!important; background:none!important">6</code></td>
<td class="content" style="line-height:1.1em!important; padding:0px 0px 0px 0.5em!important; vertical-align:top!important; border-width:0px 0px 0px 3px!important; margin:0px!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background-color:rgb(246,246,246)">
<code class="plain" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; direction:ltr!important; display:inline!important; background:none!important">scala&gt;
 Runtime.getRuntime.maxMemory</code></td>
</tr>
</tbody>
</table>
</div>
<div class="line alt1" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important">
<table style="border-spacing:0px; max-width:100%; border-collapse:collapse!important; width:auto!important; margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="line-height:1.1em!important; padding:0px!important; vertical-align:top!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:3em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(175,175,175)!important; background-color:rgb(246,246,246)">
<code style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px 0.3em 0px 0px!important; border:0px!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:2.7em!important; line-height:1.1em!important; direction:ltr!important; display:block!important; background:none!important">7</code></td>
<td class="content" style="line-height:1.1em!important; padding:0px 0px 0px 0.5em!important; vertical-align:top!important; border-width:0px 0px 0px 3px!important; margin:0px!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background-color:rgb(246,246,246)">
<code class="plain" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; direction:ltr!important; display:inline!important; background:none!important">res0:
 Long = 3817865216</code></td>
</tr>
</tbody>
</table>
</div>
<div class="line alt2" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none rgb(248,248,248)!important">
<table style="border-spacing:0px; max-width:100%; border-collapse:collapse!important; width:auto!important; margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="line-height:1.1em!important; padding:0px!important; vertical-align:top!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:3em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(175,175,175)!important; background-color:rgb(246,246,246)">
<code style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px 0.3em 0px 0px!important; border:0px!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:2.7em!important; line-height:1.1em!important; direction:ltr!important; display:block!important; background:none!important">8</code></td>
<td class="content" style="line-height:1.1em!important; padding:0px 0px 0px 0.5em!important; vertical-align:top!important; border-width:0px 0px 0px 3px!important; margin:0px!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background-color:rgb(246,246,246)">
<code class="plain" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; direction:ltr!important; display:inline!important; background:none!important">scala&gt;</code></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p style="margin-top:1.6em; margin-bottom:1.6em">The runtime eats about 455M. (The above process has an&nbsp;<a target="_blank" target="_blank" href="http://en.wikipedia.org/wiki/Resident_set_size" style="">RSS</a>&nbsp;of 140.3M in Linux, so a big portion of the 455M
 is more like being reserved than actually being used.)</p>
<p style="margin-top:1.6em; margin-bottom:1.6em">The Spark driver is allocated the configured 4G by JVM options. This can be verified by running the following from inside the Spark shell.</p>
<div id="highlighter_999660" class="syntaxhighlighter  " style="width:990px; margin:1em 0px!important; padding:0px!important; border:1px solid rgb(224,224,224)!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:relative!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.1em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important">
<div class="lines" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<div class="line alt1" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important">
<table style="border-spacing:0px; max-width:100%; border-collapse:collapse!important; width:auto!important; margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="line-height:1.1em!important; padding:0px!important; vertical-align:top!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:3em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(175,175,175)!important; background-color:rgb(246,246,246)">
<code style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px 0.3em 0px 0px!important; border:0px!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:2.7em!important; line-height:1.1em!important; direction:ltr!important; display:block!important; background:none!important">1</code></td>
<td class="content" style="line-height:1.1em!important; padding:0px 0px 0px 0.5em!important; vertical-align:top!important; border-width:0px 0px 0px 3px!important; margin:0px!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background-color:rgb(246,246,246)">
<code class="plain" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; direction:ltr!important; display:inline!important; background:none!important">scala&gt;</code></td>
</tr>
</tbody>
</table>
</div>
<div class="line alt2" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none rgb(248,248,248)!important">
<table style="border-spacing:0px; max-width:100%; border-collapse:collapse!important; width:auto!important; margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="line-height:1.1em!important; padding:0px!important; vertical-align:top!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:3em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(175,175,175)!important; background-color:rgb(246,246,246)">
<code style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px 0.3em 0px 0px!important; border:0px!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:2.7em!important; line-height:1.1em!important; direction:ltr!important; display:block!important; background:none!important">2</code></td>
<td class="content" style="line-height:1.1em!important; padding:0px 0px 0px 0.5em!important; vertical-align:top!important; border-width:0px 0px 0px 3px!important; margin:0px!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background-color:rgb(246,246,246)">
&nbsp;</td>
</tr>
</tbody>
</table>
</div>
<div class="line alt1" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important">
<table style="border-spacing:0px; max-width:100%; border-collapse:collapse!important; width:auto!important; margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="line-height:1.1em!important; padding:0px!important; vertical-align:top!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:3em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(175,175,175)!important; background-color:rgb(246,246,246)">
<code style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px 0.3em 0px 0px!important; border:0px!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:2.7em!important; line-height:1.1em!important; direction:ltr!important; display:block!important; background:none!important">3</code></td>
<td class="content" style="line-height:1.1em!important; padding:0px 0px 0px 0.5em!important; vertical-align:top!important; border-width:0px 0px 0px 3px!important; margin:0px!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background-color:rgb(246,246,246)">
<code class="plain" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; direction:ltr!important; display:inline!important; background:none!important">scala&gt;</code><code class="functions" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; direction:ltr!important; display:inline!important; color:rgb(255,20,147)!important; background:none!important">import</code>&nbsp;<code class="plain" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; direction:ltr!important; display:inline!important; background:none!important">java.lang.management.ManagementFactory</code></td>
</tr>
</tbody>
</table>
</div>
<div class="line alt2" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none rgb(248,248,248)!important">
<table style="border-spacing:0px; max-width:100%; border-collapse:collapse!important; width:auto!important; margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="line-height:1.1em!important; padding:0px!important; vertical-align:top!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:3em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(175,175,175)!important; background-color:rgb(246,246,246)">
<code style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px 0.3em 0px 0px!important; border:0px!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:2.7em!important; line-height:1.1em!important; direction:ltr!important; display:block!important; background:none!important">4</code></td>
<td class="content" style="line-height:1.1em!important; padding:0px 0px 0px 0.5em!important; vertical-align:top!important; border-width:0px 0px 0px 3px!important; margin:0px!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background-color:rgb(246,246,246)">
<code class="functions" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; direction:ltr!important; display:inline!important; color:rgb(255,20,147)!important; background:none!important">import</code>&nbsp;<code class="plain" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; direction:ltr!important; display:inline!important; background:none!important">java.lang.management.ManagementFactory</code></td>
</tr>
</tbody>
</table>
</div>
<div class="line alt1" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important">
<table style="border-spacing:0px; max-width:100%; border-collapse:collapse!important; width:auto!important; margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="line-height:1.1em!important; padding:0px!important; vertical-align:top!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:3em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(175,175,175)!important; background-color:rgb(246,246,246)">
<code style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px 0.3em 0px 0px!important; border:0px!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:2.7em!important; line-height:1.1em!important; direction:ltr!important; display:block!important; background:none!important">5</code></td>
<td class="content" style="line-height:1.1em!important; padding:0px 0px 0px 0.5em!important; vertical-align:top!important; border-width:0px 0px 0px 3px!important; margin:0px!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background-color:rgb(246,246,246)">
&nbsp;</td>
</tr>
</tbody>
</table>
</div>
<div class="line alt2" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none rgb(248,248,248)!important">
<table style="border-spacing:0px; max-width:100%; border-collapse:collapse!important; width:auto!important; margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="line-height:1.1em!important; padding:0px!important; vertical-align:top!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:3em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(175,175,175)!important; background-color:rgb(246,246,246)">
<code style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px 0.3em 0px 0px!important; border:0px!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:2.7em!important; line-height:1.1em!important; direction:ltr!important; display:block!important; background:none!important">6</code></td>
<td class="content" style="line-height:1.1em!important; padding:0px 0px 0px 0.5em!important; vertical-align:top!important; border-width:0px 0px 0px 3px!important; margin:0px!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background-color:rgb(246,246,246)">
<code class="plain" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; direction:ltr!important; display:inline!important; background:none!important">scala&gt;
 ManagementFactory.getRuntimeMXBean.getInputArguments</code></td>
</tr>
</tbody>
</table>
</div>
<div class="line alt1" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important">
<table style="border-spacing:0px; max-width:100%; border-collapse:collapse!important; width:auto!important; margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="line-height:1.1em!important; padding:0px!important; vertical-align:top!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:3em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(175,175,175)!important; background-color:rgb(246,246,246)">
<code style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px 0.3em 0px 0px!important; border:0px!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:2.7em!important; line-height:1.1em!important; direction:ltr!important; display:block!important; background:none!important">7</code></td>
<td class="content" style="line-height:1.1em!important; padding:0px 0px 0px 0.5em!important; vertical-align:top!important; border-width:0px 0px 0px 3px!important; margin:0px!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background-color:rgb(246,246,246)">
<code class="plain" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; direction:ltr!important; display:inline!important; background:none!important">res0:
 java.util.List[String] = [-XX:MaxPermSize=128m, -Djava.library.path=/home/hadoop/hadoop-2.4.1/lib/native, -Xms4G, -Xmx4G]</code></td>
</tr>
</tbody>
</table>
</div>
<div class="line alt2" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none rgb(248,248,248)!important">
<table style="border-spacing:0px; max-width:100%; border-collapse:collapse!important; width:auto!important; margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="line-height:1.1em!important; padding:0px!important; vertical-align:top!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:3em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(175,175,175)!important; background-color:rgb(246,246,246)">
<code style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px 0.3em 0px 0px!important; border:0px!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:2.7em!important; line-height:1.1em!important; direction:ltr!important; display:block!important; background:none!important">8</code></td>
<td class="content" style="line-height:1.1em!important; padding:0px 0px 0px 0.5em!important; vertical-align:top!important; border-width:0px 0px 0px 3px!important; margin:0px!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background-color:rgb(246,246,246)">
&nbsp;</td>
</tr>
</tbody>
</table>
</div>
<div class="line alt1" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important">
<table style="border-spacing:0px; max-width:100%; border-collapse:collapse!important; width:auto!important; margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="line-height:1.1em!important; padding:0px!important; vertical-align:top!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:3em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(175,175,175)!important; background-color:rgb(246,246,246)">
<code style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px 0.3em 0px 0px!important; border:0px!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:2.7em!important; line-height:1.1em!important; direction:ltr!important; display:block!important; background:none!important">9</code></td>
<td class="content" style="line-height:1.1em!important; padding:0px 0px 0px 0.5em!important; vertical-align:top!important; border-width:0px 0px 0px 3px!important; margin:0px!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background-color:rgb(246,246,246)">
<code class="plain" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; direction:ltr!important; display:inline!important; background:none!important">scala&gt;
 Runtime.getRuntime.maxMemory</code></td>
</tr>
</tbody>
</table>
</div>
<div class="line alt2" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none rgb(248,248,248)!important">
<table style="border-spacing:0px; max-width:100%; border-collapse:collapse!important; width:auto!important; margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="line-height:1.1em!important; padding:0px!important; vertical-align:top!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:3em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(175,175,175)!important; background-color:rgb(246,246,246)">
<code style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px 0.3em 0px 0px!important; border:0px!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:2.7em!important; line-height:1.1em!important; direction:ltr!important; display:block!important; background:none!important">10</code></td>
<td class="content" style="line-height:1.1em!important; padding:0px 0px 0px 0.5em!important; vertical-align:top!important; border-width:0px 0px 0px 3px!important; margin:0px!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background-color:rgb(246,246,246)">
<code class="plain" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; direction:ltr!important; display:inline!important; background:none!important">res1:
 Long = 4116709376</code></td>
</tr>
</tbody>
</table>
</div>
<div class="line alt1" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important">
<table style="border-spacing:0px; max-width:100%; border-collapse:collapse!important; width:auto!important; margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="line-height:1.1em!important; padding:0px!important; vertical-align:top!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:3em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(175,175,175)!important; background-color:rgb(246,246,246)">
<code style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px 0.3em 0px 0px!important; border:0px!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:2.7em!important; line-height:1.1em!important; direction:ltr!important; display:block!important; background:none!important">11</code></td>
<td class="content" style="line-height:1.1em!important; padding:0px 0px 0px 0.5em!important; vertical-align:top!important; border-width:0px 0px 0px 3px!important; margin:0px!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background-color:rgb(246,246,246)">
&nbsp;</td>
</tr>
</tbody>
</table>
</div>
<div class="line alt2" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none rgb(248,248,248)!important">
<table style="border-spacing:0px; max-width:100%; border-collapse:collapse!important; width:auto!important; margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="line-height:1.1em!important; padding:0px!important; vertical-align:top!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:3em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(175,175,175)!important; background-color:rgb(246,246,246)">
<code style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px 0.3em 0px 0px!important; border:0px!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:2.7em!important; line-height:1.1em!important; direction:ltr!important; display:block!important; background:none!important">12</code></td>
<td class="content" style="line-height:1.1em!important; padding:0px 0px 0px 0.5em!important; vertical-align:top!important; border-width:0px 0px 0px 3px!important; margin:0px!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background-color:rgb(246,246,246)">
<code class="plain" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; direction:ltr!important; display:inline!important; background:none!important">scala&gt;</code></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p style="margin-top:1.6em; margin-bottom:1.6em">Rule 4. How Spark determines maximal usable memory</p>
<div id="highlighter_888123" class="syntaxhighlighter  " style="width:990px; margin:1em 0px!important; padding:0px!important; border:1px solid rgb(224,224,224)!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:relative!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.1em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important">
<div class="lines" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<div class="line alt1" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important">
<table style="border-spacing:0px; max-width:100%; border-collapse:collapse!important; width:auto!important; margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="line-height:1.1em!important; padding:0px!important; vertical-align:top!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:3em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(175,175,175)!important; background-color:rgb(246,246,246)">
<code style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px 0.3em 0px 0px!important; border:0px!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:2.7em!important; line-height:1.1em!important; direction:ltr!important; display:block!important; background:none!important">1</code></td>
<td class="content" style="line-height:1.1em!important; padding:0px 0px 0px 0.5em!important; vertical-align:top!important; border-width:0px 0px 0px 3px!important; margin:0px!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background-color:rgb(246,246,246)">
<code class="comments" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; direction:ltr!important; display:inline!important; color:rgb(0,130,0)!important; background:none!important">//core/src/main/scala/org/apache/spark/storage/BlockManager.scala</code></td>
</tr>
</tbody>
</table>
</div>
<div class="line alt2" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none rgb(248,248,248)!important">
<table style="border-spacing:0px; max-width:100%; border-collapse:collapse!important; width:auto!important; margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="line-height:1.1em!important; padding:0px!important; vertical-align:top!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:3em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(175,175,175)!important; background-color:rgb(246,246,246)">
<code style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px 0.3em 0px 0px!important; border:0px!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:2.7em!important; line-height:1.1em!important; direction:ltr!important; display:block!important; background:none!important">2</code></td>
<td class="content" style="line-height:1.1em!important; padding:0px 0px 0px 0.5em!important; vertical-align:top!important; border-width:0px 0px 0px 3px!important; margin:0px!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background-color:rgb(246,246,246)">
<code class="comments" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; direction:ltr!important; display:inline!important; color:rgb(0,130,0)!important; background:none!important">/**
 Return the total amount of storage memory available. */</code></td>
</tr>
</tbody>
</table>
</div>
<div class="line alt1" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important">
<table style="border-spacing:0px; max-width:100%; border-collapse:collapse!important; width:auto!important; margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="line-height:1.1em!important; padding:0px!important; vertical-align:top!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:3em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(175,175,175)!important; background-color:rgb(246,246,246)">
<code style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px 0.3em 0px 0px!important; border:0px!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:2.7em!important; line-height:1.1em!important; direction:ltr!important; display:block!important; background:none!important">3</code></td>
<td class="content" style="line-height:1.1em!important; padding:0px 0px 0px 0.5em!important; vertical-align:top!important; border-width:0px 0px 0px 3px!important; margin:0px!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background-color:rgb(246,246,246)">
<code class="keyword" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-weight:bold!important; direction:ltr!important; display:inline!important; color:rgb(0,102,153)!important; background:none!important">private</code>&nbsp;<code class="keyword" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-weight:bold!important; direction:ltr!important; display:inline!important; color:rgb(0,102,153)!important; background:none!important">def</code>&nbsp;<code class="plain" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; direction:ltr!important; display:inline!important; background:none!important">getMaxMemory(conf</code><code class="keyword" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-weight:bold!important; direction:ltr!important; display:inline!important; color:rgb(0,102,153)!important; background:none!important">:</code>&nbsp;<code class="plain" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; direction:ltr!important; display:inline!important; background:none!important">SparkConf)</code><code class="keyword" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-weight:bold!important; direction:ltr!important; display:inline!important; color:rgb(0,102,153)!important; background:none!important">:</code>&nbsp;<code class="plain" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; direction:ltr!important; display:inline!important; background:none!important">Long</code><code class="keyword" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-weight:bold!important; direction:ltr!important; display:inline!important; color:rgb(0,102,153)!important; background:none!important">=</code>&nbsp;<code class="plain" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; direction:ltr!important; display:inline!important; background:none!important">{</code></td>
</tr>
</tbody>
</table>
</div>
<div class="line alt2" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none rgb(248,248,248)!important">
<table style="border-spacing:0px; max-width:100%; border-collapse:collapse!important; width:auto!important; margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="line-height:1.1em!important; padding:0px!important; vertical-align:top!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:3em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(175,175,175)!important; background-color:rgb(246,246,246)">
<code style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px 0.3em 0px 0px!important; border:0px!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:2.7em!important; line-height:1.1em!important; direction:ltr!important; display:block!important; background:none!important">4</code></td>
<td class="content" style="line-height:1.1em!important; padding:0px 0px 0px 0.5em!important; vertical-align:top!important; border-width:0px 0px 0px 3px!important; margin:0px!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background-color:rgb(246,246,246)">
<code class="spaces" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; direction:ltr!important; display:inline!important; background:none!important">&nbsp;&nbsp;</code><code class="keyword" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-weight:bold!important; direction:ltr!important; display:inline!important; color:rgb(0,102,153)!important; background:none!important">val</code>&nbsp;<code class="plain" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; direction:ltr!important; display:inline!important; background:none!important">memoryFraction</code><code class="keyword" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-weight:bold!important; direction:ltr!important; display:inline!important; color:rgb(0,102,153)!important; background:none!important">=</code>&nbsp;<code class="plain" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; direction:ltr!important; display:inline!important; background:none!important">conf.getDouble(</code><code class="string" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; direction:ltr!important; display:inline!important; color:blue!important; background:none!important">&quot;spark.storage.memoryFraction&quot;</code><code class="plain" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; direction:ltr!important; display:inline!important; background:none!important">,</code><code class="value" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; direction:ltr!important; display:inline!important; color:rgb(0,153,0)!important; background:none!important">0.6</code><code class="plain" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; direction:ltr!important; display:inline!important; background:none!important">)</code></td>
</tr>
</tbody>
</table>
</div>
<div class="line alt1" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important">
<table style="border-spacing:0px; max-width:100%; border-collapse:collapse!important; width:auto!important; margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="line-height:1.1em!important; padding:0px!important; vertical-align:top!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:3em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(175,175,175)!important; background-color:rgb(246,246,246)">
<code style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px 0.3em 0px 0px!important; border:0px!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:2.7em!important; line-height:1.1em!important; direction:ltr!important; display:block!important; background:none!important">5</code></td>
<td class="content" style="line-height:1.1em!important; padding:0px 0px 0px 0.5em!important; vertical-align:top!important; border-width:0px 0px 0px 3px!important; margin:0px!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background-color:rgb(246,246,246)">
<code class="spaces" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; direction:ltr!important; display:inline!important; background:none!important">&nbsp;&nbsp;</code><code class="keyword" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-weight:bold!important; direction:ltr!important; display:inline!important; color:rgb(0,102,153)!important; background:none!important">val</code>&nbsp;<code class="plain" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; direction:ltr!important; display:inline!important; background:none!important">safetyFraction</code><code class="keyword" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-weight:bold!important; direction:ltr!important; display:inline!important; color:rgb(0,102,153)!important; background:none!important">=</code>&nbsp;<code class="plain" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; direction:ltr!important; display:inline!important; background:none!important">conf.getDouble(</code><code class="string" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; direction:ltr!important; display:inline!important; color:blue!important; background:none!important">&quot;spark.storage.safetyFraction&quot;</code><code class="plain" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; direction:ltr!important; display:inline!important; background:none!important">,</code><code class="value" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; direction:ltr!important; display:inline!important; color:rgb(0,153,0)!important; background:none!important">0.9</code><code class="plain" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; direction:ltr!important; display:inline!important; background:none!important">)</code></td>
</tr>
</tbody>
</table>
</div>
<div class="line alt2" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none rgb(248,248,248)!important">
<table style="border-spacing:0px; max-width:100%; border-collapse:collapse!important; width:auto!important; margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="line-height:1.1em!important; padding:0px!important; vertical-align:top!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:3em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(175,175,175)!important; background-color:rgb(246,246,246)">
<code style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px 0.3em 0px 0px!important; border:0px!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:2.7em!important; line-height:1.1em!important; direction:ltr!important; display:block!important; background:none!important">6</code></td>
<td class="content" style="line-height:1.1em!important; padding:0px 0px 0px 0.5em!important; vertical-align:top!important; border-width:0px 0px 0px 3px!important; margin:0px!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background-color:rgb(246,246,246)">
<code class="spaces" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; direction:ltr!important; display:inline!important; background:none!important">&nbsp;&nbsp;</code><code class="plain" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; direction:ltr!important; display:inline!important; background:none!important">(Runtime.getRuntime.maxMemory
 * memoryFraction * safetyFraction).toLong</code></td>
</tr>
</tbody>
</table>
</div>
<div class="line alt1" style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important">
<table style="border-spacing:0px; max-width:100%; border-collapse:collapse!important; width:auto!important; margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tbody style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<tr style="margin:0px!important; padding:0px!important; border:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; font-size:1em!important; direction:ltr!important; background:none!important">
<td class="number" style="line-height:1.1em!important; padding:0px!important; vertical-align:top!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:3em!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; color:rgb(175,175,175)!important; background-color:rgb(246,246,246)">
<code style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px 0.3em 0px 0px!important; border:0px!important; margin:0px!important; outline:0px!important; text-align:right!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:2.7em!important; line-height:1.1em!important; direction:ltr!important; display:block!important; background:none!important">7</code></td>
<td class="content" style="line-height:1.1em!important; padding:0px 0px 0px 0.5em!important; vertical-align:top!important; border-width:0px 0px 0px 3px!important; margin:0px!important; border-left-style:solid!important; border-left-color:rgb(108,226,108)!important; outline:0px!important; float:none!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; direction:ltr!important; background-color:rgb(246,246,246)">
<code class="plain" style="white-space:pre-wrap; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; padding:0px!important; border:0px!important; margin:0px!important; outline:0px!important; float:none!important; vertical-align:baseline!important; position:static!important; left:auto!important; top:auto!important; right:auto!important; bottom:auto!important; height:auto!important; width:auto!important; line-height:1.1em!important; direction:ltr!important; display:inline!important; background:none!important">}</code></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p style="margin-top:1.6em; margin-bottom:1.6em">We have 4116709376 * 0.6 * 0.9 = 2.07G. That is where the 2.1G value comes from. The maximal available memory of executor is derived in the same way.</p>
<p style="margin-top:1.6em; margin-bottom:1.6em">Overall, the following two formulas guide memory allocation:</p>
<ul style="margin:0px 0px 1.5em 3em">
<li>What’s seen by Yarn: (SPECIFIED_MEMORY &#43; OVERHEAD) round up to multiples of minimum-allocation-mb , with OVERHEAD = max(SPECIFIED_MEMORY * 0.07, 384M)</li><li>What’s usable for cache: (SPECIFIED_MEMORY – MEMORY_USED_BY_RUNTIME) * spark.storage.memoryFraction * spark.storage.safetyFraction</li></ul>
<h2 style="font-family:'Open Sans',sans-serif; line-height:1.2em; margin-top:0px; font-size:4rem; text-indent:-2px; letter-spacing:-1px">
3. Tuning Suggestions</h2>
<p style="margin-top:1.6em; margin-bottom:1.6em">We see that the root of memory under utilization is the over-provisioning done in almost each step. Even if a process really reaches the configured memory cap, it’s unlikely it will keep using that amount of
 memory all the time. Because Yarn actually kills a process when it exceeds the memory cap, we have to keep SPARK_XXX_MEMORY big enough. It is also very difficult to determine the actual amount of memory gets used by Spark code execution, so dealing with spark.storage.memoryFraction
 is tricky. But if one is sure that it’s unlikely for the overall memory consumption of parallel Spark apps to exceed the physical memory, the easiest way to improve memory utilization is to counter the over-provisioning with overcommitment. That is, to&nbsp;<span style="color:rgb(255,0,0)">set
 the Yarn parameter yarn.nodemanager.resource.memory-mb to MORE THAN THE AVAILABLE PHYSICAL MEMORY</span>&nbsp;(luckily Yarn does not check that). It also helps a little bit to set yarn.scheduler.minimum-allocation-mb to a small value like 100M, so an app does not
 get much more that what it asks for.</p>
<h4 style="font-family:'Open Sans',sans-serif; line-height:1; margin:0px; font-size:1.8rem">
wdong</h4>
<div><br>
</div>
<div>http://www.wdong.org/wordpress/blog/2015/01/08/spark-on-yarn-where-have-all-my-memory-gone/<br>
</div>

            <div>
                作者：xiao_jun_0820 发表于2015/5/12 10:53:32 <a href="http://blog.csdn.net/xiao_jun_0820/article/details/45666655">原文链接</a>
            </div>
            <div>
            阅读：116 评论：0 <a href="http://blog.csdn.net/xiao_jun_0820/article/details/45666655#comments" target="_blank">查看评论</a>
            </div>
        ]]>
        </description>
        <category></category>
    </item>
    <item>
        <title><![CDATA[[原]hive分区表增加字段会导致新增字段无法显示值的BUG]]></title>
        <link>http://blog.csdn.net/xiao_jun_0820/article/details/45560591</link>
        <guid>http://blog.csdn.net/xiao_jun_0820/article/details/45560591</guid>
        <author>xiao_jun_0820</author>
        <pubDate>2015/5/7 14:45:15</pubDate>
        <description><![CDATA[
            
<p>对hive分区表新增字段后，在执行插入分区的动作，会发现其实数据文件中已经有新字段&#20540;了，但是在查询的时候新字段的&#20540;还是显示为null。</p>
<p>比如我们做一个简单的问题重现</p>
<p>我们先创建一个分区表xj_test1,往分区dt=201501中插入一条数据：</p>
<p>create table xj_test1(a string,b string) partitioned by (<br>
dt string)<br>
row format delimited fields terminated by ',';<br>
<br>
INSERT OVERWRITE TABLE xj_test1 PARTITION(dt=201501)<br>
select '1','1' from dual<br>
</p>
<p><br>
</p>
<p>然后我们新加一个字段：</p>
<p>alter table xj_test1 add columns (c string);<br>
</p>
<p>再往上面的那个分区中插入数据：</p>
<p>INSERT OVERWRITE TABLE xj_test1 PARTITION(dt=201501)<br>
select '1','1','1' from dual<br>
</p>
<p>按照常理的话，现在查询201501分区的数据，应该显示1,1,1 。但是新加的字段c的&#20540;为null,在hdfs上该分区目录下面的数据文件中确实已经有c字段的&#20540;了，只是查询不出来。</p>
<p>原因是修改表结构以后，元数据库中的SDS中该表对应的CD_ID会改变，但是该表分区下面对应的CD_ID还是原来表的CD_ID，</p>
<p>比如我这边测试表叫：xj_test1，分区字段叫dt</p>
<p>查看表的CD_ID：select CD_ID from SDS where LOCATION='hdfs://n1:8020/user/hive/warehouse/xj_test1' ，（假设我们这里查出来表的新的CD_ID&#20540;为35178）</p>
<p>查看表的所有分区的CD_ID：SELECT * FROM SDS WHERE LOCATION LIKE 'hdfs://n1:8020/user/hive/warehouse/xj_test1/dt=%'</p>
<p>我们需要手工更新一下现有分区的CD_ID的&#20540;为表CD_ID的&#20540;：</p>
<p>UPDATE SDS SET CD_ID=35178 WHERE LOCATION LIKE 'hdfs://n1:8020/user/hive/warehouse/xj_test1/dt=%'</p>
<p>然后我们再去查询一下表xj_test1，字段c的&#20540;可以正常的显示出来了。</p>
<p><br>
</p>
<p>当然，删除分区重建也是可以的，具体选择哪种方法根据实际情况决定，毕竟删除分区是会删除数据的，如果不允许删除原来的数据，建议还是修改元数据。</p>
<p><br>
</p>

            <div>
                作者：xiao_jun_0820 发表于2015/5/7 14:45:15 <a href="http://blog.csdn.net/xiao_jun_0820/article/details/45560591">原文链接</a>
            </div>
            <div>
            阅读：337 评论：0 <a href="http://blog.csdn.net/xiao_jun_0820/article/details/45560591#comments" target="_blank">查看评论</a>
            </div>
        ]]>
        </description>
        <category></category>
    </item>
    <item>
        <title><![CDATA[[转]让并发和容错更容易：Akka示例教程]]></title>
        <link>http://blog.csdn.net/xiao_jun_0820/article/details/45191369</link>
        <guid>http://blog.csdn.net/xiao_jun_0820/article/details/45191369</guid>
        <author>xiao_jun_0820</author>
        <pubDate>2015/4/22 10:19:12</pubDate>
        <description><![CDATA[
            
<div style="color:rgb(79,79,78); font-family:宋体; font-size:14px; line-height:22px; font-weight:bold">
让并发和容错更容易：Akka示例教程</div>
<span style="color:rgb(79,79,78); font-family:宋体; font-size:14px; line-height:22px">发布时间： 2014-12-18 10:14:59 &nbsp;</span><a target="_blank" href="http://m.baidu.com/bd_page_type=1/pu=sz%40224_220%2Cta%40middle___3_537/uid=0/t=wap/w=0_10_scala&#43;akka%E6%95%99%E7%A8%8B/ssid=0/from=0/l=0/baiduid=DA24F137D6E03F965960C411736D016F/tc?pn=11&amp;fillback=01003334337b6469767b74656d705f696e666f5f746f707b7b2f302f312f332f312f302f367b615b305d7b240000&amp;m=0&amp;baiduid=DA24F137D6E03F965960C411736D016F&amp;src=www%2Ecstor%2Ecn%2Ftextdetail%5F8116%2Ehtml" style="color:rgb(102,102,102); display:inline-block; font-family:宋体; font-size:14px; line-height:22px"></a><span style="color:rgb(79,79,78); font-family:宋体; font-size:14px; line-height:22px">&nbsp;</span><a target="_blank" href="http://m.baidu.com/bd_page_type=1/pu=sz%40224_220%2Cta%40middle___3_537/uid=0/t=wap/w=0_10_scala&#43;akka%E6%95%99%E7%A8%8B/ssid=0/from=0/l=0/baiduid=DA24F137D6E03F965960C411736D016F/tc?pn=11&amp;fillback=01003334357b6469767b74656d705f696e666f5f746f707b7b2f302f312f332f312f302f367b615b315d7b240000&amp;m=0&amp;baiduid=DA24F137D6E03F965960C411736D016F&amp;src=www%2Ecstor%2Ecn%2Ftextdetail%5F8116%2Ehtml" style="color:rgb(102,102,102); display:inline-block; font-family:宋体; font-size:14px; line-height:22px"></a><span style="color:rgb(79,79,78); font-family:宋体; font-size:14px; line-height:22px">&nbsp;</span><a target="_blank" href="http://m.baidu.com/bd_page_type=1/pu=sz%40224_220%2Cta%40middle___3_537/uid=0/t=wap/w=0_10_scala&#43;akka%E6%95%99%E7%A8%8B/ssid=0/from=0/l=0/baiduid=DA24F137D6E03F965960C411736D016F/tc?pn=11&amp;fillback=01003334377b6469767b74656d705f696e666f5f746f707b7b2f302f312f332f312f302f367b615b325d7b240000&amp;m=0&amp;baiduid=DA24F137D6E03F965960C411736D016F&amp;src=www%2Ecstor%2Ecn%2Ftextdetail%5F8116%2Ehtml" style="color:rgb(102,102,102); display:inline-block; font-family:宋体; font-size:14px; line-height:22px"></a><span style="color:rgb(79,79,78); font-family:宋体; font-size:14px; line-height:22px"></span>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; color:rgb(79,79,78); font-family:宋体; font-size:14px; line-height:22px">
<span style="color:#4f4f4e">　　Akka用<span style="color:#c60a00">Scala</span>语言写成，为开发高并发、分布式和容错式应用提供了便利，对开发者隐藏了很大程度的复杂性。把Akka用好肯定需要了解比这个教程更多的内容，但是希望这里的介绍和示例能够引起你的注意并继续了解Akka。&nbsp;<br>
　　写并发程序很难。程序员不得不处理线程、锁和竞态条件等等，这个过程很容易出错，而且会导致程序代码难以阅读、测试和维护。&nbsp;<br>
　　所以，很多人不倾向于使用多线程编程。取而代之的是，他们使用单线程进程（译者注：只含有一个线程的进程），依赖外部服务（如数据库、队列等）处理所需的并发或异步操作。虽然这种方法在有些情况下是可行的，但还有很多其他情况不能奏效。很多实时系统——例如交易或银行业务应用，或实时游戏——等待一个单线程进程完成就太奢侈了（他们需要立即应答！）。其他的一些对于计算或资源要求非常高的系统，如果在程序中不引入并行机制就会耗时很久（有些情况下可以达到几个小时或数天）。&nbsp;<br>
　　常用的一种单线程方法（例如，在 Node.js里广泛应用）是使用基于事件的、非阻塞模式（Event-Based, NON-Blocking Paradigm，其中Paradigm也有译作成例）。虽然这种方法可以避免上下文切换、锁和阻塞，的确能提高性能，但还是不能解决并发使用多个处理器（需要启动和协调多个独立的处理器）的问题。&nbsp;<br>
　　那么，这是不是意味着为了构建一个并发程序，除了深入到线程、锁和竞态条件之外没有别的选择呢？&nbsp;<br>
　　感谢Akka框架，它为我们提供了一种选择。本教程介绍了Akka的示例，并仔细研究它如何帮助并简化分布式并发应用的实现。&nbsp;<br>
　<span style="border:0px">　Akka框架是什么&nbsp;<br>
</span>　　这篇文章介绍了Akka并仔细研究它如何帮助并简化分布式并发应用的实现。&nbsp;<br>
　　Akka是JVM（JAVA虚拟机，下同）平台上构建高并发、分布式和容错应用的工具包和运行时。Akka用&nbsp;<span style="color:#c60a00">Scala</span>语言写成，同时提供了<span style="color:#c60a00">Scala</span>和JAVA的开发接口。&nbsp;<br>
　　Akka处理并发的方法基于 Actor（没有惯用译法，文中使用原词）模型。在基于Actor的系统里，所有的事物都是Actor，就好像在面向对象设计里面所有的事物都是对象一样。但是有一个重要区别——特别是和我们的讨论相关的——那就是Actor模型是作为一个并发模型设计和架构的，而面向对象模式则不是。更具体一点，在<span style="color:#c60a00">Scala</span>的Actor系统里，Actor互相交互并共享信息但并不对交互顺序作出预设。Actor之间共享信息和发起任务的机制是消息传递。&nbsp;<br>
　　创建和调度线程、接收和分发消息以及处理竞态条件和同步的所有复杂性，都委托给框架，框架的处理对应用来说是透明的。&nbsp;<br>
　　Akka在多个Actor和下面的系统之间建立了一个层次（Layer），这样一来，Actor只需要处理消息就可以了。创建和调度线程、接收和分发消息以及处理竞态条件和同步的所有复杂性，都委托给框架，框架的处理对应用来说是透明的。&nbsp;<br>
　　Actor严&#26684;遵守 响应式声明。响应式应用的目标是通过满足以下一个或多个条件来代替传统的多线程应用：&nbsp;<br>
　　事件驱动。使用Actor，代码可以异步处理请求并用独占的方式执行非阻塞操作。&nbsp;<br>
　　可伸缩性。在Akka里，不修改代码就增加节点是可能的，感谢消息传递和本地透明性（Location Transparency）。&nbsp;<br>
　　高弹性。任何应用都会碰到错误并在某个时间点失败。Akka的“监管”（容错）策略为实现自愈系统提供了便利。&nbsp;<br>
　　响应式。今天的高性能和快速响应应用需要对用户快速反馈，因此对于事件的响应需要非常及时。Akka的非阻塞、基于消息的策略可以帮助达成这个目标。&nbsp;<br>
　　<span style="border:0px">Akka中的Actor是什么&nbsp;<br>
</span>　　Actor本质上就是接收消息并采取行动处理消息的对象。它从消息源中解耦出来，只负责正确识别接收到的消息类型，并采取相应的行动。&nbsp;<br>
　　收到一条消息之后，一个Actor可能会采取以下一个或多个行动：&nbsp;<br>
　　执行一些本身的操作（例如进行计算、持久化数据、调用外部的Web服务等）&nbsp;<br>
　　把消息或衍生消息转发给另外一个Actor&nbsp;<br>
　　实例化一个新的Actor并把消息转发给它&nbsp;<br>
　　或者，如果这个Actor认为合适的话，可能会完全忽略这条消息（也就是说，它可能选择不响应）。&nbsp;<br>
　　为了实现一个Actor，需要继承Akka.Actor.Actor这个Trait（一般译为“特征”，译法有一定争议，文中保留原词）并实现Receive方法。当一个消息发送给Actor时，它的Receive方法会被（Akka）调用。典型的实现包括使用模式匹配（Pattern Matching）来识别消息类型并作出响应，参见下面的Akka示例：</span></p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; color:rgb(79,79,78); font-family:宋体; font-size:14px; line-height:22px">
<span style="color:#4f4f4e"><img src="http://timg01.baidu-2img.cn/timg?tc&amp;size=w1425&amp;sec=1429669136&amp;di=6dec596c960ea890b604b7b714553ebd&amp;src=http%3A%2F%2Fwww%2Ecstor%2Ecn%2Fwebedit%2Fuploadfile%2F20141218101540949%2Ejpg" alt="img" style="border:0px"><br>
</span></p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; color:rgb(79,79,78); font-family:宋体; font-size:14px; line-height:22px">
<span style="color:#4f4f4e">　　模式匹配是一种相对优雅的处理消息的技术，相比基于回调的实现，更倾向于产生“更整洁”以及更容易浏览的代码。例如，考虑一个简化版的HTTP请求/响应实现。&nbsp;<br>
　　首先，我们使用JavaScript中基于回调的方式实现：</span></p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; color:rgb(79,79,78); font-family:宋体; font-size:14px; line-height:22px">
<span style="color:#4f4f4e"><img src="http://timg01.baidu-2img.cn/timg?tc&amp;size=w1425&amp;sec=1429669136&amp;di=d5c724f7ab7a029288f625de1a6b8a72&amp;src=http%3A%2F%2Fwww%2Ecstor%2Ecn%2Fwebedit%2Fuploadfile%2F20141218101611994%2Ejpg" alt="img" style="border:0px"><br>
</span></p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; color:rgb(79,79,78); font-family:宋体; font-size:14px; line-height:22px">
<span style="color:#4f4f4e">　　现在，我们把它和基于模式匹配的实现做个比较：</span></p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; color:rgb(79,79,78); font-family:宋体; font-size:14px; line-height:22px">
<span style="color:#4f4f4e"><img src="http://timg01.baidu-2img.cn/timg?tc&amp;size=w1425&amp;sec=1429669136&amp;di=6f327d7f0ef88af153a7465c6706480e&amp;src=http%3A%2F%2Fwww%2Ecstor%2Ecn%2Fwebedit%2Fuploadfile%2F20141218101642591%2Ejpg" alt="img" style="border:0px"><br>
</span></p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; color:rgb(79,79,78); font-family:宋体; font-size:14px; line-height:22px">
<span style="color:#4f4f4e">　　虽然基于回调的JavaScript代码更紧凑，但确实更难以阅读和浏览。相比而言，基于模式匹配的代码对于需要考虑哪些情况、每种情况都是怎么处理的写法更加清晰。&nbsp;<br>
　</span><span style="color:#4f4f4e"><span style="border:0px">　Actor系统&nbsp;<br>
</span>　　把一个复杂的问题不断分解成更小规模的子问题通常是一种可靠的解决问题的技术。这个方法对于计算机科学特别有效（和 单一职责原则一致），因为这样容易产生整洁的、模块化的代码，产生的冗余很少甚至没有，而且维护起来相对容易。&nbsp;<br>
　　在基于Actor的设计里，使用这种技术有助于把Actor的逻辑组织变成一个层级结构，也就是所谓的 Actor系统。Actor系统提供了一个基础框架，通过这个系统Actor之间可以进行交互。&nbsp;<br>
　　</span></p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; color:rgb(79,79,78); font-family:宋体; font-size:14px; line-height:22px">
<span style="border:0px"><img src="http://timg01.baidu-2img.cn/timg?tc&amp;size=w1425&amp;sec=1429669136&amp;di=39e49543484f4f348678785af5ad7247&amp;src=http%3A%2F%2Fwww%2Ecstor%2Ecn%2Fwebedit%2Fuploadfile%2F20141218101734183%2Epng" alt="img" style="border:0px"><br>
</span></p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; color:rgb(79,79,78); font-family:宋体; font-size:14px; line-height:22px">
<span style="color:#4f4f4e">　　在Akka里面，和Actor通信的唯一方式就是通过ActorRef。ActorRef代表Actor的一个引用，可以阻止其他对象直接访问或操作这个Actor的内部信息和状态。消息可以通过一个ActorRef以下面的语法协议中的一种发送到一个Actor：&nbsp;<br>
　　-!(“告知”) —— 发送消息并立即返回&nbsp;<br>
　　-?(“请求”) —— 发送消息并返回一个Future对象，代表一个可能的应答&nbsp;<br>
　　每个Actor都有一个收件箱，用来接收发送过来的消息。收件箱有多种实现方式可以选择，缺省的实现是先进先出（FIFO）队列。&nbsp;<br>
　　在处理多条消息时，一个Actor包含多个实例变量来保持状态。Akka确保Actor的每个实例都运行在自己的轻量级线程里，并保证每次只处理一条消息。这样一来，开发者不必担心同步或竞态条件，而每个Actor的状态都可以被可靠地保持。&nbsp;<br>
　　Akka的Actor API中提供了每个Actor执行任务所需要的有用信息：&nbsp;<br>
　　sender:当前处理消息的发送者的一个ActorRef引用&nbsp;<br>
　　context：Actor运行上下文相关的信息和方法（例如，包括实例化一个新Actor的方法ActorOf）&nbsp;<br>
　　supervisionStrategy：定义用来从错误中恢复的策略&nbsp;<br>
　　self：Actor本身的ActorRef引用&nbsp;<br>
　　Akka确保Actor的每个实例都运行在自己的轻量级线程里，并保证每次只处理一条消息。这样一来，开发者不必担心同步或竞态条件，而每个Actor的状态都可以被可靠地保持。&nbsp;<br>
　　为了把这些教程组织起来，让我们来考虑一个简单的例子：统计一个文本文件中单词的数量。&nbsp;<br>
　　为了达到演示Akka示例的目的，我们把这个问题分解为两个子任务；即（1）统计每行单词数量的“孩子”任务和（2）汇总这些单行单词数量、得到文件里单词总数的“父亲”任务。&nbsp;<br>
　　父Actor会从文件中装载每一行，然后委托一个子Actor来计算某一行的单词数量。当子Actor完成之后，它会把结果用消息发回给父Actor。父Actor会收到（每一行的）单词数量的消息并维持一个整个文件单词总数的计数器，这个计数器会在完成后返回给调用者。&nbsp;<br>
</span></p>
<p><span style="color:#4f4f4e">　　（注意以下提供的<span style="color:#c60a00">Akka教程</span>的例子只是为了教学目的，所以没有顾及所有的边界条件、性能优化等。同时，完整可编译版本的代码示例可以在这个GIST中找到）</span></p>
<p><span style="color:#4f4f4e"></span></p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; color:rgb(79,79,78); font-family:宋体; font-size:14px; line-height:22px">
<span style="color:#4f4f4e">让我们首先看一个子类StringCounterActor的示例实现：</span></p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; color:rgb(79,79,78); font-family:宋体; font-size:14px; line-height:22px">
<span style="color:#4f4f4e"><img src="http://timg01.baidu-2img.cn/timg?tc&amp;size=w1425&amp;sec=1429667516&amp;di=f46a5d1560ff447e2c297b2519d59b1e&amp;src=http%3A%2F%2Fwww%2Ecstor%2Ecn%2Fwebedit%2Fuploadfile%2F20141218101800403%2Ejpg" alt="img" style="border:0px"><br>
</span></p>
<span style="color:#4f4f4e; color:rgb(79,79,78); font-family:宋体; font-size:14px; line-height:22px"><span style="color:#4f4f4e">&nbsp; 　这个Actor有一个非常简单的任务：接收ProcessStringMsg消息（包含一行文本），计算这行文本中单词的数量，并把结果通过一个StringProcessedMsg消息返回给发送者。请注意我们已经实现了我们的类，使用！（“告知”）方法发出StringProcessedMsg消息（发出消息并立即返回）。&nbsp;<br>
　　好了，现在我们来关注父WordCounterActor类：</span>&nbsp;</span><br style="color:rgb(79,79,78); font-family:宋体; font-size:14px; line-height:22px">
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; color:rgb(79,79,78); font-family:宋体; font-size:14px; line-height:22px">
<span style="color:#4f4f4e"><img src="http://timg01.baidu-2img.cn/timg?tc&amp;size=w1425&amp;sec=1429667516&amp;di=fc522c6265d51ffe706adedec6140838&amp;src=http%3A%2F%2Fwww%2Ecstor%2Ecn%2Fwebedit%2Fuploadfile%2F20141218101831608%2Ejpg" alt="img" style="border:0px"><br>
</span></p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; color:rgb(79,79,78); font-family:宋体; font-size:14px; line-height:22px">
<span style="color:#4f4f4e">　　这里面有很多细节，我们来逐一考察（注意讨论中所引用的行号基于以上代码示例）。&nbsp;<br>
　　首先，请注意要处理的文件名被传给了WordCounterActor的构造方法（第3行）。这意味着这个Actor只会用来处理一个单独的文件。这样通过避免重置状态变量（running，totalLines，linesProcessed和result）也简化了开发者的编码工作，因为这个实例只使用一次（也就是说处理一个单独的文件），然后就丢弃了。&nbsp;<br>
　　接下来，我们看到WordCounterActor处理了两种类型的消息：&nbsp;<br>
　　StartProcessFileMsg（第12行）&nbsp;<br>
　　从最初启动WordCounterActor的外部Actor接收到的消息&nbsp;<br>
　　收到这个消息之后，WordCounterActor首先检查它收到的是不是一个重复的请求&nbsp;<br>
　　如果这个请求是重复的，那么WordCounterActor生成一个警告，然后就不做别的事了（第16行）&nbsp;<br>
　　如果这不是一个重复的请求：&nbsp;<br>
　　WordCounterActor在FileSender实例变量（注意这是一个Option[ActorRef]而不是一个Option[Actor]）中保存发送者的一个引用。当处理最终的StringProcessedMsg（从一个StringCounterActor子类中接收，如下文所述）时，为了以后的访问和响应，这个ActorRef是必需的。&nbsp;<br>
　　然后WordCounterActor读取文件，当文件中每行都装载之后，就会创建一个StringCounterActor，需要处理的包含行文本的消息就会传递给它（第21-24行）。&nbsp;<br>
　　StringProcessedMsg（第27行）&nbsp;<br>
　　当处理完成分配给它的行之后，从StringCounterActor处接收到的消息&nbsp;<br>
　　收到此消息之后，WordCounterActor会把文件的行计数器增加，如果所有的行都处理完毕（也就是说，当totalLines和linesProcessed相等），它会把最终结果发给原来的FileSender（第28-31行）。&nbsp;<br>
　　再次需要注意的是，在Akka里，Actor之间通信的唯一机制就是消息传递。消息是Actor之间唯一共享的东西，而且因为多个Actor可能会并发访问同样的消息，所以为了避免竞态条件和不可预期的行为，消息的不可变性非常重要。&nbsp;<br>
　　因为Case Class默认是不可变的并且可以和模式匹配无缝集成，所以用Case Class的形式来传递消息是很常见的。（<span style="color:#c60a00">Scala</span>中的Case Class就是正常的类，唯一不同的是通过模式匹配提供了可以递归分解的机制）。&nbsp;<br>
　　让我们通过运行整个应用的示例代码来结束这个例子。</span></p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; color:rgb(79,79,78); font-family:宋体; font-size:14px; line-height:22px">
<span style="color:#4f4f4e"><img src="http://timg01.baidu-2img.cn/timg?tc&amp;size=w1425&amp;sec=1429667516&amp;di=5a57670ef8e9f13e8629aac859fe5547&amp;src=http%3A%2F%2Fwww%2Ecstor%2Ecn%2Fwebedit%2Fuploadfile%2F20141218102003810%2Ejpg" alt="img" style="border:0px"><br>
</span></p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; color:rgb(79,79,78); font-family:宋体; font-size:14px; line-height:22px">
<span style="color:#4f4f4e">　　请注意这里的?方法是怎样发送一条消息的。用这种方法，调用者可以使用返回的 Future对象，当完成之后可以打印出最后结果并最终通过停掉Actor系统退出程序。&nbsp;<br>
　　<span style="border:0px">Akka的容错和监管者策略&nbsp;<br>
</span>　　在Actor系统里，每个Actor都是其子孙的监管者。如果Actor处理消息时失败，它就会暂停自己及其子孙并发送一个消息给它的监管者，通常是以异常的形式。&nbsp;<br>
　　在Akka里面，监管者策略是定义你的系统容错行为的主要并且直接的机制。&nbsp;<br>
　　在Akka里面，一个监管者对于从子孙传递上来的异常的响应和处理方式称作监管者策略。 监管者策略是定义你的系统容错行为的主要并且直接的机制。&nbsp;<br>
　　当一条消息指示有一个错误到达了一个监管者，它会采取如下行动之一：&nbsp;<br>
　　<span style="border:0px">恢复孩子（及其子孙），保持内部状态。</span>当孩子的状态没有被错误破坏，还可以继续正常工作的时候，可以使用这种策略。&nbsp;<br>
　　<span style="border:0px">重启孩子（及其子孙），清除内部状态。</span>这种策略应用的场景和第一种正好相反。如果孩子的状态已经被错误破坏，在它可以被用到Future之前有必须要重置其内部状态。&nbsp;<br>
　　<span style="border:0px">永久地停掉孩子（及其子孙）。</span>这种策略可以用在下面的场景中：错误条件不能被修正，但是并不影响后面执行的操作，这些操作可以在失败的孩子不存在的情况下完成。&nbsp;<br>
　　<span style="border:0px">停掉自己并向上传播错误。</span>适用场景：当监管者不知道如何处理错误，就把错误传递给自己的监管者。&nbsp;<br>
　　而且，一个Actor可以决定是否把行动应用在失败的子孙上抑或是应用到它的兄弟上。有两种预定义的策略：&nbsp;<br>
　　OneForOneStrategy：只把指定行动应用到失败的孩子上&nbsp;<br>
　　AllForOneStrategy：把指定行动应用到所有子孙上&nbsp;<br>
　　下面是一个使用OneForOneStrategy的简单例子：</span></p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; color:rgb(79,79,78); font-family:宋体; font-size:14px; line-height:22px">
<span style="color:#4f4f4e"><img src="http://timg01.baidu-2img.cn/timg?tc&amp;size=w1425&amp;sec=1429667516&amp;di=7f3785d2002087f16224a6aaef015692&amp;src=http%3A%2F%2Fwww%2Ecstor%2Ecn%2Fwebedit%2Fuploadfile%2F20141218102043893%2Ejpg" alt="img" style="border:0px"><br>
</span></p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; color:rgb(79,79,78); font-family:宋体; font-size:14px; line-height:22px">
<span style="color:#4f4f4e">　　如果没有指定策略，那么就使用如下默认的策略：&nbsp;<br>
　　如果在初始化Actor时出错，或者Actor被结束（Killed），那么Actor就会停止(Stopped)&nbsp;<br>
　　如果有任何类型的异常出现，Actor就会重启&nbsp;<br>
　　Akka提供的默认策略的实现如下：</span></p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; color:rgb(79,79,78); font-family:宋体; font-size:14px; line-height:22px">
<span style="color:#4f4f4e"><img src="http://timg01.baidu-2img.cn/timg?tc&amp;size=w1425&amp;sec=1429667516&amp;di=ad55962ab11b7cc2c4c84a3a7e6f03bc&amp;src=http%3A%2F%2Fwww%2Ecstor%2Ecn%2Fwebedit%2Fuploadfile%2F20141218102111229%2Ejpg" alt="img" style="border:0px"><br>
</span></p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; color:rgb(79,79,78); font-family:宋体; font-size:14px; line-height:22px">
<span style="color:#4f4f4e">　　Akka也考虑到对 定制化监管者策略的实现，但正如Akka文档也提出了警告，这么做要小心，因为错误的实现会产生诸如Actor系统被阻塞的问题（也就是说，其中的多个Actor被永久挂起了）。&nbsp;<br>
　　<span style="border:0px">本地透明性&nbsp;<br>
</span>　　Akka架构支持 本地透明性，使得Actor完全不知道他们接受的消息是从哪里发出来的。消息的发送者可能驻留在同一个JVM，也有可能是存在于其他的JVM（或者运行在同一个节点，或者运行在不同的节点）。Akka处理这些情况对于Actor（也即对于开发者）来说是完全透明的。唯一需要说明的是跨越节点的消息必须要被序列化。&nbsp;<br>
　　Akka架构支持本地透明性，使得Actor完全不知道他们接受的消息是从哪里发出来的。&nbsp;<br>
　　Actor系统设计的初衷，就是不需要任何专门的代码就可以运行在分布式环境中。Akka只需要一个配置文件（Application.Conf），用以说明发送消息到哪些节点。下面是配置文件的一个例子：</span></p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; color:rgb(79,79,78); font-family:宋体; font-size:14px; line-height:22px">
<span style="color:#4f4f4e"><img src="http://timg01.baidu-2img.cn/timg?tc&amp;size=w1425&amp;sec=1429667516&amp;di=7fa1acd2658318b4c2006dded7364f5f&amp;src=http%3A%2F%2Fwww%2Ecstor%2Ecn%2Fwebedit%2Fuploadfile%2F20141218102143856%2Ejpg" alt="img" style="border:0px"><br>
</span></p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; color:rgb(79,79,78); font-family:宋体; font-size:14px; line-height:22px">
<span style="color:#4f4f4e">　　<span style="border:0px">最后的一些提示&nbsp;<br>
</span>　　我们已经了解了Akka框架帮助完成并发和高性能的方法。然而，正如这篇教程指出的，为了充分发挥Akka的能力，在设计和实现系统时，有些要点&#20540;得考虑：&nbsp;<br>
　　我们应尽最大可能为每个Actor都分配最小的任务（如上面讨论的，遵守单一职责原则）&nbsp;<br>
　　Actor应该异步处理事件（也就是处理消息），不应该阻塞，否则就会发生上下文切换，影响性能。具体来说，最好是在一个Future对象里执行阻塞操作（例如IO），这样就不会阻塞Actor，如：</span></p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; color:rgb(79,79,78); font-family:宋体; font-size:14px; line-height:22px">
<span style="color:#4f4f4e"><img src="http://timg01.baidu-2img.cn/timg?tc&amp;size=w1425&amp;sec=1429667516&amp;di=e4df242bf3826349617001fab92eb6f3&amp;src=http%3A%2F%2Fwww%2Ecstor%2Ecn%2Fwebedit%2Fuploadfile%2F20141218102220620%2Ejpg" alt="img" style="border:0px"><br>
</span></p>
<span style="color:#4f4f4e; color:rgb(79,79,78); font-family:宋体; font-size:14px; line-height:22px">　　·要确认你的消息都是不可变的，因为互相传递消息的Actor都在它们自己的线程里并发运行。可变的消息很有可能导致不可预期的行为。&nbsp;<br>
　　·由于在节点之间发送的消息必须是可序列化的，所以必须要记住消息体越大，序列化、发送和反序列化所花费的时间就越多，这也会降低性能。&nbsp;<br>
　　<span style="border:0px">结论&nbsp;<br>
</span>　　Akka用<span style="color:#c60a00">Scala</span>语言写成，简化并为开发高并发、分布式和容错式应用提供了便利，对开发者隐藏了很大程度的复杂性。把Akka用好肯定需要了解比这个教程更多的内容，但是希望这里的介绍和示例能够引起你的注意并继续了解Akka。&nbsp;<br>
　　Amazon、VMWare和CSC只是现在积极使用Akka的一部分领军企业。可以访问 Akka的官方网站学到更多的知识，并多花点时间研究Akka是否适合你的项目。</span><br style="color:rgb(79,79,78); font-family:宋体; font-size:14px; line-height:22px">
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; color:rgb(79,79,78); font-family:宋体; font-size:14px; line-height:22px">
<span style="color:#4f4f4e">　　来源：hongbinzuo.github.io&nbsp; 作者：左洪斌</span></p>
<br>

            <div>
                作者：xiao_jun_0820 发表于2015/4/22 10:19:12 <a href="http://blog.csdn.net/xiao_jun_0820/article/details/45191369">原文链接</a>
            </div>
            <div>
            阅读：88 评论：0 <a href="http://blog.csdn.net/xiao_jun_0820/article/details/45191369#comments" target="_blank">查看评论</a>
            </div>
        ]]>
        </description>
        <category></category>
    </item>
    <item>
        <title><![CDATA[[原]spark sql cache table]]></title>
        <link>http://blog.csdn.net/xiao_jun_0820/article/details/45094873</link>
        <guid>http://blog.csdn.net/xiao_jun_0820/article/details/45094873</guid>
        <author>xiao_jun_0820</author>
        <pubDate>2015/4/17 11:33:16</pubDate>
        <description><![CDATA[
            
<h3><span style="color:rgb(51,51,51)">S</span><span style="color:rgb(51,51,51)">park&nbsp;sql&nbsp;</span><span style="color:rgb(51,51,51)">Caching</span></h3>
<p><span style="color:rgb(51,51,51)">The&nbsp;</span><span style="color:rgb(68,68,68)">shark.cache</span><span style="color:rgb(51,51,51)">&nbsp;table&nbsp;property&nbsp;no&nbsp;longer&nbsp;exists,&nbsp;and&nbsp;tables&nbsp;whose&nbsp;name&nbsp;end&nbsp;with&nbsp;</span><span style="color:rgb(68,68,68)">_cached</span><span style="color:rgb(51,51,51)">&nbsp;are&nbsp;no&nbsp;longer&nbsp;automatically&nbsp;cached.&nbsp;Instead,&nbsp;we&nbsp;provide&nbsp;</span><span style="color:rgb(68,68,68)">CACHE&nbsp;TABLE</span><span style="color:rgb(51,51,51)">&nbsp;and&nbsp;</span><span style="color:rgb(68,68,68)">UNCACHE&nbsp;TABLE</span><span style="color:rgb(51,51,51)">&nbsp;statements&nbsp;to&nbsp;let&nbsp;user&nbsp;control&nbsp;table&nbsp;caching&nbsp;explicitly:</span></p>
<p style="background:rgb(245,245,245)"><span style="color:rgb(51,51,51)">CACHE&nbsp;TABLE&nbsp;logs_last_month;UNCACHE&nbsp;TABLE&nbsp;logs_last_month;</span></p>
<p><span style="color:rgb(51,51,51)">NOTE:</span><span style="color:rgb(51,51,51)">&nbsp;</span><span style="color:rgb(68,68,68)">CACHE&nbsp;TABLE&nbsp;tbl</span><span style="color:rgb(51,51,51)">&nbsp;is&nbsp;lazy,&nbsp;similar&nbsp;to&nbsp;</span><span style="color:rgb(68,68,68)">.cache</span><span style="color:rgb(51,51,51)">&nbsp;on&nbsp;an&nbsp;RDD.&nbsp;This&nbsp;command&nbsp;only&nbsp;marks&nbsp;</span><span style="color:rgb(68,68,68)">tbl</span><span style="color:rgb(51,51,51)">&nbsp;to&nbsp;ensure&nbsp;that&nbsp;partitions&nbsp;are&nbsp;cached&nbsp;when&nbsp;calculated&nbsp;but&nbsp;doesn’t&nbsp;actually&nbsp;cache&nbsp;it&nbsp;until&nbsp;a&nbsp;query&nbsp;that&nbsp;touches&nbsp;</span><span style="color:rgb(68,68,68)">tbl</span><span style="color:rgb(51,51,51)">&nbsp;is&nbsp;executed.&nbsp;To&nbsp;force&nbsp;the&nbsp;table&nbsp;to&nbsp;be&nbsp;cached,&nbsp;you&nbsp;may&nbsp;simply&nbsp;count&nbsp;the&nbsp;table&nbsp;immediately&nbsp;after&nbsp;executing&nbsp;</span><span style="color:rgb(68,68,68)">CACHE&nbsp;TABLE</span><span style="color:rgb(51,51,51)">:</span></p>
<p style="background:rgb(245,245,245)"><span style="color:rgb(51,51,51)">CACHE&nbsp;TABLE&nbsp;logs_last_month;SELECT&nbsp;COUNT(1)&nbsp;FROM&nbsp;logs_last_month;</span></p>
<p><span style="color:rgb(51,51,51)">Several&nbsp;caching&nbsp;related&nbsp;features&nbsp;are&nbsp;not&nbsp;supported&nbsp;yet:</span></p>
<p><span style="color:rgb(51,51,51)">·&nbsp;</span><span style="color:rgb(51,51,51)">User&nbsp;defined&nbsp;partition&nbsp;level&nbsp;cache&nbsp;eviction&nbsp;policy</span></p>
<p><span style="color:rgb(51,51,51)">·&nbsp;</span><span style="color:rgb(51,51,51)">RDD&nbsp;reloading</span></p>
<p><span style="color:rgb(51,51,51)">·&nbsp;</span><span style="color:rgb(51,51,51)">In-memory&nbsp;cache&nbsp;write&nbsp;through&nbsp;policy</span></p>
<p><span style="color:rgb(68,68,68)">S</span><span style="color:rgb(68,68,68)">park&nbsp;sql&nbsp;cache<span style="font-family:宋体">语法：</span></span></p>
<p><span style="color:rgb(68,68,68)">CACHE&nbsp;TABLE&nbsp;your-table-name;</span></p>
<p><span style="color:rgb(68,68,68)">UNCACHE&nbsp;TABLE&nbsp;your-table-name;</span></p>
<p><span style="color:rgb(68,68,68)">CACHE&nbsp;TABLE&nbsp;tmp-table-name&nbsp;as&nbsp;select&nbsp;*&nbsp;from&nbsp;your-table-name&nbsp;where&nbsp;field=value;</span></p>

            <div>
                作者：xiao_jun_0820 发表于2015/4/17 11:33:16 <a href="http://blog.csdn.net/xiao_jun_0820/article/details/45094873">原文链接</a>
            </div>
            <div>
            阅读：229 评论：0 <a href="http://blog.csdn.net/xiao_jun_0820/article/details/45094873#comments" target="_blank">查看评论</a>
            </div>
        ]]>
        </description>
        <category></category>
    </item>
    <item>
        <title><![CDATA[[转]spark  使用中会遇到的一些问题及解决思路]]></title>
        <link>http://blog.csdn.net/xiao_jun_0820/article/details/45038205</link>
        <guid>http://blog.csdn.net/xiao_jun_0820/article/details/45038205</guid>
        <author>xiao_jun_0820</author>
        <pubDate>2015/4/14 10:13:24</pubDate>
        <description><![CDATA[
            
<span style="word-wrap:break-word; font-weight:700; color:rgb(68,68,68); font-family:Tahoma,'Microsoft Yahei',Simsun; font-size:14px; line-height:21px">7 内存溢出问题</span>
<div align="left" style="word-wrap:break-word; color:rgb(68,68,68); font-family:Tahoma,'Microsoft Yahei',Simsun; font-size:14px; line-height:21px">
&nbsp; &nbsp; 在Spark中使用hql方法执行hive语句时，由于其在查询过程中调用的是Hive的获取元数据信息、SQL解析，并且使用Cglib等进行序列化反序列化，中间可能产生较多的class文件，导致JVM中的持久代使用较多，如果配置不当，可能引起类&#20284;于如下的OOM问题：</div>
<div align="left" style="word-wrap:break-word; color:rgb(68,68,68); font-family:Tahoma,'Microsoft Yahei',Simsun; font-size:14px; line-height:21px">
<div class="blockcode" style="word-wrap:break-word; overflow:hidden; margin:10px 0px; padding:10px 0px 5px 10px; color:rgb(102,102,102); zoom:1; border:1px solid rgb(204,204,204)">
<div id="code_zxs" style="word-wrap:break-word">
<ol style="word-wrap:break-word; margin:0px 0px 0px 10px!important; padding:0px!important">
<li style="word-wrap:break-word; margin:0px 0px 0px 2em; padding:0px 0px 0px 10px; list-style-type:decimal-leading-zero; font-family:Monaco,Consolas,'Lucida Console','Courier New',serif; font-size:12px; line-height:1.8em">
Exception in thread &quot;Thread-2&quot; java.lang.OutOfMemoryError: PermGen space</li></ol>
</div>
<span style="word-wrap:break-word; margin-left:43px; font-size:12px; color:rgb(51,102,153)!important">复制代码</span></div>
<br style="word-wrap:break-word">
</div>
<div align="left" style="word-wrap:break-word; color:rgb(68,68,68); font-family:Tahoma,'Microsoft Yahei',Simsun; font-size:14px; line-height:21px">
原因是实际使用时，如果用的是JDK1.6版本，<span style="color:#ff0000; word-wrap:break-word">Server模式的持久代默认大小是64M，Client模式的持久代默认大小是32M</span>，而Driver端进行SQL处理时，其持久代的使用可能会达到90M，导致OOM溢出，任务失败。</div>
<div align="left" style="word-wrap:break-word; color:rgb(68,68,68); font-family:Tahoma,'Microsoft Yahei',Simsun; font-size:14px; line-height:21px">
解决方法就是在Spark的conf目录中的<span style="color:#ff0000; word-wrap:break-word">spark-defaults.conf</span>里，增加对Driver的JVM配置，因为Driver才负责SQL的解析和元数据获取。配置如下：</div>
<div align="left" style="word-wrap:break-word; color:rgb(68,68,68); font-family:Tahoma,'Microsoft Yahei',Simsun; font-size:14px; line-height:21px">
<div class="blockcode" style="word-wrap:break-word; overflow:hidden; margin:10px 0px; padding:10px 0px 5px 10px; color:rgb(102,102,102); zoom:1; border:1px solid rgb(204,204,204)">
<div id="code_cH9" style="word-wrap:break-word">
<ol style="word-wrap:break-word; margin:0px 0px 0px 10px!important; padding:0px!important">
<li style="word-wrap:break-word; margin:0px 0px 0px 2em; padding:0px 0px 0px 10px; list-style-type:decimal-leading-zero; font-family:Monaco,Consolas,'Lucida Console','Courier New',serif; font-size:12px; line-height:1.8em">
spark.driver.extraJavaOptions -XX:PermSize=128M -XX:MaxPermSize=256M&nbsp; &nbsp;</li></ol>
</div>
<span style="word-wrap:break-word; margin-left:43px; font-size:12px; color:rgb(51,102,153)!important">复制代码</span></div>
<br style="word-wrap:break-word">
但是，上述情况是在yarn-cluster模式下出现，yarn-client模式运行时倒是正常的，原来在$SPARK_HOME/bin/spark-class文件中已经设置了持久代大小：</div>
<div align="left" style="word-wrap:break-word; color:rgb(68,68,68); font-family:Tahoma,'Microsoft Yahei',Simsun; font-size:14px; line-height:21px">
<div class="blockcode" style="word-wrap:break-word; overflow:hidden; margin:10px 0px; padding:10px 0px 5px 10px; color:rgb(102,102,102); zoom:1; border:1px solid rgb(204,204,204)">
<div id="code_Al9" style="word-wrap:break-word">
<ol style="word-wrap:break-word; margin:0px 0px 0px 10px!important; padding:0px!important">
<li style="word-wrap:break-word; margin:0px 0px 0px 2em; padding:0px 0px 0px 10px; list-style-type:decimal-leading-zero; font-family:Monaco,Consolas,'Lucida Console','Courier New',serif; font-size:12px; line-height:1.8em">
JAVA_OPTS=&quot;-XX:MaxPermSize=256m $OUR_JAVA_OPTS&quot;<br style="word-wrap:break-word">
</li><li style="word-wrap:break-word; margin:0px 0px 0px 2em; padding:0px 0px 0px 10px; list-style-type:decimal-leading-zero; font-family:Monaco,Consolas,'Lucida Console','Courier New',serif; font-size:12px; line-height:1.8em">
</li></ol>
</div>
<span style="word-wrap:break-word; margin-left:43px; font-size:12px; color:rgb(51,102,153)!important">复制代码</span></div>
<br style="word-wrap:break-word">
</div>
<div align="left" style="word-wrap:break-word; color:rgb(68,68,68); font-family:Tahoma,'Microsoft Yahei',Simsun; font-size:14px; line-height:21px">
当以yarn-client模式运行时，driver就运行在客户端的spark-submit进程中，其JVM参数是取的spark-class文件中的设置，所谓未出现持久代溢出现象。</div>
<div align="left" style="word-wrap:break-word; color:rgb(68,68,68); font-family:Tahoma,'Microsoft Yahei',Simsun; font-size:14px; line-height:21px">
&nbsp; &nbsp; 总结一下Spark中各个角色的JVM参数设置：&nbsp; &nbsp;</div>
<div align="left" style="word-wrap:break-word; color:rgb(68,68,68); font-family:Tahoma,'Microsoft Yahei',Simsun; font-size:14px; line-height:21px">
(1)Driver的JVM参数：<br style="word-wrap:break-word">
-Xmx，-Xms，如果是yarn-client模式，则默认读取<span id="22_nwp" style="word-wrap:break-word; width:auto; height:auto; float:none"><a target="_blank" id="22_nwl" href="http://cpro.baidu.com/cpro/ui/uijs.php?c=news&amp;cf=1001&amp;ch=0&amp;di=128&amp;fv=16&amp;jk=79c841810a573032&amp;k=spark&amp;k0=spark&amp;kdi0=0&amp;luki=5&amp;n=10&amp;p=baidu&amp;q=92051019_cpr&amp;rb=0&amp;rs=1&amp;seller_id=1&amp;sid=3230570a8141c879&amp;ssp2=1&amp;stid=0&amp;t=tpclicked3_hc&amp;tu=u1946583&amp;u=http%3A%2F%2Fwww%2Eaboutyun%2Ecom%2Fthread%2D9425%2D1%2D1%2Ehtml&amp;urlid=0" target="_blank" style="word-wrap:break-word; color:rgb(51,102,153); text-decoration:none"><span style="word-wrap:break-word; color:rgb(0,0,255); width:auto; height:auto">spark</span></a></span>-env文件中的SPARK_DRIVER_MEMORY&#20540;，-Xmx，-Xms&#20540;一样大小；如果是yarn-cluster模式，则读取的是spark-default.conf文件中的spark.driver.extraJavaOptions对应的JVM参数&#20540;。<br style="word-wrap:break-word">
<span style="color:#0000ff; word-wrap:break-word">PermSize，如果是yarn-client模式，则是默认读取<span id="18_nwp" style="word-wrap:break-word; width:auto; height:auto; float:none"><a target="_blank" id="18_nwl" href="http://cpro.baidu.com/cpro/ui/uijs.php?c=news&amp;cf=1001&amp;ch=0&amp;di=128&amp;fv=16&amp;jk=79c841810a573032&amp;k=spark&amp;k0=spark&amp;kdi0=0&amp;luki=5&amp;n=10&amp;p=baidu&amp;q=92051019_cpr&amp;rb=0&amp;rs=1&amp;seller_id=1&amp;sid=3230570a8141c879&amp;ssp2=1&amp;stid=0&amp;t=tpclicked3_hc&amp;tu=u1946583&amp;u=http%3A%2F%2Fwww%2Eaboutyun%2Ecom%2Fthread%2D9425%2D1%2D1%2Ehtml&amp;urlid=0" target="_blank" style="word-wrap:break-word; color:rgb(51,102,153); text-decoration:none"><span style="word-wrap:break-word; color:rgb(0,0,255); width:auto; height:auto">spark</span></a></span>-class文件中的JAVA_OPTS=&quot;-XX:MaxPermSize=256m
 $OUR_JAVA_OPTS&quot;&#20540;；如果是yarn-cluster模式，读取的是spark-default.conf文件中的spark.driver.extraJavaOptions对应的JVM参数&#20540;。</span><br style="word-wrap:break-word">
GC方式，如果是yarn-client模式，默认读取的是spark-class文件中的JAVA_OPTS；如果是yarn-cluster模式，则读取的是spark-default.conf文件中的spark.driver.extraJavaOptions对应的参数&#20540;。<br style="word-wrap:break-word">
<span style="word-wrap:break-word; font-weight:700"><span style="color:#ff0000; word-wrap:break-word">以上&#20540;最后均可被spark-submit工具中的--driver-java-options参数覆盖。</span></span></div>
<br style="word-wrap:break-word; color:rgb(68,68,68); font-family:Tahoma,'Microsoft Yahei',Simsun; font-size:14px; line-height:21px">
<div align="left" style="word-wrap:break-word; color:rgb(68,68,68); font-family:Tahoma,'Microsoft Yahei',Simsun; font-size:14px; line-height:21px">
(2)Executor的JVM参数：<br style="word-wrap:break-word">
-Xmx，-Xms，如果是yarn-client模式，则默认读取spark-env文件中的SPARK_EXECUTOR_MEMORY&#20540;，-Xmx，-Xms&#20540;一样大小；如果是yarn-cluster模式，则读取的是spark-default.conf文件中的spark.executor.extraJavaOptions对应的JVM参数&#20540;。<br style="word-wrap:break-word">
PermSize，两种模式都是读取的是<span id="21_nwp" style="word-wrap:break-word; width:auto; height:auto; float:none"><a target="_blank" id="21_nwl" href="http://cpro.baidu.com/cpro/ui/uijs.php?c=news&amp;cf=1001&amp;ch=0&amp;di=128&amp;fv=16&amp;jk=79c841810a573032&amp;k=spark&amp;k0=spark&amp;kdi0=0&amp;luki=5&amp;n=10&amp;p=baidu&amp;q=92051019_cpr&amp;rb=0&amp;rs=1&amp;seller_id=1&amp;sid=3230570a8141c879&amp;ssp2=1&amp;stid=0&amp;t=tpclicked3_hc&amp;tu=u1946583&amp;u=http%3A%2F%2Fwww%2Eaboutyun%2Ecom%2Fthread%2D9425%2D1%2D1%2Ehtml&amp;urlid=0" target="_blank" style="word-wrap:break-word; color:rgb(51,102,153); text-decoration:none"><span style="word-wrap:break-word; color:rgb(0,0,255); width:auto; height:auto">spark</span></a></span>-default.conf文件中的spark.executor.extraJavaOptions对应的JVM参数&#20540;。<br style="word-wrap:break-word">
GC方式，两种模式都是读取的是spark-default.conf文件中的spark.executor.extraJavaOptions对应的JVM参数&#20540;。</div>
<br style="word-wrap:break-word; color:rgb(68,68,68); font-family:Tahoma,'Microsoft Yahei',Simsun; font-size:14px; line-height:21px">
<div align="left" style="word-wrap:break-word; color:rgb(68,68,68); font-family:Tahoma,'Microsoft Yahei',Simsun; font-size:14px; line-height:21px">
(3)Executor数目及所占CPU个数<br style="word-wrap:break-word">
<span style="color:#ffa500; word-wrap:break-word">如果是yarn-client模式，Executor数目由spark-env中的SPARK_EXECUTOR_INSTANCES指定，每个实例的数目由SPARK_EXECUTOR_CORES指定；</span><span style="color:#0000ff; word-wrap:break-word">如果是yarn-cluster模式，Executor的数目由spark-submit工具的--num-executors参数指定，默认是2个实例，而每个Executor使用的CPU数目由--executor-cores指定，默认为1核。</span><br style="word-wrap:break-word">
每个Executor运行时的信息可以通过yarn logs命令查看到，类&#20284;于如下：</div>
<div align="left" style="word-wrap:break-word; color:rgb(68,68,68); font-family:Tahoma,'Microsoft Yahei',Simsun; font-size:14px; line-height:21px">
<div class="blockcode" style="word-wrap:break-word; overflow:hidden; margin:10px 0px; padding:10px 0px 5px 10px; color:rgb(102,102,102); zoom:1; border:1px solid rgb(204,204,204)">
<div id="code_TSK" style="word-wrap:break-word">
<ol style="word-wrap:break-word; margin:0px 0px 0px 10px!important; padding:0px!important">
<li style="word-wrap:break-word; margin:0px 0px 0px 2em; padding:0px 0px 0px 10px; list-style-type:decimal-leading-zero; font-family:Monaco,Consolas,'Lucida Console','Courier New',serif; font-size:12px; line-height:1.8em">
14/08/13 18:12:59 INFO org.apache.spark.Logging$class.logInfo(Logging.scala:58): Setting up executor with commands: List($JAVA_HOME/bin/java, -server, -XX:OnOutOfMemoryError='kill %p', -Xms1024m -Xmx1024m , -XX:PermSize=256M -XX:MaxPermSize=256M -verbose:gc
 -XX:&#43;PrintGCDetails -XX:&#43;PrintGCTimeStamps -XX:&#43;PrintHeapAtGC -Xloggc:/tmp/<span id="16_nwp" style="word-wrap:break-word; width:auto; height:auto; float:none"><a target="_blank" id="16_nwl" href="http://cpro.baidu.com/cpro/ui/uijs.php?c=news&amp;cf=1001&amp;ch=0&amp;di=128&amp;fv=16&amp;jk=79c841810a573032&amp;k=spark&amp;k0=spark&amp;kdi0=0&amp;luki=5&amp;n=10&amp;p=baidu&amp;q=92051019_cpr&amp;rb=0&amp;rs=1&amp;seller_id=1&amp;sid=3230570a8141c879&amp;ssp2=1&amp;stid=0&amp;t=tpclicked3_hc&amp;tu=u1946583&amp;u=http%3A%2F%2Fwww%2Eaboutyun%2Ecom%2Fthread%2D9425%2D1%2D1%2Ehtml&amp;urlid=0" target="_blank" style="word-wrap:break-word; color:rgb(51,102,153); text-decoration:none"><span style="word-wrap:break-word; color:rgb(0,0,255); width:auto; height:auto">spark</span></a></span>_gc.log,
 -Djava.io.tmpdir=$PWD/tmp, -Dlog4j.configuration=log4j-spark-container.properties, org.apache.spark.executor.CoarseGrainedExecutorBackend, akka.tcp://spark@sparktest1:41606/user/CoarseGrainedScheduler, 1, sparktest2, 3, 1&gt;, &lt;LOG_DIR&gt;/stdout, 2&gt;, &lt;LOG_DIR&gt;/stderr)</li></ol>
</div>
<span style="word-wrap:break-word; margin-left:43px; font-size:12px; color:rgb(51,102,153)!important">复制代码</span></div>
<br style="word-wrap:break-word">
</div>
<div align="left" style="word-wrap:break-word; color:rgb(68,68,68); font-family:Tahoma,'Microsoft Yahei',Simsun; font-size:14px; line-height:21px">
&nbsp;&nbsp;其中，akka.tcp://spark@sparktest1:41606/user/CoarseGrainedScheduler表示当前的Executor进程所在节点，后面的1表示Executor编号，sparktest2表示ApplicationMaster的host，接着的3表示当前Executor所占用的CPU数目。</div>
<span style="word-wrap:break-word; font-weight:700; color:rgb(68,68,68); font-family:Tahoma,'Microsoft Yahei',Simsun; font-size:14px; line-height:21px">8 序列化异常</span>
<div align="left" style="word-wrap:break-word; color:rgb(68,68,68); font-family:Tahoma,'Microsoft Yahei',Simsun; font-size:14px; line-height:21px">
在Spark上执行hive语句的时候，出现类&#20284;于如下的异常：</div>
<div align="left" style="word-wrap:break-word; color:rgb(68,68,68); font-family:Tahoma,'Microsoft Yahei',Simsun; font-size:14px; line-height:21px">
<div class="blockcode" style="word-wrap:break-word; overflow:hidden; margin:10px 0px; padding:10px 0px 5px 10px; color:rgb(102,102,102); zoom:1; border:1px solid rgb(204,204,204)">
<div id="code_JFw" style="word-wrap:break-word">
<ol style="word-wrap:break-word; margin:0px 0px 0px 10px!important; padding:0px!important">
<li style="word-wrap:break-word; margin:0px 0px 0px 2em; padding:0px 0px 0px 10px; list-style-type:decimal-leading-zero; font-family:Monaco,Consolas,'Lucida Console','Courier New',serif; font-size:12px; line-height:1.8em">
org.apache.spark.SparkDriverExecutionException: Execution error<br style="word-wrap:break-word">
</li><li style="word-wrap:break-word; margin:0px 0px 0px 2em; padding:0px 0px 0px 10px; list-style-type:decimal-leading-zero; font-family:Monaco,Consolas,'Lucida Console','Courier New',serif; font-size:12px; line-height:1.8em">
&nbsp; &nbsp; at org.apache.spark.scheduler.DAGScheduler.handleTaskCompletion(DAGScheduler.scala:849)<br style="word-wrap:break-word">
</li><li style="word-wrap:break-word; margin:0px 0px 0px 2em; padding:0px 0px 0px 10px; list-style-type:decimal-leading-zero; font-family:Monaco,Consolas,'Lucida Console','Courier New',serif; font-size:12px; line-height:1.8em">
&nbsp; &nbsp; at org.apache.<span id="15_nwp" style="word-wrap:break-word; width:auto; height:auto; float:none"><a target="_blank" id="15_nwl" href="http://cpro.baidu.com/cpro/ui/uijs.php?c=news&amp;cf=1001&amp;ch=0&amp;di=128&amp;fv=16&amp;jk=79c841810a573032&amp;k=spark&amp;k0=spark&amp;kdi0=0&amp;luki=5&amp;n=10&amp;p=baidu&amp;q=92051019_cpr&amp;rb=0&amp;rs=1&amp;seller_id=1&amp;sid=3230570a8141c879&amp;ssp2=1&amp;stid=0&amp;t=tpclicked3_hc&amp;tu=u1946583&amp;u=http%3A%2F%2Fwww%2Eaboutyun%2Ecom%2Fthread%2D9425%2D1%2D1%2Ehtml&amp;urlid=0" target="_blank" style="word-wrap:break-word; color:rgb(51,102,153); text-decoration:none"><span style="word-wrap:break-word; color:rgb(0,0,255); width:auto; height:auto">spark</span></a></span>.scheduler.DAGSchedulerEventProcessActor$anonfun$receive$2.applyOrElse(DAGScheduler.scala:1231)<br style="word-wrap:break-word">
</li><li style="word-wrap:break-word; margin:0px 0px 0px 2em; padding:0px 0px 0px 10px; list-style-type:decimal-leading-zero; font-family:Monaco,Consolas,'Lucida Console','Courier New',serif; font-size:12px; line-height:1.8em">
&nbsp; &nbsp; at akka.actor.ActorCell.receiveMessage(ActorCell.scala:498)<br style="word-wrap:break-word">
</li><li style="word-wrap:break-word; margin:0px 0px 0px 2em; padding:0px 0px 0px 10px; list-style-type:decimal-leading-zero; font-family:Monaco,Consolas,'Lucida Console','Courier New',serif; font-size:12px; line-height:1.8em">
&nbsp; &nbsp; at akka.actor.ActorCell.invoke(ActorCell.scala:456)<br style="word-wrap:break-word">
</li><li style="word-wrap:break-word; margin:0px 0px 0px 2em; padding:0px 0px 0px 10px; list-style-type:decimal-leading-zero; font-family:Monaco,Consolas,'Lucida Console','Courier New',serif; font-size:12px; line-height:1.8em">
&nbsp; &nbsp; at akka.dispatch.Mailbox.processMailbox(Mailbox.scala:237)<br style="word-wrap:break-word">
</li><li style="word-wrap:break-word; margin:0px 0px 0px 2em; padding:0px 0px 0px 10px; list-style-type:decimal-leading-zero; font-family:Monaco,Consolas,'Lucida Console','Courier New',serif; font-size:12px; line-height:1.8em">
&nbsp; &nbsp; at akka.dispatch.Mailbox.run(Mailbox.scala:219)<br style="word-wrap:break-word">
</li><li style="word-wrap:break-word; margin:0px 0px 0px 2em; padding:0px 0px 0px 10px; list-style-type:decimal-leading-zero; font-family:Monaco,Consolas,'Lucida Console','Courier New',serif; font-size:12px; line-height:1.8em">
&nbsp; &nbsp; at akka.dispatch.ForkJoinExecutorConfigurator$AkkaForkJoinTask.exec(AbstractDispatcher.scala:386)<br style="word-wrap:break-word">
</li><li style="word-wrap:break-word; margin:0px 0px 0px 2em; padding:0px 0px 0px 10px; list-style-type:decimal-leading-zero; font-family:Monaco,Consolas,'Lucida Console','Courier New',serif; font-size:12px; line-height:1.8em">
&nbsp; &nbsp; at scala.concurrent.forkjoin.ForkJoinTask.doExec(ForkJoinTask.java:260)<br style="word-wrap:break-word">
</li><li style="word-wrap:break-word; margin:0px 0px 0px 2em; padding:0px 0px 0px 10px; list-style-type:decimal-leading-zero; font-family:Monaco,Consolas,'Lucida Console','Courier New',serif; font-size:12px; line-height:1.8em">
&nbsp; &nbsp; at scala.concurrent.forkjoin.ForkJoinPool$WorkQueue.runTask(ForkJoinPool.java:1339)<br style="word-wrap:break-word">
</li><li style="word-wrap:break-word; margin:0px 0px 0px 2em; padding:0px 0px 0px 10px; list-style-type:decimal-leading-zero; font-family:Monaco,Consolas,'Lucida Console','Courier New',serif; font-size:12px; line-height:1.8em">
&nbsp; &nbsp; at scala.concurrent.forkjoin.ForkJoinPool.runWorker(ForkJoinPool.java:1979)<br style="word-wrap:break-word">
</li><li style="word-wrap:break-word; margin:0px 0px 0px 2em; padding:0px 0px 0px 10px; list-style-type:decimal-leading-zero; font-family:Monaco,Consolas,'Lucida Console','Courier New',serif; font-size:12px; line-height:1.8em">
&nbsp; &nbsp; at scala.concurrent.forkjoin.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:107)<br style="word-wrap:break-word">
</li><li style="word-wrap:break-word; margin:0px 0px 0px 2em; padding:0px 0px 0px 10px; list-style-type:decimal-leading-zero; font-family:Monaco,Consolas,'Lucida Console','Courier New',serif; font-size:12px; line-height:1.8em">
Caused by: java.lang.ClassCastException: scala.collection.mutable.HashSet cannot be cast to scala.collection.mutable.BitSet<br style="word-wrap:break-word">
</li><li style="word-wrap:break-word; margin:0px 0px 0px 2em; padding:0px 0px 0px 10px; list-style-type:decimal-leading-zero; font-family:Monaco,Consolas,'Lucida Console','Courier New',serif; font-size:12px; line-height:1.8em">
&nbsp; &nbsp; at org.apache.spark.<span id="14_nwp" style="word-wrap:break-word; width:auto; height:auto; float:none"><a target="_blank" id="14_nwl" href="http://cpro.baidu.com/cpro/ui/uijs.php?c=news&amp;cf=1001&amp;ch=0&amp;di=128&amp;fv=16&amp;jk=79c841810a573032&amp;k=sql&amp;k0=sql&amp;kdi0=0&amp;luki=2&amp;n=10&amp;p=baidu&amp;q=92051019_cpr&amp;rb=0&amp;rs=1&amp;seller_id=1&amp;sid=3230570a8141c879&amp;ssp2=1&amp;stid=0&amp;t=tpclicked3_hc&amp;tu=u1946583&amp;u=http%3A%2F%2Fwww%2Eaboutyun%2Ecom%2Fthread%2D9425%2D1%2D1%2Ehtml&amp;urlid=0" target="_blank" style="word-wrap:break-word; color:rgb(51,102,153); text-decoration:none"><span style="word-wrap:break-word; color:rgb(0,0,255); width:auto; height:auto">sql</span></a></span>.execution.BroadcastNestedLoopJoin$anonfun$7.apply(joins.scala:336)<br style="word-wrap:break-word">
</li><li style="word-wrap:break-word; margin:0px 0px 0px 2em; padding:0px 0px 0px 10px; list-style-type:decimal-leading-zero; font-family:Monaco,Consolas,'Lucida Console','Courier New',serif; font-size:12px; line-height:1.8em">
&nbsp; &nbsp; at org.apache.spark.rdd.RDD$anonfun$19.apply(RDD.scala:813)<br style="word-wrap:break-word">
</li><li style="word-wrap:break-word; margin:0px 0px 0px 2em; padding:0px 0px 0px 10px; list-style-type:decimal-leading-zero; font-family:Monaco,Consolas,'Lucida Console','Courier New',serif; font-size:12px; line-height:1.8em">
&nbsp; &nbsp; at org.apache.spark.rdd.RDD$anonfun$19.apply(RDD.scala:810)<br style="word-wrap:break-word">
</li><li style="word-wrap:break-word; margin:0px 0px 0px 2em; padding:0px 0px 0px 10px; list-style-type:decimal-leading-zero; font-family:Monaco,Consolas,'Lucida Console','Courier New',serif; font-size:12px; line-height:1.8em">
&nbsp; &nbsp; at org.apache.<span id="13_nwp" style="word-wrap:break-word; width:auto; height:auto; float:none"><a target="_blank" id="13_nwl" href="http://cpro.baidu.com/cpro/ui/uijs.php?c=news&amp;cf=1001&amp;ch=0&amp;di=128&amp;fv=16&amp;jk=79c841810a573032&amp;k=spark&amp;k0=spark&amp;kdi0=0&amp;luki=5&amp;n=10&amp;p=baidu&amp;q=92051019_cpr&amp;rb=0&amp;rs=1&amp;seller_id=1&amp;sid=3230570a8141c879&amp;ssp2=1&amp;stid=0&amp;t=tpclicked3_hc&amp;tu=u1946583&amp;u=http%3A%2F%2Fwww%2Eaboutyun%2Ecom%2Fthread%2D9425%2D1%2D1%2Ehtml&amp;urlid=0" target="_blank" style="word-wrap:break-word; color:rgb(51,102,153); text-decoration:none"><span style="word-wrap:break-word; color:rgb(0,0,255); width:auto; height:auto">spark</span></a></span>.scheduler.JobWaiter.taskSucceeded(JobWaiter.scala:56)<br style="word-wrap:break-word">
</li><li style="word-wrap:break-word; margin:0px 0px 0px 2em; padding:0px 0px 0px 10px; list-style-type:decimal-leading-zero; font-family:Monaco,Consolas,'Lucida Console','Courier New',serif; font-size:12px; line-height:1.8em">
&nbsp; &nbsp; at org.apache.spark.scheduler.DAGScheduler.handleTaskCompletion(DAGScheduler.scala:845)</li></ol>
</div>
<span style="word-wrap:break-word; margin-left:43px; font-size:12px; color:rgb(51,102,153)!important">复制代码</span></div>
<br style="word-wrap:break-word">
排查其前后的日志，发现大都是序列化的东西：</div>
<div align="left" style="word-wrap:break-word; color:rgb(68,68,68); font-family:Tahoma,'Microsoft Yahei',Simsun; font-size:14px; line-height:21px">
<div class="blockcode" style="word-wrap:break-word; overflow:hidden; margin:10px 0px; padding:10px 0px 5px 10px; color:rgb(102,102,102); zoom:1; border:1px solid rgb(204,204,204)">
<div id="code_DCC" style="word-wrap:break-word">
<ol style="word-wrap:break-word; margin:0px 0px 0px 10px!important; padding:0px!important">
<li style="word-wrap:break-word; margin:0px 0px 0px 2em; padding:0px 0px 0px 10px; list-style-type:decimal-leading-zero; font-family:Monaco,Consolas,'Lucida Console','Courier New',serif; font-size:12px; line-height:1.8em">
14/08/13 11:10:01 INFO org.apache.spark.Logging$class.logInfo(Logging.scala:58): Serialized task 8.0:3 as 20849 bytes in 0 ms<br style="word-wrap:break-word">
</li><li style="word-wrap:break-word; margin:0px 0px 0px 2em; padding:0px 0px 0px 10px; list-style-type:decimal-leading-zero; font-family:Monaco,Consolas,'Lucida Console','Courier New',serif; font-size:12px; line-height:1.8em">
14/08/13 11:10:01 INFO org.apache.spark.Logging$class.logInfo(Logging.scala:58): Finished TID 813 in 25 ms on sparktest0 (progress: 3/200)</li></ol>
</div>
<span style="word-wrap:break-word; margin-left:43px; font-size:12px; color:rgb(51,102,153)!important">复制代码</span></div>
<br style="word-wrap:break-word">
而在<span id="20_nwp" style="word-wrap:break-word; width:auto; height:auto; float:none"><a target="_blank" id="20_nwl" href="http://cpro.baidu.com/cpro/ui/uijs.php?c=news&amp;cf=1001&amp;ch=0&amp;di=128&amp;fv=16&amp;jk=79c841810a573032&amp;k=spark&amp;k0=spark&amp;kdi0=0&amp;luki=5&amp;n=10&amp;p=baidu&amp;q=92051019_cpr&amp;rb=0&amp;rs=1&amp;seller_id=1&amp;sid=3230570a8141c879&amp;ssp2=1&amp;stid=0&amp;t=tpclicked3_hc&amp;tu=u1946583&amp;u=http%3A%2F%2Fwww%2Eaboutyun%2Ecom%2Fthread%2D9425%2D1%2D1%2Ehtml&amp;urlid=0" target="_blank" style="word-wrap:break-word; color:rgb(51,102,153); text-decoration:none"><span style="word-wrap:break-word; color:rgb(0,0,255); width:auto; height:auto">spark</span></a></span>-default.conf中，事先设置了序列化方式为Kryo：</div>
<div align="left" style="word-wrap:break-word; color:rgb(68,68,68); font-family:Tahoma,'Microsoft Yahei',Simsun; font-size:14px; line-height:21px">
<div class="blockcode" style="word-wrap:break-word; overflow:hidden; margin:10px 0px; padding:10px 0px 5px 10px; color:rgb(102,102,102); zoom:1; border:1px solid rgb(204,204,204)">
<div id="code_AFY" style="word-wrap:break-word">
<ol style="word-wrap:break-word; margin:0px 0px 0px 10px!important; padding:0px!important">
<li style="word-wrap:break-word; margin:0px 0px 0px 2em; padding:0px 0px 0px 10px; list-style-type:decimal-leading-zero; font-family:Monaco,Consolas,'Lucida Console','Courier New',serif; font-size:12px; line-height:1.8em">
<span id="12_nwp" style="word-wrap:break-word; width:auto; height:auto; float:none"><a target="_blank" id="12_nwl" href="http://cpro.baidu.com/cpro/ui/uijs.php?c=news&amp;cf=1001&amp;ch=0&amp;di=128&amp;fv=16&amp;jk=79c841810a573032&amp;k=spark&amp;k0=spark&amp;kdi0=0&amp;luki=5&amp;n=10&amp;p=baidu&amp;q=92051019_cpr&amp;rb=0&amp;rs=1&amp;seller_id=1&amp;sid=3230570a8141c879&amp;ssp2=1&amp;stid=0&amp;t=tpclicked3_hc&amp;tu=u1946583&amp;u=http%3A%2F%2Fwww%2Eaboutyun%2Ecom%2Fthread%2D9425%2D1%2D1%2Ehtml&amp;urlid=0" target="_blank" style="word-wrap:break-word; color:rgb(51,102,153); text-decoration:none"><span style="word-wrap:break-word; color:rgb(0,0,255); width:auto; height:auto">spark</span></a></span>.serializer
 org.apache.spark.serializer.KryoSerializer</li></ol>
</div>
<span style="word-wrap:break-word; margin-left:43px; font-size:12px; color:rgb(51,102,153)!important">复制代码</span></div>
<br style="word-wrap:break-word">
</div>
<div align="left" style="word-wrap:break-word; color:rgb(68,68,68); font-family:Tahoma,'Microsoft Yahei',Simsun; font-size:14px; line-height:21px">
根据异常信息，可见是HashSet转为BitSet类型转换失败，Kryo把松散的HashSet转换为了紧凑的BitSet，把序列化方式注释掉之后，任务可以正常执行。难道Spark的Kryo序列化做的还不到位？<span style="color:#ff0000; word-wrap:break-word">此问题需要进一步跟踪。</span></div>
<span style="word-wrap:break-word; font-weight:700; color:rgb(68,68,68); font-family:Tahoma,'Microsoft Yahei',Simsun; font-size:14px; line-height:21px">9 Executor僵死问题</span>
<div align="left" style="word-wrap:break-word; color:rgb(68,68,68); font-family:Tahoma,'Microsoft Yahei',Simsun; font-size:14px; line-height:21px">
&nbsp; &nbsp; 运行一个Spark任务，发现其运行速度远远慢于执行同样SQL语句的Hive的执行，甚至出现了OOM的错误，最后卡住达几小时！并且Executor进程在疯狂GC。</div>
<div align="left" style="word-wrap:break-word; color:rgb(68,68,68); font-family:Tahoma,'Microsoft Yahei',Simsun; font-size:14px; line-height:21px">
&nbsp; &nbsp; 截取其一Task的OOM异常信息：</div>
<div align="left" style="word-wrap:break-word; color:rgb(68,68,68); font-family:Tahoma,'Microsoft Yahei',Simsun; font-size:14px; line-height:21px">
<img id="aimg_8047" src="http://www.aboutyun.com/data/attachment/forum/201410/07/235508fned0p3ni7d83plb.png" class="zoom" width="600" alt="" style="word-wrap:break-word"></div>
<div align="left" style="word-wrap:break-word; color:rgb(68,68,68); font-family:Tahoma,'Microsoft Yahei',Simsun; font-size:14px; line-height:21px">
可以看到这是在序列化过程中发生的OOM。根据节点信息，找到对应的Executor进程，观察其Jstack信息：</div>
<div align="left" style="word-wrap:break-word; color:rgb(68,68,68); font-family:Tahoma,'Microsoft Yahei',Simsun; font-size:14px; line-height:21px">
<div class="blockcode" style="word-wrap:break-word; overflow:hidden; margin:10px 0px; padding:10px 0px 5px 10px; color:rgb(102,102,102); zoom:1; border:1px solid rgb(204,204,204)">
<div id="code_LBM" style="word-wrap:break-word">
<ol style="word-wrap:break-word; margin:0px 0px 0px 10px!important; padding:0px!important">
<li style="word-wrap:break-word; margin:0px 0px 0px 2em; padding:0px 0px 0px 10px; list-style-type:decimal-leading-zero; font-family:Monaco,Consolas,'Lucida Console','Courier New',serif; font-size:12px; line-height:1.8em">
Thread 36169: (state = BLOCKED)<br style="word-wrap:break-word">
</li><li style="word-wrap:break-word; margin:0px 0px 0px 2em; padding:0px 0px 0px 10px; list-style-type:decimal-leading-zero; font-family:Monaco,Consolas,'Lucida Console','Courier New',serif; font-size:12px; line-height:1.8em">
- java.lang.Long.valueOf(long) @bci=27, line=557 (Compiled frame)<br style="word-wrap:break-word">
</li><li style="word-wrap:break-word; margin:0px 0px 0px 2em; padding:0px 0px 0px 10px; list-style-type:decimal-leading-zero; font-family:Monaco,Consolas,'Lucida Console','Courier New',serif; font-size:12px; line-height:1.8em">
- com.esotericsoftware.kryo.serializers.DefaultSerializers$LongSerializer.read(com.esotericsoftware.kryo.Kryo, com.esotericsoftware.kryo.io.Input, java.lang.Class) @bci=5,&nbsp;<span id="11_nwp" style="word-wrap:break-word; width:auto; height:auto; float:none"><a target="_blank" id="11_nwl" href="http://cpro.baidu.com/cpro/ui/uijs.php?c=news&amp;cf=1001&amp;ch=0&amp;di=128&amp;fv=16&amp;jk=79c841810a573032&amp;k=line&amp;k0=line&amp;kdi0=0&amp;luki=3&amp;n=10&amp;p=baidu&amp;q=92051019_cpr&amp;rb=0&amp;rs=1&amp;seller_id=1&amp;sid=3230570a8141c879&amp;ssp2=1&amp;stid=0&amp;t=tpclicked3_hc&amp;tu=u1946583&amp;u=http%3A%2F%2Fwww%2Eaboutyun%2Ecom%2Fthread%2D9425%2D1%2D1%2Ehtml&amp;urlid=0" target="_blank" style="word-wrap:break-word; color:rgb(51,102,153); text-decoration:none"><span style="word-wrap:break-word; color:rgb(0,0,255); width:auto; height:auto">line</span></a></span>=113
 (Compiled frame)<br style="word-wrap:break-word">
</li><li style="word-wrap:break-word; margin:0px 0px 0px 2em; padding:0px 0px 0px 10px; list-style-type:decimal-leading-zero; font-family:Monaco,Consolas,'Lucida Console','Courier New',serif; font-size:12px; line-height:1.8em">
- com.esotericsoftware.kryo.serializers.DefaultSerializers$LongSerializer.read(com.esotericsoftware.kryo.Kryo, com.esotericsoftware.kryo.io.Input, java.lang.Class) @bci=4, line=103 (Compiled frame)<br style="word-wrap:break-word">
</li><li style="word-wrap:break-word; margin:0px 0px 0px 2em; padding:0px 0px 0px 10px; list-style-type:decimal-leading-zero; font-family:Monaco,Consolas,'Lucida Console','Courier New',serif; font-size:12px; line-height:1.8em">
- com.esotericsoftware.kryo.Kryo.readClassAndObject(com.esotericsoftware.kryo.io.Input) @bci=158, line=732 (Compiled frame)<br style="word-wrap:break-word">
</li><li style="word-wrap:break-word; margin:0px 0px 0px 2em; padding:0px 0px 0px 10px; list-style-type:decimal-leading-zero; font-family:Monaco,Consolas,'Lucida Console','Courier New',serif; font-size:12px; line-height:1.8em">
- com.esotericsoftware.kryo.serializers.DefaultArraySerializers$ObjectArraySerializer.read(com.esotericsoftware.kryo.Kryo, com.esotericsoftware.kryo.io.Input, java.lang.Class) @bci=158,&nbsp;<span id="10_nwp" style="word-wrap:break-word; width:auto; height:auto; float:none"><a target="_blank" id="10_nwl" href="http://cpro.baidu.com/cpro/ui/uijs.php?c=news&amp;cf=1001&amp;ch=0&amp;di=128&amp;fv=16&amp;jk=79c841810a573032&amp;k=line&amp;k0=line&amp;kdi0=0&amp;luki=3&amp;n=10&amp;p=baidu&amp;q=92051019_cpr&amp;rb=0&amp;rs=1&amp;seller_id=1&amp;sid=3230570a8141c879&amp;ssp2=1&amp;stid=0&amp;t=tpclicked3_hc&amp;tu=u1946583&amp;u=http%3A%2F%2Fwww%2Eaboutyun%2Ecom%2Fthread%2D9425%2D1%2D1%2Ehtml&amp;urlid=0" target="_blank" style="word-wrap:break-word; color:rgb(51,102,153); text-decoration:none"><span style="word-wrap:break-word; color:rgb(0,0,255); width:auto; height:auto">line</span></a></span>=338
 (Compiled frame)<br style="word-wrap:break-word">
</li><li style="word-wrap:break-word; margin:0px 0px 0px 2em; padding:0px 0px 0px 10px; list-style-type:decimal-leading-zero; font-family:Monaco,Consolas,'Lucida Console','Courier New',serif; font-size:12px; line-height:1.8em">
- com.esotericsoftware.kryo.serializers.DefaultArraySerializers$ObjectArraySerializer.read(com.esotericsoftware.kryo.Kryo, com.esotericsoftware.kryo.io.Input, java.lang.Class) @bci=4, line=293 (Compiled frame)<br style="word-wrap:break-word">
</li><li style="word-wrap:break-word; margin:0px 0px 0px 2em; padding:0px 0px 0px 10px; list-style-type:decimal-leading-zero; font-family:Monaco,Consolas,'Lucida Console','Courier New',serif; font-size:12px; line-height:1.8em">
- com.esotericsoftware.kryo.Kryo.readObject(com.esotericsoftware.kryo.io.Input, java.lang.Class, com.esotericsoftware.kryo.Serializer) @bci=136,&nbsp;<span id="9_nwp" style="word-wrap:break-word; width:auto; height:auto; float:none"><a target="_blank" id="9_nwl" href="http://cpro.baidu.com/cpro/ui/uijs.php?c=news&amp;cf=1001&amp;ch=0&amp;di=128&amp;fv=16&amp;jk=79c841810a573032&amp;k=line&amp;k0=line&amp;kdi0=0&amp;luki=3&amp;n=10&amp;p=baidu&amp;q=92051019_cpr&amp;rb=0&amp;rs=1&amp;seller_id=1&amp;sid=3230570a8141c879&amp;ssp2=1&amp;stid=0&amp;t=tpclicked3_hc&amp;tu=u1946583&amp;u=http%3A%2F%2Fwww%2Eaboutyun%2Ecom%2Fthread%2D9425%2D1%2D1%2Ehtml&amp;urlid=0" target="_blank" style="word-wrap:break-word; color:rgb(51,102,153); text-decoration:none"><span style="word-wrap:break-word; color:rgb(0,0,255); width:auto; height:auto">line</span></a></span>=651
 (Compiled frame)<br style="word-wrap:break-word">
</li><li style="word-wrap:break-word; margin:0px 0px 0px 2em; padding:0px 0px 0px 10px; list-style-type:decimal-leading-zero; font-family:Monaco,Consolas,'Lucida Console','Courier New',serif; font-size:12px; line-height:1.8em">
- com.esotericsoftware.kryo.serializers.FieldSerializer$ObjectField.read(com.esotericsoftware.kryo.io.Input, java.lang.Object) @bci=143, line=605 (Compiled frame)<br style="word-wrap:break-word">
</li><li style="word-wrap:break-word; margin:0px 0px 0px 2em; padding:0px 0px 0px 10px; list-style-type:decimal-leading-zero; font-family:Monaco,Consolas,'Lucida Console','Courier New',serif; font-size:12px; line-height:1.8em">
- com.esotericsoftware.kryo.serializers.FieldSerializer.read(com.esotericsoftware.kryo.Kryo, com.esotericsoftware.kryo.io.Input, java.lang.Class) @bci=44, line=221 (Compiled frame)<br style="word-wrap:break-word">
</li><li style="word-wrap:break-word; margin:0px 0px 0px 2em; padding:0px 0px 0px 10px; list-style-type:decimal-leading-zero; font-family:Monaco,Consolas,'Lucida Console','Courier New',serif; font-size:12px; line-height:1.8em">
- com.esotericsoftware.kryo.Kryo.readObject(com.esotericsoftware.kryo.io.Input, java.lang.Class, com.esotericsoftware.kryo.Serializer) @bci=136,&nbsp;<span id="8_nwp" style="word-wrap:break-word; width:auto; height:auto; float:none"><a target="_blank" id="8_nwl" href="http://cpro.baidu.com/cpro/ui/uijs.php?c=news&amp;cf=1001&amp;ch=0&amp;di=128&amp;fv=16&amp;jk=79c841810a573032&amp;k=line&amp;k0=line&amp;kdi0=0&amp;luki=3&amp;n=10&amp;p=baidu&amp;q=92051019_cpr&amp;rb=0&amp;rs=1&amp;seller_id=1&amp;sid=3230570a8141c879&amp;ssp2=1&amp;stid=0&amp;t=tpclicked3_hc&amp;tu=u1946583&amp;u=http%3A%2F%2Fwww%2Eaboutyun%2Ecom%2Fthread%2D9425%2D1%2D1%2Ehtml&amp;urlid=0" target="_blank" style="word-wrap:break-word; color:rgb(51,102,153); text-decoration:none"><span style="word-wrap:break-word; color:rgb(0,0,255); width:auto; height:auto">line</span></a></span>=651
 (Compiled frame)<br style="word-wrap:break-word">
</li><li style="word-wrap:break-word; margin:0px 0px 0px 2em; padding:0px 0px 0px 10px; list-style-type:decimal-leading-zero; font-family:Monaco,Consolas,'Lucida Console','Courier New',serif; font-size:12px; line-height:1.8em">
- com.esotericsoftware.kryo.serializers.FieldSerializer$ObjectField.read(com.esotericsoftware.kryo.io.Input, java.lang.Object) @bci=143, line=605 (Compiled frame)<br style="word-wrap:break-word">
</li><li style="word-wrap:break-word; margin:0px 0px 0px 2em; padding:0px 0px 0px 10px; list-style-type:decimal-leading-zero; font-family:Monaco,Consolas,'Lucida Console','Courier New',serif; font-size:12px; line-height:1.8em">
- com.esotericsoftware.kryo.serializers.FieldSerializer.read(com.esotericsoftware.kryo.Kryo, com.esotericsoftware.kryo.io.Input, java.lang.Class) @bci=44, line=221 (Compiled frame)<br style="word-wrap:break-word">
</li><li style="word-wrap:break-word; margin:0px 0px 0px 2em; padding:0px 0px 0px 10px; list-style-type:decimal-leading-zero; font-family:Monaco,Consolas,'Lucida Console','Courier New',serif; font-size:12px; line-height:1.8em">
- com.esotericsoftware.kryo.Kryo.readClassAndObject(com.esotericsoftware.kryo.io.Input) @bci=158,&nbsp;<span id="7_nwp" style="word-wrap:break-word; width:auto; height:auto; float:none"><a target="_blank" id="7_nwl" href="http://cpro.baidu.com/cpro/ui/uijs.php?c=news&amp;cf=1001&amp;ch=0&amp;di=128&amp;fv=16&amp;jk=79c841810a573032&amp;k=line&amp;k0=line&amp;kdi0=0&amp;luki=3&amp;n=10&amp;p=baidu&amp;q=92051019_cpr&amp;rb=0&amp;rs=1&amp;seller_id=1&amp;sid=3230570a8141c879&amp;ssp2=1&amp;stid=0&amp;t=tpclicked3_hc&amp;tu=u1946583&amp;u=http%3A%2F%2Fwww%2Eaboutyun%2Ecom%2Fthread%2D9425%2D1%2D1%2Ehtml&amp;urlid=0" target="_blank" style="word-wrap:break-word; color:rgb(51,102,153); text-decoration:none"><span style="word-wrap:break-word; color:rgb(0,0,255); width:auto; height:auto">line</span></a></span>=732
 (Compiled frame)<br style="word-wrap:break-word">
</li><li style="word-wrap:break-word; margin:0px 0px 0px 2em; padding:0px 0px 0px 10px; list-style-type:decimal-leading-zero; font-family:Monaco,Consolas,'Lucida Console','Courier New',serif; font-size:12px; line-height:1.8em">
- org.apache.spark.serializer.KryoDeserializationStream.readObject(scala.reflect.ClassTag) @bci=8, line=118 (Compiled frame)<br style="word-wrap:break-word">
</li><li style="word-wrap:break-word; margin:0px 0px 0px 2em; padding:0px 0px 0px 10px; list-style-type:decimal-leading-zero; font-family:Monaco,Consolas,'Lucida Console','Courier New',serif; font-size:12px; line-height:1.8em">
- org.apache.spark.serializer.DeserializationStream$anon$1.getNext() @bci=10, line=125 (Compiled frame)<br style="word-wrap:break-word">
</li><li style="word-wrap:break-word; margin:0px 0px 0px 2em; padding:0px 0px 0px 10px; list-style-type:decimal-leading-zero; font-family:Monaco,Consolas,'Lucida Console','Courier New',serif; font-size:12px; line-height:1.8em">
- org.apache.spark.util.NextIterator.hasNext() @bci=16, line=71 (Compiled frame)<br style="word-wrap:break-word">
</li><li style="word-wrap:break-word; margin:0px 0px 0px 2em; padding:0px 0px 0px 10px; list-style-type:decimal-leading-zero; font-family:Monaco,Consolas,'Lucida Console','Courier New',serif; font-size:12px; line-height:1.8em">
- org.apache.<span id="5_nwp" style="word-wrap:break-word; width:auto; height:auto; float:none"><a target="_blank" id="5_nwl" href="http://cpro.baidu.com/cpro/ui/uijs.php?c=news&amp;cf=1001&amp;ch=0&amp;di=128&amp;fv=16&amp;jk=79c841810a573032&amp;k=spark&amp;k0=spark&amp;kdi0=0&amp;luki=5&amp;n=10&amp;p=baidu&amp;q=92051019_cpr&amp;rb=0&amp;rs=1&amp;seller_id=1&amp;sid=3230570a8141c879&amp;ssp2=1&amp;stid=0&amp;t=tpclicked3_hc&amp;tu=u1946583&amp;u=http%3A%2F%2Fwww%2Eaboutyun%2Ecom%2Fthread%2D9425%2D1%2D1%2Ehtml&amp;urlid=0" target="_blank" style="word-wrap:break-word; color:rgb(51,102,153); text-decoration:none"><span style="word-wrap:break-word; color:rgb(0,0,255); width:auto; height:auto">spark</span></a></span>.storage.BlockManager$LazyProxyIterator$1.hasNext()
 @bci=4,&nbsp;<span id="6_nwp" style="word-wrap:break-word; width:auto; height:auto; float:none"><a target="_blank" id="6_nwl" href="http://cpro.baidu.com/cpro/ui/uijs.php?c=news&amp;cf=1001&amp;ch=0&amp;di=128&amp;fv=16&amp;jk=79c841810a573032&amp;k=line&amp;k0=line&amp;kdi0=0&amp;luki=3&amp;n=10&amp;p=baidu&amp;q=92051019_cpr&amp;rb=0&amp;rs=1&amp;seller_id=1&amp;sid=3230570a8141c879&amp;ssp2=1&amp;stid=0&amp;t=tpclicked3_hc&amp;tu=u1946583&amp;u=http%3A%2F%2Fwww%2Eaboutyun%2Ecom%2Fthread%2D9425%2D1%2D1%2Ehtml&amp;urlid=0" target="_blank" style="word-wrap:break-word; color:rgb(51,102,153); text-decoration:none"><span style="word-wrap:break-word; color:rgb(0,0,255); width:auto; height:auto">line</span></a></span>=1031
 (Compiled frame)<br style="word-wrap:break-word">
</li><li style="word-wrap:break-word; margin:0px 0px 0px 2em; padding:0px 0px 0px 10px; list-style-type:decimal-leading-zero; font-family:Monaco,Consolas,'Lucida Console','Courier New',serif; font-size:12px; line-height:1.8em">
- scala.collection.Iterator$anon$13.hasNext() @bci=4, line=371 (Compiled frame)<br style="word-wrap:break-word">
</li><li style="word-wrap:break-word; margin:0px 0px 0px 2em; padding:0px 0px 0px 10px; list-style-type:decimal-leading-zero; font-family:Monaco,Consolas,'Lucida Console','Courier New',serif; font-size:12px; line-height:1.8em">
- org.apache.spark.util.CompletionIterator.hasNext() @bci=4, line=30 (Compiled frame)<br style="word-wrap:break-word">
</li><li style="word-wrap:break-word; margin:0px 0px 0px 2em; padding:0px 0px 0px 10px; list-style-type:decimal-leading-zero; font-family:Monaco,Consolas,'Lucida Console','Courier New',serif; font-size:12px; line-height:1.8em">
- org.apache.spark.InterruptibleIterator.hasNext() @bci=22, line=39 (Compiled frame)<br style="word-wrap:break-word">
</li><li style="word-wrap:break-word; margin:0px 0px 0px 2em; padding:0px 0px 0px 10px; list-style-type:decimal-leading-zero; font-family:Monaco,Consolas,'Lucida Console','Courier New',serif; font-size:12px; line-height:1.8em">
- scala.collection.Iterator$anon$11.hasNext() @bci=4, line=327 (Compiled frame)<br style="word-wrap:break-word">
</li><li style="word-wrap:break-word; margin:0px 0px 0px 2em; padding:0px 0px 0px 10px; list-style-type:decimal-leading-zero; font-family:Monaco,Consolas,'Lucida Console','Courier New',serif; font-size:12px; line-height:1.8em">
- org.apache.<span id="3_nwp" style="word-wrap:break-word; width:auto; height:auto; float:none"><a target="_blank" id="3_nwl" href="http://cpro.baidu.com/cpro/ui/uijs.php?c=news&amp;cf=1001&amp;ch=0&amp;di=128&amp;fv=16&amp;jk=79c841810a573032&amp;k=spark&amp;k0=spark&amp;kdi0=0&amp;luki=5&amp;n=10&amp;p=baidu&amp;q=92051019_cpr&amp;rb=0&amp;rs=1&amp;seller_id=1&amp;sid=3230570a8141c879&amp;ssp2=1&amp;stid=0&amp;t=tpclicked3_hc&amp;tu=u1946583&amp;u=http%3A%2F%2Fwww%2Eaboutyun%2Ecom%2Fthread%2D9425%2D1%2D1%2Ehtml&amp;urlid=0" target="_blank" style="word-wrap:break-word; color:rgb(51,102,153); text-decoration:none"><span style="word-wrap:break-word; color:rgb(0,0,255); width:auto; height:auto">spark</span></a></span>.sql.execution.HashJoin$anonfun$execute$1.apply(scala.collection.Iterator,
 scala.collection.Iterator) @bci=14,&nbsp;<span id="4_nwp" style="word-wrap:break-word; width:auto; height:auto; float:none"><a target="_blank" id="4_nwl" href="http://cpro.baidu.com/cpro/ui/uijs.php?c=news&amp;cf=1001&amp;ch=0&amp;di=128&amp;fv=16&amp;jk=79c841810a573032&amp;k=line&amp;k0=line&amp;kdi0=0&amp;luki=3&amp;n=10&amp;p=baidu&amp;q=92051019_cpr&amp;rb=0&amp;rs=1&amp;seller_id=1&amp;sid=3230570a8141c879&amp;ssp2=1&amp;stid=0&amp;t=tpclicked3_hc&amp;tu=u1946583&amp;u=http%3A%2F%2Fwww%2Eaboutyun%2Ecom%2Fthread%2D9425%2D1%2D1%2Ehtml&amp;urlid=0" target="_blank" style="word-wrap:break-word; color:rgb(51,102,153); text-decoration:none"><span style="word-wrap:break-word; color:rgb(0,0,255); width:auto; height:auto">line</span></a></span>=77
 (Compiled frame)<br style="word-wrap:break-word">
</li><li style="word-wrap:break-word; margin:0px 0px 0px 2em; padding:0px 0px 0px 10px; list-style-type:decimal-leading-zero; font-family:Monaco,Consolas,'Lucida Console','Courier New',serif; font-size:12px; line-height:1.8em">
- org.apache.spark.<span id="2_nwp" style="word-wrap:break-word; width:auto; height:auto; float:none"><a target="_blank" id="2_nwl" href="http://cpro.baidu.com/cpro/ui/uijs.php?c=news&amp;cf=1001&amp;ch=0&amp;di=128&amp;fv=16&amp;jk=79c841810a573032&amp;k=sql&amp;k0=sql&amp;kdi0=0&amp;luki=2&amp;n=10&amp;p=baidu&amp;q=92051019_cpr&amp;rb=0&amp;rs=1&amp;seller_id=1&amp;sid=3230570a8141c879&amp;ssp2=1&amp;stid=0&amp;t=tpclicked3_hc&amp;tu=u1946583&amp;u=http%3A%2F%2Fwww%2Eaboutyun%2Ecom%2Fthread%2D9425%2D1%2D1%2Ehtml&amp;urlid=0" target="_blank" style="word-wrap:break-word; color:rgb(51,102,153); text-decoration:none"><span style="word-wrap:break-word; color:rgb(0,0,255); width:auto; height:auto">sql</span></a></span>.execution.HashJoin$anonfun$execute$1.apply(java.lang.Object,
 java.lang.Object) @bci=9, line=71 (Interpreted frame)<br style="word-wrap:break-word">
</li><li style="word-wrap:break-word; margin:0px 0px 0px 2em; padding:0px 0px 0px 10px; list-style-type:decimal-leading-zero; font-family:Monaco,Consolas,'Lucida Console','Courier New',serif; font-size:12px; line-height:1.8em">
- org.apache.spark.rdd.ZippedPartitionsRDD2.compute(org.apache.spark.Partition, org.apache.spark.TaskContext) @bci=48, line=87 (Interpreted frame)<br style="word-wrap:break-word">
</li><li style="word-wrap:break-word; margin:0px 0px 0px 2em; padding:0px 0px 0px 10px; list-style-type:decimal-leading-zero; font-family:Monaco,Consolas,'Lucida Console','Courier New',serif; font-size:12px; line-height:1.8em">
- org.apache.<span id="0_nwp" style="word-wrap:break-word; width:auto; height:auto; float:none"><a target="_blank" id="0_nwl" href="http://cpro.baidu.com/cpro/ui/uijs.php?c=news&amp;cf=1001&amp;ch=0&amp;di=128&amp;fv=16&amp;jk=79c841810a573032&amp;k=spark&amp;k0=spark&amp;kdi0=0&amp;luki=5&amp;n=10&amp;p=baidu&amp;q=92051019_cpr&amp;rb=0&amp;rs=1&amp;seller_id=1&amp;sid=3230570a8141c879&amp;ssp2=1&amp;stid=0&amp;t=tpclicked3_hc&amp;tu=u1946583&amp;u=http%3A%2F%2Fwww%2Eaboutyun%2Ecom%2Fthread%2D9425%2D1%2D1%2Ehtml&amp;urlid=0" target="_blank" style="word-wrap:break-word; color:rgb(51,102,153); text-decoration:none"><span style="word-wrap:break-word; color:rgb(0,0,255); width:auto; height:auto">spark</span></a></span>.rdd.RDD.computeOrReadCheckpoint(org.apache.spark.Partition,
 org.apache.spark.TaskContext) @bci=26,&nbsp;<span id="1_nwp" style="word-wrap:break-word; width:auto; height:auto; float:none"><a target="_blank" id="1_nwl" href="http://cpro.baidu.com/cpro/ui/uijs.php?c=news&amp;cf=1001&amp;ch=0&amp;di=128&amp;fv=16&amp;jk=79c841810a573032&amp;k=line&amp;k0=line&amp;kdi0=0&amp;luki=3&amp;n=10&amp;p=baidu&amp;q=92051019_cpr&amp;rb=0&amp;rs=1&amp;seller_id=1&amp;sid=3230570a8141c879&amp;ssp2=1&amp;stid=0&amp;t=tpclicked3_hc&amp;tu=u1946583&amp;u=http%3A%2F%2Fwww%2Eaboutyun%2Ecom%2Fthread%2D9425%2D1%2D1%2Ehtml&amp;urlid=0" target="_blank" style="word-wrap:break-word; color:rgb(51,102,153); text-decoration:none"><span style="word-wrap:break-word; color:rgb(0,0,255); width:auto; height:auto">line</span></a></span>=262
 (Interpreted frame)</li></ol>
</div>
<span style="word-wrap:break-word; margin-left:43px; font-size:12px; color:rgb(51,102,153)!important">复制代码</span></div>
<br style="word-wrap:break-word">
</div>
<div align="left" style="word-wrap:break-word; color:rgb(68,68,68); font-family:Tahoma,'Microsoft Yahei',Simsun; font-size:14px; line-height:21px">
有大量的<span style="color:#ff0000; word-wrap:break-word">BLOCKED</span>线程，继续观察GC信息，发现大量的<span style="color:#ff0000; word-wrap:break-word">FULL GC。</span></div>
<div align="left" style="word-wrap:break-word; color:rgb(68,68,68); font-family:Tahoma,'Microsoft Yahei',Simsun; font-size:14px; line-height:21px">
&nbsp; &nbsp; 分析，在插入Hive表的时候，实际上需要写HDFS，在此过程的HashJoin时，伴随着大量的Shuffle写操作，JVM的新生代不断GC，Eden Space写满了就往Survivor Space写，同时超过一定大小的数据会直接写到老生代，当新生代写满了之后，也会把老的数据搞到老生代，如果老生代空间不足了，就触发FULL GC，还是空间不够，那就OOM错误了，此时线程被Blocked，导致整个Executor处理数据的进程被卡住。</div>
<div align="left" style="word-wrap:break-word; color:rgb(68,68,68); font-family:Tahoma,'Microsoft Yahei',Simsun; font-size:14px; line-height:21px">
当处理大数据的时候，如果<span style="color:#ff0000; word-wrap:break-word">JVM配置不当</span>就容易引起上述问题。解决的方法就是增大Executor的使用内存，合理配置新生代和老生代的大小，可以将老生代的空间适当的调大点</div>
<br style="word-wrap:break-word; color:rgb(68,68,68); font-family:Tahoma,'Microsoft Yahei',Simsun; font-size:14px; line-height:21px">
<br style="word-wrap:break-word; color:rgb(68,68,68); font-family:Tahoma,'Microsoft Yahei',Simsun; font-size:14px; line-height:21px">
<div align="left" style="word-wrap:break-word; color:rgb(68,68,68); font-family:Tahoma,'Microsoft Yahei',Simsun; font-size:14px; line-height:21px">
引用：<a target="_blank" href="http://www.cnblogs.com/Scott007/p/3889959.html" target="_blank" style="word-wrap:break-word; color:rgb(51,102,153)">http://www.cnblogs.com/Scott007/p/3889959.html</a></div>

            <div>
                作者：xiao_jun_0820 发表于2015/4/14 10:13:24 <a href="http://blog.csdn.net/xiao_jun_0820/article/details/45038205">原文链接</a>
            </div>
            <div>
            阅读：1163 评论：0 <a href="http://blog.csdn.net/xiao_jun_0820/article/details/45038205#comments" target="_blank">查看评论</a>
            </div>
        ]]>
        </description>
        <category></category>
    </item>
    <item>
        <title><![CDATA[[转]How to Plan and Configure YARN and MapReduce 2]]></title>
        <link>http://blog.csdn.net/xiao_jun_0820/article/details/44831661</link>
        <guid>http://blog.csdn.net/xiao_jun_0820/article/details/44831661</guid>
        <author>xiao_jun_0820</author>
        <pubDate>2015/4/2 14:20:15</pubDate>
        <description><![CDATA[
            
<p style="color:rgb(51,51,51); font-family:'Helvetica Neue',Helvetica,Arial,'Open Sans','Lucida Grande',sans-serif; font-size:16px; line-height:24px">
As part of&nbsp;<a target="_blank" href="http://zh.hortonworks.com/products/hdp-2/" style="color:rgb(89,139,166)">HDP 2.0 Beta</a>,&nbsp;<a target="_blank" href="http://zh.hortonworks.com/hadoop/yarn/" style="color:rgb(89,139,166)">YARN</a>&nbsp;takes the resource management
 capabilities that were in MapReduce and packages them so they can be used by new engines. &nbsp;This also streamlines MapReduce to do what it does best, process data. &nbsp;With YARN, you can now run&nbsp;multiple&nbsp;applications in Hadoop, all sharing a common resource management.</p>
<p style="color:rgb(51,51,51); font-family:'Helvetica Neue',Helvetica,Arial,'Open Sans','Lucida Grande',sans-serif; font-size:16px; line-height:24px">
<img class="alignnone" alt="" src="http://hortonworks.com/wp-content/uploads/2013/05/yarn.png" width="601" height="251" style="border:0px; max-width:100%; vertical-align:middle; margin:10px 0px; height:auto"></p>
<p style="color:rgb(51,51,51); font-family:'Helvetica Neue',Helvetica,Arial,'Open Sans','Lucida Grande',sans-serif; font-size:16px; line-height:24px">
In this blog post we’ll walk through how to plan for and configure processing capacity in your enterprise HDP 2.0 cluster deployment. This will cover YARN and MapReduce 2. We’ll use an example physical cluster of slave nodes each with 48 GB ram, 12 disks and
 2 hex core CPUs (12 total cores).</p>
<p style="color:rgb(51,51,51); font-family:'Helvetica Neue',Helvetica,Arial,'Open Sans','Lucida Grande',sans-serif; font-size:16px; line-height:24px">
<img class=" wp-image-35185 alignright" alt="yarn" src="http://hortonworks.com/wp-content/uploads/2013/09/yarn.png" width="219" height="218" style="border:0px; max-width:100%; vertical-align:middle; float:right; margin:8px 0px 15px 15px; height:auto">YARN takes
 into account all the available compute resources on each machine in the cluster. Based on the available resources, YARN will negotiate resource requests from applications (such as MapReduce) running in the cluster. YARN then provides processing capacity to
 each application by allocating Containers. A Container is the basic unit of processing capacity in YARN, and is an encapsulation of resource elements (memory, cpu etc.).</p>
<h3 style="font-size:23.2000007629395px; margin:40px 0px 10px; font-family:Cabin,'Helvetica Neue',Arial,Helvetica,'Lucida Grande',sans-serif; font-weight:300; color:rgb(51,51,51)">
Configuring YARN</h3>
<p style="margin-top:0px; color:rgb(51,51,51); font-family:'Helvetica Neue',Helvetica,Arial,'Open Sans','Lucida Grande',sans-serif; font-size:16px; line-height:24px">
In a Hadoop cluster, it’s vital to balance the usage of RAM, CPU and disk so that processing is not constrained by any one of these cluster resources. As a general recommendation, we’ve found that allowing for 1-2 Containers per disk and per core gives the
 best balance for cluster utilization. So with our example cluster node with 12 disks and 12 cores, we will allow for 20 maximum Containers to be allocated to each node.</p>
<p style="color:rgb(51,51,51); font-family:'Helvetica Neue',Helvetica,Arial,'Open Sans','Lucida Grande',sans-serif; font-size:16px; line-height:24px">
Each machine in our cluster has 48 GB of RAM. Some of this RAM should be reserved for Operating System usage. On each node, we’ll assign 40 GB RAM for YARN to use and keep 8 GB for the Operating System. The following property sets the maximum memory YARN can
 utilize on the node:</p>
<p style="color:rgb(51,51,51); font-family:'Helvetica Neue',Helvetica,Arial,'Open Sans','Lucida Grande',sans-serif; font-size:16px; line-height:24px">
In&nbsp;<code style="font-family:Consolas,'Liberation Mono',Courier,monospace; font-size:13px; border:1px solid rgb(204,204,204); padding:6px 10px; background-color:rgb(242,240,239)">yarn-site.xml</code></p>
<div style="color:rgb(51,51,51); font-family:'Helvetica Neue',Helvetica,Arial,'Open Sans','Lucida Grande',sans-serif; font-size:16px; line-height:24px">
<div id="highlighter_827286" class="syntaxhighlighter  plain" style="width:805px; font-size:1em!important; margin:1em 0px!important; position:relative!important; overflow-x:auto!important; overflow-y:hidden!important">
<table border="0" cellpadding="0" cellspacing="0" style="">
<tbody style="">
<tr style="">
<td class="gutter" style="">
<div class="line number1 index0 alt2" style="">1</div>
<div class="line number2 index1 alt1" style="">2</div>
</td>
<td class="code" style="">
<div class="container" style="">
<div class="line number1 index0 alt2" style=""><code class="plain plain" style="">&lt;name&gt;yarn.nodemanager.resource.memory-mb&lt;/name&gt;</code></div>
<div class="line number2 index1 alt1" style=""><code class="plain plain" style="">&lt;value&gt;40960&lt;/value&gt;</code></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<p style="color:rgb(51,51,51); font-family:'Helvetica Neue',Helvetica,Arial,'Open Sans','Lucida Grande',sans-serif; font-size:16px; line-height:24px">
The next step is to provide YARN guidance on how to break up the total resources available into Containers. You do this by specifying the minimum unit of RAM to allocate for a Container. We want to allow for a maximum of 20 Containers, and thus need (40 GB
 total RAM) / (20 # of Containers) = 2 GB minimum per container:</p>
<p style="color:rgb(51,51,51); font-family:'Helvetica Neue',Helvetica,Arial,'Open Sans','Lucida Grande',sans-serif; font-size:16px; line-height:24px">
In&nbsp;<code style="font-family:Consolas,'Liberation Mono',Courier,monospace; font-size:13px; border:1px solid rgb(204,204,204); padding:6px 10px; background-color:rgb(242,240,239)">yarn-site.xml</code><br style="">
<code style="font-family:Consolas,'Liberation Mono',Courier,monospace; font-size:13px; border:1px solid rgb(204,204,204); padding:6px 10px; background-color:rgb(242,240,239)"></code></p>
<div style="color:rgb(51,51,51); font-family:'Helvetica Neue',Helvetica,Arial,'Open Sans','Lucida Grande',sans-serif; font-size:16px; line-height:24px">
<div id="highlighter_148228" class="syntaxhighlighter  plain" style="width:805px; font-size:1em!important; margin:1em 0px!important; position:relative!important; overflow-x:auto!important; overflow-y:hidden!important">
<table border="0" cellpadding="0" cellspacing="0" style="">
<tbody style="">
<tr style="">
<td class="gutter" style="">
<div class="line number1 index0 alt2" style="">1</div>
<div class="line number2 index1 alt1" style="">2</div>
</td>
<td class="code" style="">
<div class="container" style="">
<div class="line number1 index0 alt2" style=""><code class="plain plain" style="">&lt;name&gt;yarn.scheduler.minimum-allocation-mb&lt;/name&gt;</code></div>
<div class="line number2 index1 alt1" style=""><code class="plain plain" style="">&lt;value&gt;2048&lt;/value&gt;</code></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<p style="color:rgb(51,51,51); font-family:'Helvetica Neue',Helvetica,Arial,'Open Sans','Lucida Grande',sans-serif; font-size:16px; line-height:24px">
YARN will allocate Containers with RAM amounts greater than the&nbsp;<code style="font-family:Consolas,'Liberation Mono',Courier,monospace; font-size:13px; border:1px solid rgb(204,204,204); padding:6px 10px; background-color:rgb(242,240,239)">yarn.scheduler.minimum-allocation-mb</code>.</p>
<h3 style="font-size:23.2000007629395px; margin:40px 0px 10px; font-family:Cabin,'Helvetica Neue',Arial,Helvetica,'Lucida Grande',sans-serif; font-weight:300; color:rgb(51,51,51)">
Configuring MapReduce 2</h3>
<p style="margin-top:0px; color:rgb(51,51,51); font-family:'Helvetica Neue',Helvetica,Arial,'Open Sans','Lucida Grande',sans-serif; font-size:16px; line-height:24px">
MapReduce 2 runs on top of YARN and utilizes YARN Containers to schedule and execute its map and reduce tasks.</p>
<p style="color:rgb(51,51,51); font-family:'Helvetica Neue',Helvetica,Arial,'Open Sans','Lucida Grande',sans-serif; font-size:16px; line-height:24px">
When configuring MapReduce 2 resource utilization on YARN, there are three aspects to consider:</p>
<ol style="padding-left:20px; color:rgb(51,51,51); font-family:'Helvetica Neue',Helvetica,Arial,'Open Sans','Lucida Grande',sans-serif; font-size:16px; line-height:24px">
<li style="margin-bottom:5px">Physical RAM limit for each Map And Reduce task</li><li style="margin-bottom:5px">The JVM heap size limit for each task</li><li style="margin-bottom:5px">The amount of virtual memory each task will get</li></ol>
<p style="color:rgb(51,51,51); font-family:'Helvetica Neue',Helvetica,Arial,'Open Sans','Lucida Grande',sans-serif; font-size:16px; line-height:24px">
You can define how much maximum memory each Map and Reduce task will take. Since each Map and each Reduce will run in a separate Container, these maximum memory settings should be at least equal to or more than the YARN minimum Container allocation.</p>
<p style="color:rgb(51,51,51); font-family:'Helvetica Neue',Helvetica,Arial,'Open Sans','Lucida Grande',sans-serif; font-size:16px; line-height:24px">
For our example cluster, we have the minimum RAM for a Container (<code style="font-family:Consolas,'Liberation Mono',Courier,monospace; font-size:13px; border:1px solid rgb(204,204,204); padding:6px 10px; background-color:rgb(242,240,239)">yarn.scheduler.minimum-allocation-mb</code>)
 = 2 GB. We’ll thus assign 4 GB for Map task Containers, and 8 GB for Reduce tasks Containers.</p>
<p style="color:rgb(51,51,51); font-family:'Helvetica Neue',Helvetica,Arial,'Open Sans','Lucida Grande',sans-serif; font-size:16px; line-height:24px">
In&nbsp;<code style="font-family:Consolas,'Liberation Mono',Courier,monospace; font-size:13px; border:1px solid rgb(204,204,204); padding:6px 10px; background-color:rgb(242,240,239)">mapred-site.xml</code>:<br style="">
<code style="font-family:Consolas,'Liberation Mono',Courier,monospace; font-size:13px; border:1px solid rgb(204,204,204); padding:6px 10px; background-color:rgb(242,240,239)"></code></p>
<div style="color:rgb(51,51,51); font-family:'Helvetica Neue',Helvetica,Arial,'Open Sans','Lucida Grande',sans-serif; font-size:16px; line-height:24px">
<div id="highlighter_704105" class="syntaxhighlighter  plain" style="width:805px; font-size:1em!important; margin:1em 0px!important; position:relative!important; overflow-x:auto!important; overflow-y:hidden!important">
<table border="0" cellpadding="0" cellspacing="0" style="">
<tbody style="">
<tr style="">
<td class="gutter" style="">
<div class="line number1 index0 alt2" style="">1</div>
<div class="line number2 index1 alt1" style="">2</div>
<div class="line number3 index2 alt2" style="">3</div>
<div class="line number4 index3 alt1" style="">4</div>
</td>
<td class="code" style="">
<div class="container" style="">
<div class="line number1 index0 alt2" style=""><code class="plain plain" style="">&lt;name&gt;mapreduce.map.memory.mb&lt;/name&gt;</code></div>
<div class="line number2 index1 alt1" style=""><code class="plain plain" style="">&lt;value&gt;4096&lt;/value&gt;</code></div>
<div class="line number3 index2 alt2" style=""><code class="plain plain" style="">&lt;name&gt;mapreduce.reduce.memory.mb&lt;/name&gt;</code></div>
<div class="line number4 index3 alt1" style=""><code class="plain plain" style="">&lt;value&gt;8192&lt;/value&gt;</code></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<p style="color:rgb(51,51,51); font-family:'Helvetica Neue',Helvetica,Arial,'Open Sans','Lucida Grande',sans-serif; font-size:16px; line-height:24px">
Each Container will run JVMs for the Map and Reduce tasks. The JVM heap size should be set to lower than the Map and Reduce memory defined above, so that they are within the bounds of the Container memory allocated by YARN.</p>
<p style="color:rgb(51,51,51); font-family:'Helvetica Neue',Helvetica,Arial,'Open Sans','Lucida Grande',sans-serif; font-size:16px; line-height:24px">
In&nbsp;<code style="font-family:Consolas,'Liberation Mono',Courier,monospace; font-size:13px; border:1px solid rgb(204,204,204); padding:6px 10px; background-color:rgb(242,240,239)">mapred-site.xml</code>:<br style="">
<code style="font-family:Consolas,'Liberation Mono',Courier,monospace; font-size:13px; border:1px solid rgb(204,204,204); padding:6px 10px; background-color:rgb(242,240,239)"></code></p>
<div style="color:rgb(51,51,51); font-family:'Helvetica Neue',Helvetica,Arial,'Open Sans','Lucida Grande',sans-serif; font-size:16px; line-height:24px">
<div id="highlighter_991956" class="syntaxhighlighter  plain" style="width:805px; font-size:1em!important; margin:1em 0px!important; position:relative!important; overflow-x:auto!important; overflow-y:hidden!important">
<table border="0" cellpadding="0" cellspacing="0" style="">
<tbody style="">
<tr style="">
<td class="gutter" style="">
<div class="line number1 index0 alt2" style="">1</div>
<div class="line number2 index1 alt1" style="">2</div>
<div class="line number3 index2 alt2" style="">3</div>
<div class="line number4 index3 alt1" style="">4</div>
</td>
<td class="code" style="">
<div class="container" style="">
<div class="line number1 index0 alt2" style=""><code class="plain plain" style="">&lt;name&gt;mapreduce.map.java.opts&lt;/name&gt;</code></div>
<div class="line number2 index1 alt1" style=""><code class="plain plain" style="">&lt;value&gt;-Xmx3072m&lt;/value&gt;</code></div>
<div class="line number3 index2 alt2" style=""><code class="plain plain" style="">&lt;name&gt;mapreduce.reduce.java.opts&lt;/name&gt;</code></div>
<div class="line number4 index3 alt1" style=""><code class="plain plain" style="">&lt;value&gt;-Xmx6144m&lt;/value&gt;</code></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<p style="color:rgb(51,51,51); font-family:'Helvetica Neue',Helvetica,Arial,'Open Sans','Lucida Grande',sans-serif; font-size:16px; line-height:24px">
The above settings configure the upper limit of the physical RAM that Map and Reduce tasks will use. The virtual memory (physical &#43; paged memory) upper limit for each Map and Reduce task is determined by the virtual memory ratio each YARN Container is allowed.
 This is set by the following configuration, and the default value is 2.1:</p>
<p style="color:rgb(51,51,51); font-family:'Helvetica Neue',Helvetica,Arial,'Open Sans','Lucida Grande',sans-serif; font-size:16px; line-height:24px">
In&nbsp;<code style="font-family:Consolas,'Liberation Mono',Courier,monospace; font-size:13px; border:1px solid rgb(204,204,204); padding:6px 10px; background-color:rgb(242,240,239)">yarn-site.xml</code>:<br style="">
<code style="font-family:Consolas,'Liberation Mono',Courier,monospace; font-size:13px; border:1px solid rgb(204,204,204); padding:6px 10px; background-color:rgb(242,240,239)"></code></p>
<div style="color:rgb(51,51,51); font-family:'Helvetica Neue',Helvetica,Arial,'Open Sans','Lucida Grande',sans-serif; font-size:16px; line-height:24px">
<div id="highlighter_932471" class="syntaxhighlighter  plain" style="width:805px; font-size:1em!important; margin:1em 0px!important; position:relative!important; overflow-x:auto!important; overflow-y:hidden!important">
<table border="0" cellpadding="0" cellspacing="0" style="">
<tbody style="">
<tr style="">
<td class="gutter" style="">
<div class="line number1 index0 alt2" style="">1</div>
<div class="line number2 index1 alt1" style="">2</div>
</td>
<td class="code" style="">
<div class="container" style="">
<div class="line number1 index0 alt2" style=""><code class="plain plain" style="">&lt;name&gt;yarn.nodemanager.vmem-pmem-ratio&lt;/name&gt;</code></div>
<div class="line number2 index1 alt1" style=""><code class="plain plain" style="">&lt;value&gt;2.1&lt;/value&gt;</code></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<p style="color:rgb(51,51,51); font-family:'Helvetica Neue',Helvetica,Arial,'Open Sans','Lucida Grande',sans-serif; font-size:16px; line-height:24px">
Thus, with the above settings on our example cluster, each Map task will get the following memory allocations with the following:</p>
<ul style="color:rgb(51,51,51); font-family:'Helvetica Neue',Helvetica,Arial,'Open Sans','Lucida Grande',sans-serif; font-size:16px; line-height:24px">
<li style="">Total physical RAM allocated = 4 GB</li><li style="">JVM heap space upper limit within the Map task Container = 3 GB</li><li style="">Virtual memory upper limit = 4*2.1 = 8.2 GB</li></ul>
<p style="color:rgb(51,51,51); font-family:'Helvetica Neue',Helvetica,Arial,'Open Sans','Lucida Grande',sans-serif; font-size:16px; line-height:24px">
With YARN and MapReduce 2, there are no longer pre-configured static slots for Map and Reduce tasks. The entire cluster is available for dynamic resource allocation of Maps and Reduces as needed by the job. In our example cluster, with the above configurations,
 YARN will be able to allocate on each node up to 10 mappers (40/4) or 5 reducers (40/8) or a permutation within that.</p>

            <div>
                作者：xiao_jun_0820 发表于2015/4/2 14:20:15 <a href="http://blog.csdn.net/xiao_jun_0820/article/details/44831661">原文链接</a>
            </div>
            <div>
            阅读：69 评论：0 <a href="http://blog.csdn.net/xiao_jun_0820/article/details/44831661#comments" target="_blank">查看评论</a>
            </div>
        ]]>
        </description>
        <category></category>
    </item>
    <item>
        <title><![CDATA[[原]写了2个简单的工具脚本用来分发hdfs集群上的文件到所有节点,和远程执行命令]]></title>
        <link>http://blog.csdn.net/xiao_jun_0820/article/details/44807883</link>
        <guid>http://blog.csdn.net/xiao_jun_0820/article/details/44807883</guid>
        <author>xiao_jun_0820</author>
        <pubDate>2015/4/1 15:49:40</pubDate>
        <description><![CDATA[
            
<pre code_snippet_id="633289" snippet_file_name="blog_20150401_1_6709324"  code_snippet_id="633289" snippet_file_name="blog_20150401_1_6709324" name="code" class="plain">#!/bin/bash

if [ $# != 2 ]; then
    echo &quot;useage: $0 &lt;hdfs_file&gt; &lt;dest_dir&gt;&quot;
    exit 1
fi

CURR_PATH=&quot;$(cd &quot;`dirname &quot;$0&quot;`&quot;/; pwd)&quot;
hosts_file=$CURR_PATH&quot;/hosts&quot;

if [ ! -f &quot;$hosts_file&quot; ]; then
    echo &quot;$hosts_file not exist&quot;
    exit 1
fi


source_file=$1
dest_dir=$2
filename=$(echo $source_file | awk -F &#39;/&#39; &#39;{print $NF}&#39;)
destfilename=$dest_dir&quot;/&quot;$filename
echo $filename
echo $destfilename
hadoop fs -get $source_file $dest_dir
for h in $(cat $hosts_file)
do
        scp $destfilename root@$h:$destfilename
done
</pre>
<p>原理就是在主节点上（能够免秘钥ssh集群其他所有节点）执行该脚本(取名为distribute-file)，hdfs_file为hdfs上的一个文件的完整路径，dest_dir为节点本地目录用来存放分发文件的目录。</p>
<p>必须以root用户执行，与该脚本同级目录下面必须放置一个名叫hosts的文件，里面写上你要分发的所有的节点的hostname。<br>
eg.:</p>
<p>./distribute-file /user/hdfs/tmp/fairscheduler.xml /etc/spark<br>
</p>
<p><br>
</p>
<p><pre code_snippet_id="633289" snippet_file_name="blog_20150401_2_4952503"  name="code" class="plain">#!/bin/bash

if [ $# != 1 ]; then
    echo &quot;useage: $0 &lt;cmd&gt;&quot;
    exit 1
fi

CURR_PATH=&quot;$(cd &quot;`dirname &quot;$0&quot;`&quot;/; pwd)&quot;
hosts_file=$CURR_PATH&quot;/hosts&quot;

if [ ! -f &quot;$hosts_file&quot; ]; then
    echo &quot;$hosts_file not exist&quot;
    exit 1
fi
remote_cmd=$1

for h in $(cat $hosts_file)
do
    ssh root@$h &quot;$remote_cmd&quot;
done</pre>远程分发执行命令脚本（取名叫distribute-exec）,通过免秘钥ssh到远程主机上执行命令，用法大体和上面那个脚本相&#20284;，也是要当前目录下面放置hosts文件，举例：</p>
<p>./distribute-exec &quot;cd /opt/cloudera/parcels/CDH/lib/spark/lib; rm -f spark-assembly.jar; ln -s spark-assembly-with-hive-cdh5.3.2.jar spark-assembly.jar;&quot;</p>
<p>多个命令之间用分号分隔<br>
<br>
</p>

            <div>
                作者：xiao_jun_0820 发表于2015/4/1 15:49:40 <a href="http://blog.csdn.net/xiao_jun_0820/article/details/44807883">原文链接</a>
            </div>
            <div>
            阅读：157 评论：0 <a href="http://blog.csdn.net/xiao_jun_0820/article/details/44807883#comments" target="_blank">查看评论</a>
            </div>
        ]]>
        </description>
        <category></category>
    </item>
</channel>
</rss>
